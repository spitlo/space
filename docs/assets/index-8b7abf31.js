(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hi={},kh={get exports(){return hi},set exports(n){hi=n}},Ur={},Ih={get exports(){return Ur},set exports(n){Ur=n}};/*!
 * Zdog v1.1.3
 * Round, flat, designer-friendly pseudo-3D engine
 * Licensed MIT
 * https://zzz.dog
 * Copyright 2020 Metafizzy
 */var Ca;function rt(){return Ca||(Ca=1,function(n){(function(e,t){n.exports?n.exports=t():e.Zdog=t()})(z,function(){var t={};t.TAU=Math.PI*2,t.extend=function(s,i){for(var a in i)s[a]=i[a];return s},t.lerp=function(s,i,a){return(i-s)*a+s},t.modulo=function(s,i){return(s%i+i)%i};var r={2:function(s){return s*s},3:function(s){return s*s*s},4:function(s){return s*s*s*s},5:function(s){return s*s*s*s*s}};return t.easeInOut=function(s,i){if(i==1)return s;s=Math.max(0,Math.min(1,s));var a=s<.5,o=a?s:1-s;o/=.5;var c=r[i]||r[2],u=c(o);return u/=2,a?u:1-u},t})}(Ih)),Ur}var Lr={},Dh={get exports(){return Lr},set exports(n){Lr=n}},Aa;function vc(){return Aa||(Aa=1,function(n){(function(e,t){n.exports?n.exports=t():e.Zdog.CanvasRenderer=t()})(z,function(){var t={isCanvas:!0};return t.begin=function(r){r.beginPath()},t.move=function(r,s,i){r.moveTo(i.x,i.y)},t.line=function(r,s,i){r.lineTo(i.x,i.y)},t.bezier=function(r,s,i,a,o){r.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)},t.closePath=function(r){r.closePath()},t.setPath=function(){},t.renderPath=function(r,s,i,a){this.begin(r,s),i.forEach(function(o){o.render(r,s,t)}),a&&this.closePath(r,s)},t.stroke=function(r,s,i,a,o){i&&(r.strokeStyle=a,r.lineWidth=o,r.stroke())},t.fill=function(r,s,i,a){i&&(r.fillStyle=a,r.fill())},t.end=function(){},t})}(Dh)),Lr}var Vr={},Eh={get exports(){return Vr},set exports(n){Vr=n}},Oa;function _c(){return Oa||(Oa=1,function(n){(function(e,t){n.exports?n.exports=t():e.Zdog.SvgRenderer=t()})(z,function(){var t={isSvg:!0},r=t.round=function(i){return Math.round(i*1e3)/1e3};function s(i){return r(i.x)+","+r(i.y)+" "}return t.begin=function(){},t.move=function(i,a,o){return"M"+s(o)},t.line=function(i,a,o){return"L"+s(o)},t.bezier=function(i,a,o,c,u){return"C"+s(o)+s(c)+s(u)},t.closePath=function(){return"Z"},t.setPath=function(i,a,o){a.setAttribute("d",o)},t.renderPath=function(i,a,o,c){var u="";o.forEach(function(h){u+=h.render(i,a,t)}),c&&(u+=this.closePath(i,a)),this.setPath(i,a,u)},t.stroke=function(i,a,o,c,u){o&&(a.setAttribute("stroke",c),a.setAttribute("stroke-width",u))},t.fill=function(i,a,o,c){var u=o?c:"none";a.setAttribute("fill",u)},t.end=function(i,a){i.appendChild(a)},t})}(Eh)),Vr}var qr={},Mh={get exports(){return qr},set exports(n){qr=n}},ka;function _n(){return ka||(ka=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt());else{var r=e.Zdog;r.Vector=t(r)}})(z,function(t){function r(o){this.set(o)}var s=t.TAU;r.prototype.set=function(o){return this.x=o&&o.x||0,this.y=o&&o.y||0,this.z=o&&o.z||0,this},r.prototype.write=function(o){return o?(this.x=o.x!=null?o.x:this.x,this.y=o.y!=null?o.y:this.y,this.z=o.z!=null?o.z:this.z,this):this},r.prototype.rotate=function(o){if(o)return this.rotateZ(o.z),this.rotateY(o.y),this.rotateX(o.x),this},r.prototype.rotateZ=function(o){i(this,o,"x","y")},r.prototype.rotateX=function(o){i(this,o,"y","z")},r.prototype.rotateY=function(o){i(this,o,"x","z")};function i(o,c,u,h){if(!(!c||c%s===0)){var l=Math.cos(c),d=Math.sin(c),f=o[u],p=o[h];o[u]=f*l-p*d,o[h]=p*l+f*d}}r.prototype.isSame=function(o){return o?this.x===o.x&&this.y===o.y&&this.z===o.z:!1},r.prototype.add=function(o){return o?(this.x+=o.x||0,this.y+=o.y||0,this.z+=o.z||0,this):this},r.prototype.subtract=function(o){return o?(this.x-=o.x||0,this.y-=o.y||0,this.z-=o.z||0,this):this},r.prototype.multiply=function(o){return o==null?this:(typeof o=="number"?(this.x*=o,this.y*=o,this.z*=o):(this.x*=o.x!=null?o.x:1,this.y*=o.y!=null?o.y:1,this.z*=o.z!=null?o.z:1),this)},r.prototype.transform=function(o,c,u){return this.multiply(u),this.rotate(c),this.add(o),this},r.prototype.lerp=function(o,c){return this.x=t.lerp(this.x,o.x||0,c),this.y=t.lerp(this.y,o.y||0,c),this.z=t.lerp(this.z,o.z||0,c),this},r.prototype.magnitude=function(){var o=this.x*this.x+this.y*this.y+this.z*this.z;return a(o)};function a(o){return Math.abs(o-1)<1e-8?1:Math.sqrt(o)}return r.prototype.magnitude2d=function(){var o=this.x*this.x+this.y*this.y;return a(o)},r.prototype.copy=function(){return new r(this)},r})}(Mh)),qr}var Br={},Ph={get exports(){return Br},set exports(n){Br=n}},Ia;function jt(){return Ia||(Ia=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),_n(),vc(),_c());else{var r=e.Zdog;r.Anchor=t(r,r.Vector,r.CanvasRenderer,r.SvgRenderer)}})(z,function(t,r,s,i){var a=t.TAU,o={x:1,y:1,z:1};function c(h){this.create(h||{})}c.prototype.create=function(h){this.children=[],t.extend(this,this.constructor.defaults),this.setOptions(h),this.translate=new r(h.translate),this.rotate=new r(h.rotate),this.scale=new r(o).multiply(this.scale),this.origin=new r,this.renderOrigin=new r,this.addTo&&this.addTo.addChild(this)},c.defaults={},c.optionKeys=Object.keys(c.defaults).concat(["rotate","translate","scale","addTo"]),c.prototype.setOptions=function(h){var l=this.constructor.optionKeys;for(var d in h)l.indexOf(d)!=-1&&(this[d]=h[d])},c.prototype.addChild=function(h){this.children.indexOf(h)==-1&&(h.remove(),h.addTo=this,this.children.push(h))},c.prototype.removeChild=function(h){var l=this.children.indexOf(h);l!=-1&&this.children.splice(l,1)},c.prototype.remove=function(){this.addTo&&this.addTo.removeChild(this)},c.prototype.update=function(){this.reset(),this.children.forEach(function(h){h.update()}),this.transform(this.translate,this.rotate,this.scale)},c.prototype.reset=function(){this.renderOrigin.set(this.origin)},c.prototype.transform=function(h,l,d){this.renderOrigin.transform(h,l,d),this.children.forEach(function(f){f.transform(h,l,d)})},c.prototype.updateGraph=function(){this.update(),this.updateFlatGraph(),this.flatGraph.forEach(function(h){h.updateSortValue()}),this.flatGraph.sort(c.shapeSorter)},c.shapeSorter=function(h,l){return h.sortValue-l.sortValue},Object.defineProperty(c.prototype,"flatGraph",{get:function(){return this._flatGraph||this.updateFlatGraph(),this._flatGraph},set:function(h){this._flatGraph=h}}),c.prototype.updateFlatGraph=function(){this.flatGraph=this.getFlatGraph()},c.prototype.getFlatGraph=function(){var h=[this];return this.addChildFlatGraph(h)},c.prototype.addChildFlatGraph=function(h){return this.children.forEach(function(l){var d=l.getFlatGraph();Array.prototype.push.apply(h,d)}),h},c.prototype.updateSortValue=function(){this.sortValue=this.renderOrigin.z},c.prototype.render=function(){},c.prototype.renderGraphCanvas=function(h){if(!h)throw new Error("ctx is "+h+". Canvas context required for render. Check .renderGraphCanvas( ctx ).");this.flatGraph.forEach(function(l){l.render(h,s)})},c.prototype.renderGraphSvg=function(h){if(!h)throw new Error("svg is "+h+". SVG required for render. Check .renderGraphSvg( svg ).");this.flatGraph.forEach(function(l){l.render(h,i)})},c.prototype.copy=function(h){var l={},d=this.constructor.optionKeys;d.forEach(function(p){l[p]=this[p]},this),t.extend(l,h);var f=this.constructor;return new f(l)},c.prototype.copyGraph=function(h){var l=this.copy(h);return this.children.forEach(function(d){d.copyGraph({addTo:l})}),l},c.prototype.normalizeRotate=function(){this.rotate.x=t.modulo(this.rotate.x,a),this.rotate.y=t.modulo(this.rotate.y,a),this.rotate.z=t.modulo(this.rotate.z,a)};function u(h){return function(l){function d(f){this.create(f||{})}return d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.defaults=t.extend({},h.defaults),t.extend(d.defaults,l),d.optionKeys=h.optionKeys.slice(0),Object.keys(d.defaults).forEach(function(f){!d.optionKeys.indexOf(f)!=1&&d.optionKeys.push(f)}),d.subclass=u(d),d}}return c.subclass=u(c),c})}(Ph)),Br}var jr={},Nh={get exports(){return jr},set exports(n){jr=n}},Da;function yc(){return Da||(Da=1,function(n){(function(e,t){n.exports?n.exports=t():e.Zdog.Dragger=t()})(z,function(){var t=typeof window<"u",r="mousedown",s="mousemove",i="mouseup";t&&(window.PointerEvent?(r="pointerdown",s="pointermove",i="pointerup"):"ontouchstart"in window&&(r="touchstart",s="touchmove",i="touchend"));function a(){}function o(c){this.create(c||{})}return o.prototype.create=function(c){this.onDragStart=c.onDragStart||a,this.onDragMove=c.onDragMove||a,this.onDragEnd=c.onDragEnd||a,this.bindDrag(c.startElement)},o.prototype.bindDrag=function(c){c=this.getQueryElement(c),c&&(c.style.touchAction="none",c.addEventListener(r,this))},o.prototype.getQueryElement=function(c){return typeof c=="string"&&(c=document.querySelector(c)),c},o.prototype.handleEvent=function(c){var u=this["on"+c.type];u&&u.call(this,c)},o.prototype.onmousedown=o.prototype.onpointerdown=function(c){this.dragStart(c,c)},o.prototype.ontouchstart=function(c){this.dragStart(c,c.changedTouches[0])},o.prototype.dragStart=function(c,u){c.preventDefault(),this.dragStartX=u.pageX,this.dragStartY=u.pageY,t&&(window.addEventListener(s,this),window.addEventListener(i,this)),this.onDragStart(u)},o.prototype.ontouchmove=function(c){this.dragMove(c,c.changedTouches[0])},o.prototype.onmousemove=o.prototype.onpointermove=function(c){this.dragMove(c,c)},o.prototype.dragMove=function(c,u){c.preventDefault();var h=u.pageX-this.dragStartX,l=u.pageY-this.dragStartY;this.onDragMove(u,h,l)},o.prototype.onmouseup=o.prototype.onpointerup=o.prototype.ontouchend=o.prototype.dragEnd=function(){window.removeEventListener(s,this),window.removeEventListener(i,this),this.onDragEnd()},o})}(Nh)),jr}var Wr={},Rh={get exports(){return Wr},set exports(n){Wr=n}},Ea;function Fh(){return Ea||(Ea=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),jt(),yc());else{var r=e.Zdog;r.Illustration=t(r,r.Anchor,r.Dragger)}})(z,function(t,r,s){function i(){}var a=t.TAU,o=r.subclass({element:void 0,centered:!0,zoom:1,dragRotate:!1,resize:!1,onPrerender:i,onDragStart:i,onDragMove:i,onDragEnd:i,onResize:i});t.extend(o.prototype,s.prototype),o.prototype.create=function(u){r.prototype.create.call(this,u),s.prototype.create.call(this,u),this.setElement(this.element),this.setDragRotate(this.dragRotate),this.setResize(this.resize)},o.prototype.setElement=function(u){if(u=this.getQueryElement(u),!u)throw new Error("Zdog.Illustration element required. Set to "+u);var h=u.nodeName.toLowerCase();h=="canvas"?this.setCanvas(u):h=="svg"&&this.setSvg(u)},o.prototype.setSize=function(u,h){u=Math.round(u),h=Math.round(h),this.isCanvas?this.setSizeCanvas(u,h):this.isSvg&&this.setSizeSvg(u,h)},o.prototype.setResize=function(u){this.resize=u,this.resizeListener||(this.resizeListener=this.onWindowResize.bind(this)),u?(window.addEventListener("resize",this.resizeListener),this.onWindowResize()):window.removeEventListener("resize",this.resizeListener)},o.prototype.onWindowResize=function(){this.setMeasuredSize(),this.onResize(this.width,this.height)},o.prototype.setMeasuredSize=function(){var u,h,l=this.resize=="fullscreen";if(l)u=window.innerWidth,h=window.innerHeight;else{var d=this.element.getBoundingClientRect();u=d.width,h=d.height}this.setSize(u,h)},o.prototype.renderGraph=function(u){this.isCanvas?this.renderGraphCanvas(u):this.isSvg&&this.renderGraphSvg(u)},o.prototype.updateRenderGraph=function(u){this.updateGraph(),this.renderGraph(u)},o.prototype.setCanvas=function(u){this.element=u,this.isCanvas=!0,this.ctx=this.element.getContext("2d"),this.setSizeCanvas(u.width,u.height)},o.prototype.setSizeCanvas=function(u,h){this.width=u,this.height=h;var l=this.pixelRatio=window.devicePixelRatio||1;this.element.width=this.canvasWidth=u*l,this.element.height=this.canvasHeight=h*l;var d=l>1&&!this.resize;d&&(this.element.style.width=u+"px",this.element.style.height=h+"px")},o.prototype.renderGraphCanvas=function(u){u=u||this,this.prerenderCanvas(),r.prototype.renderGraphCanvas.call(u,this.ctx),this.postrenderCanvas()},o.prototype.prerenderCanvas=function(){var u=this.ctx;if(u.lineCap="round",u.lineJoin="round",u.clearRect(0,0,this.canvasWidth,this.canvasHeight),u.save(),this.centered){var h=this.width/2*this.pixelRatio,l=this.height/2*this.pixelRatio;u.translate(h,l)}var d=this.pixelRatio*this.zoom;u.scale(d,d),this.onPrerender(u)},o.prototype.postrenderCanvas=function(){this.ctx.restore()},o.prototype.setSvg=function(u){this.element=u,this.isSvg=!0,this.pixelRatio=1;var h=u.getAttribute("width"),l=u.getAttribute("height");this.setSizeSvg(h,l)},o.prototype.setSizeSvg=function(u,h){this.width=u,this.height=h;var l=u/this.zoom,d=h/this.zoom,f=this.centered?-l/2:0,p=this.centered?-d/2:0;this.element.setAttribute("viewBox",f+" "+p+" "+l+" "+d),this.resize?(this.element.removeAttribute("width"),this.element.removeAttribute("height")):(this.element.setAttribute("width",u),this.element.setAttribute("height",h))},o.prototype.renderGraphSvg=function(u){u=u||this,c(this.element),this.onPrerender(this.element),r.prototype.renderGraphSvg.call(u,this.element)};function c(u){for(;u.firstChild;)u.removeChild(u.firstChild)}return o.prototype.setDragRotate=function(u){if(u)u===!0&&(u=this);else return;this.dragRotate=u,this.bindDrag(this.element)},o.prototype.dragStart=function(){this.dragStartRX=this.dragRotate.rotate.x,this.dragStartRY=this.dragRotate.rotate.y,s.prototype.dragStart.apply(this,arguments)},o.prototype.dragMove=function(u,h){var l=h.pageX-this.dragStartX,d=h.pageY-this.dragStartY,f=Math.min(this.width,this.height),p=l/f*a,m=d/f*a;this.dragRotate.rotate.x=this.dragStartRX-m,this.dragRotate.rotate.y=this.dragStartRY-p,s.prototype.dragMove.apply(this,arguments)},o})}(Rh)),Wr}var Gr={},$h={get exports(){return Gr},set exports(n){Gr=n}},Ma;function Ms(){return Ma||(Ma=1,function(n){(function(e,t){if(n.exports)n.exports=t(_n());else{var r=e.Zdog;r.PathCommand=t(r.Vector)}})(z,function(t){function r(o,c,u){this.method=o,this.points=c.map(s),this.renderPoints=c.map(i),this.previousPoint=u,this.endRenderPoint=this.renderPoints[this.renderPoints.length-1],o=="arc"&&(this.controlPoints=[new t,new t])}function s(o){return o instanceof t?o:new t(o)}function i(o){return new t(o)}r.prototype.reset=function(){var o=this.points;this.renderPoints.forEach(function(c,u){var h=o[u];c.set(h)})},r.prototype.transform=function(o,c,u){this.renderPoints.forEach(function(h){h.transform(o,c,u)})},r.prototype.render=function(o,c,u){return this[this.method](o,c,u)},r.prototype.move=function(o,c,u){return u.move(o,c,this.renderPoints[0])},r.prototype.line=function(o,c,u){return u.line(o,c,this.renderPoints[0])},r.prototype.bezier=function(o,c,u){var h=this.renderPoints[0],l=this.renderPoints[1],d=this.renderPoints[2];return u.bezier(o,c,h,l,d)};var a=9/16;return r.prototype.arc=function(o,c,u){var h=this.previousPoint,l=this.renderPoints[0],d=this.renderPoints[1],f=this.controlPoints[0],p=this.controlPoints[1];return f.set(h).lerp(l,a),p.set(d).lerp(l,a),u.bezier(o,c,f,p,d)},r})}($h)),Gr}var zr={},Uh={get exports(){return zr},set exports(n){zr=n}},Pa;function Wt(){return Pa||(Pa=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),_n(),Ms(),jt());else{var r=e.Zdog;r.Shape=t(r,r.Vector,r.PathCommand,r.Anchor)}})(z,function(t,r,s,i){var a=i.subclass({stroke:1,fill:!1,color:"#333",closed:!0,visible:!0,path:[{}],front:{z:1},backface:!0});a.prototype.create=function(h){i.prototype.create.call(this,h),this.updatePath(),this.front=new r(h.front||this.front),this.renderFront=new r(this.front),this.renderNormal=new r};var o=["move","line","bezier","arc"];a.prototype.updatePath=function(){this.setPath(),this.updatePathCommands()},a.prototype.setPath=function(){},a.prototype.updatePathCommands=function(){var h;this.pathCommands=this.path.map(function(l,d){var f=Object.keys(l),p=f[0],m=l[p],g=f.length==1&&o.indexOf(p)!=-1;g||(p="line",m=l);var v=p=="line"||p=="move",y=Array.isArray(m);v&&!y&&(m=[m]),p=d===0?"move":p;var S=new s(p,m,h);return h=S.endRenderPoint,S})},a.prototype.reset=function(){this.renderOrigin.set(this.origin),this.renderFront.set(this.front),this.pathCommands.forEach(function(h){h.reset()})},a.prototype.transform=function(h,l,d){this.renderOrigin.transform(h,l,d),this.renderFront.transform(h,l,d),this.renderNormal.set(this.renderOrigin).subtract(this.renderFront),this.pathCommands.forEach(function(f){f.transform(h,l,d)}),this.children.forEach(function(f){f.transform(h,l,d)})},a.prototype.updateSortValue=function(){var h=this.pathCommands.length,l=this.pathCommands[0].endRenderPoint,d=this.pathCommands[h-1].endRenderPoint,f=h>2&&l.isSame(d);f&&(h-=1);for(var p=0,m=0;m<h;m++)p+=this.pathCommands[m].endRenderPoint.z;this.sortValue=p/h},a.prototype.render=function(h,l){var d=this.pathCommands.length;if(!(!this.visible||!d)&&(this.isFacingBack=this.renderNormal.z>0,!(!this.backface&&this.isFacingBack))){if(!l)throw new Error("Zdog renderer required. Set to "+l);var f=d==1;l.isCanvas&&f?this.renderCanvasDot(h,l):this.renderPath(h,l)}};var c=t.TAU;a.prototype.renderCanvasDot=function(h){var l=this.getLineWidth();if(l){h.fillStyle=this.getRenderColor();var d=this.pathCommands[0].endRenderPoint;h.beginPath();var f=l/2;h.arc(d.x,d.y,f,0,c),h.fill()}},a.prototype.getLineWidth=function(){return this.stroke?this.stroke==!0?1:this.stroke:0},a.prototype.getRenderColor=function(){var h=typeof this.backface=="string"&&this.isFacingBack,l=h?this.backface:this.color;return l},a.prototype.renderPath=function(h,l){var d=this.getRenderElement(h,l),f=this.pathCommands.length==2&&this.pathCommands[1].method=="line",p=!f&&this.closed,m=this.getRenderColor();l.renderPath(h,d,this.pathCommands,p),l.stroke(h,d,this.stroke,m,this.getLineWidth()),l.fill(h,d,this.fill,m),l.end(h,d)};var u="http://www.w3.org/2000/svg";return a.prototype.getRenderElement=function(h,l){if(l.isSvg)return this.svgElement||(this.svgElement=document.createElementNS(u,"path"),this.svgElement.setAttribute("stroke-linecap","round"),this.svgElement.setAttribute("stroke-linejoin","round")),this.svgElement},a})}(Uh)),zr}var Hr={},Lh={get exports(){return Hr},set exports(n){Hr=n}},Na;function bc(){return Na||(Na=1,function(n){(function(e,t){if(n.exports)n.exports=t(jt());else{var r=e.Zdog;r.Group=t(r.Anchor)}})(z,function(t){var r=t.subclass({updateSort:!1,visible:!0});return r.prototype.updateSortValue=function(){var s=0;this.flatGraph.forEach(function(i){i.updateSortValue(),s+=i.sortValue}),this.sortValue=s/this.flatGraph.length,this.updateSort&&this.flatGraph.sort(t.shapeSorter)},r.prototype.render=function(s,i){this.visible&&this.flatGraph.forEach(function(a){a.render(s,i)})},r.prototype.updateFlatGraph=function(){var s=[];this.flatGraph=this.addChildFlatGraph(s)},r.prototype.getFlatGraph=function(){return[this]},r})}(Lh)),Hr}var Xr={},Vh={get exports(){return Xr},set exports(n){Xr=n}},Ra;function xc(){return Ra||(Ra=1,function(n){(function(e,t){if(n.exports)n.exports=t(Wt());else{var r=e.Zdog;r.Rect=t(r.Shape)}})(z,function(t){var r=t.subclass({width:1,height:1});return r.prototype.setPath=function(){var s=this.width/2,i=this.height/2;this.path=[{x:-s,y:-i},{x:s,y:-i},{x:s,y:i},{x:-s,y:i}]},r})}(Vh)),Xr}var Yr={},qh={get exports(){return Yr},set exports(n){Yr=n}},Fa;function Bh(){return Fa||(Fa=1,function(n){(function(e,t){if(n.exports)n.exports=t(Wt());else{var r=e.Zdog;r.RoundedRect=t(r.Shape)}})(z,function(t){var r=t.subclass({width:1,height:1,cornerRadius:.25,closed:!1});return r.prototype.setPath=function(){var s=this.width/2,i=this.height/2,a=Math.min(s,i),o=Math.min(this.cornerRadius,a),c=s-o,u=i-o,h=[{x:c,y:-i},{arc:[{x:s,y:-i},{x:s,y:-u}]}];u&&h.push({x:s,y:u}),h.push({arc:[{x:s,y:i},{x:c,y:i}]}),c&&h.push({x:-c,y:i}),h.push({arc:[{x:-s,y:i},{x:-s,y:u}]}),u&&h.push({x:-s,y:-u}),h.push({arc:[{x:-s,y:-i},{x:-c,y:-i}]}),c&&h.push({x:c,y:-i}),this.path=h},r})}(qh)),Yr}var Kr={},jh={get exports(){return Kr},set exports(n){Kr=n}},$a;function Ps(){return $a||($a=1,function(n){(function(e,t){if(n.exports)n.exports=t(Wt());else{var r=e.Zdog;r.Ellipse=t(r.Shape)}})(z,function(t){var r=t.subclass({diameter:1,width:void 0,height:void 0,quarters:4,closed:!1});return r.prototype.setPath=function(){var s=this.width!=null?this.width:this.diameter,i=this.height!=null?this.height:this.diameter,a=s/2,o=i/2;this.path=[{x:0,y:-o},{arc:[{x:a,y:-o},{x:a,y:0}]}],this.quarters>1&&this.path.push({arc:[{x:a,y:o},{x:0,y:o}]}),this.quarters>2&&this.path.push({arc:[{x:-a,y:o},{x:-a,y:0}]}),this.quarters>3&&this.path.push({arc:[{x:-a,y:-o},{x:0,y:-o}]})},r})}(jh)),Kr}var Qr={},Wh={get exports(){return Qr},set exports(n){Qr=n}},Ua;function Gh(){return Ua||(Ua=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),Wt());else{var r=e.Zdog;r.Polygon=t(r,r.Shape)}})(z,function(t,r){var s=r.subclass({sides:3,radius:.5}),i=t.TAU;return s.prototype.setPath=function(){this.path=[];for(var a=0;a<this.sides;a++){var o=a/this.sides*i-i/4,c=Math.cos(o)*this.radius,u=Math.sin(o)*this.radius;this.path.push({x:c,y:u})}},s})}(Wh)),Qr}var Zr={},zh={get exports(){return Zr},set exports(n){Zr=n}},La;function Hh(){return La||(La=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),_n(),jt(),Ps());else{var r=e.Zdog;r.Hemisphere=t(r,r.Vector,r.Anchor,r.Ellipse)}})(z,function(t,r,s,i){var a=i.subclass({fill:!0}),o=t.TAU;a.prototype.create=function(){i.prototype.create.apply(this,arguments),this.apex=new s({addTo:this,translate:{z:this.diameter/2}}),this.renderCentroid=new r},a.prototype.updateSortValue=function(){this.renderCentroid.set(this.renderOrigin).lerp(this.apex.renderOrigin,3/8),this.sortValue=this.renderCentroid.z},a.prototype.render=function(u,h){this.renderDome(u,h),i.prototype.render.apply(this,arguments)},a.prototype.renderDome=function(u,h){if(this.visible){var l=this.getDomeRenderElement(u,h),d=Math.atan2(this.renderNormal.y,this.renderNormal.x),f=this.diameter/2*this.renderNormal.magnitude(),p=this.renderOrigin.x,m=this.renderOrigin.y;if(h.isCanvas){var g=d+o/4,v=d-o/4;u.beginPath(),u.arc(p,m,f,g,v)}else h.isSvg&&(d=(d-o/4)/o*360,this.domeSvgElement.setAttribute("d","M "+-f+",0 A "+f+","+f+" 0 0 1 "+f+",0"),this.domeSvgElement.setAttribute("transform","translate("+p+","+m+" ) rotate("+d+")"));h.stroke(u,l,this.stroke,this.color,this.getLineWidth()),h.fill(u,l,this.fill,this.color),h.end(u,l)}};var c="http://www.w3.org/2000/svg";return a.prototype.getDomeRenderElement=function(u,h){if(h.isSvg)return this.domeSvgElement||(this.domeSvgElement=document.createElementNS(c,"path"),this.domeSvgElement.setAttribute("stroke-linecap","round"),this.domeSvgElement.setAttribute("stroke-linejoin","round")),this.domeSvgElement},a})}(zh)),Zr}var Jr={},Xh={get exports(){return Jr},set exports(n){Jr=n}},Va;function Yh(){return Va||(Va=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),Ms(),Wt(),bc(),Ps());else{var r=e.Zdog;r.Cylinder=t(r,r.PathCommand,r.Shape,r.Group,r.Ellipse)}})(z,function(t,r,s,i,a){function o(){}var c=i.subclass({color:"#333",updateSort:!0});c.prototype.create=function(){i.prototype.create.apply(this,arguments),this.pathCommands=[new r("move",[{}]),new r("line",[{}])]},c.prototype.render=function(p,m){this.renderCylinderSurface(p,m),i.prototype.render.apply(this,arguments)},c.prototype.renderCylinderSurface=function(p,m){if(this.visible){var g=this.getRenderElement(p,m),v=this.frontBase,y=this.rearBase,S=v.renderNormal.magnitude(),C=v.diameter*S+v.getLineWidth();this.pathCommands[0].renderPoints[0].set(v.renderOrigin),this.pathCommands[1].renderPoints[0].set(y.renderOrigin),m.isCanvas&&(p.lineCap="butt"),m.renderPath(p,g,this.pathCommands),m.stroke(p,g,!0,this.color,C),m.end(p,g),m.isCanvas&&(p.lineCap="round")}};var u="http://www.w3.org/2000/svg";c.prototype.getRenderElement=function(p,m){if(m.isSvg)return this.svgElement||(this.svgElement=document.createElementNS(u,"path")),this.svgElement},c.prototype.copyGraph=o;var h=a.subclass();h.prototype.copyGraph=o;var l=s.subclass({diameter:1,length:1,frontFace:void 0,fill:!0}),d=t.TAU;l.prototype.create=function(){s.prototype.create.apply(this,arguments),this.group=new c({addTo:this,color:this.color,visible:this.visible});var p=this.length/2,m=this.backface||!0;this.frontBase=this.group.frontBase=new a({addTo:this.group,diameter:this.diameter,translate:{z:p},rotate:{y:d/2},color:this.color,stroke:this.stroke,fill:this.fill,backface:this.frontFace||m,visible:this.visible}),this.rearBase=this.group.rearBase=this.frontBase.copy({translate:{z:-p},rotate:{y:0},backface:m})},l.prototype.render=function(){};var f=["stroke","fill","color","visible"];return f.forEach(function(p){var m="_"+p;Object.defineProperty(l.prototype,p,{get:function(){return this[m]},set:function(g){this[m]=g,this.frontBase&&(this.frontBase[p]=g,this.rearBase[p]=g,this.group[p]=g)}})}),l})}(Xh)),Jr}var es={},Kh={get exports(){return es},set exports(n){es=n}},qa;function Qh(){return qa||(qa=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),_n(),Ms(),jt(),Ps());else{var r=e.Zdog;r.Cone=t(r,r.Vector,r.PathCommand,r.Anchor,r.Ellipse)}})(z,function(t,r,s,i,a){var o=a.subclass({length:1,fill:!0}),c=t.TAU;o.prototype.create=function(){a.prototype.create.apply(this,arguments),this.apex=new i({addTo:this,translate:{z:this.length}}),this.renderApex=new r,this.renderCentroid=new r,this.tangentA=new r,this.tangentB=new r,this.surfacePathCommands=[new s("move",[{}]),new s("line",[{}]),new s("line",[{}])]},o.prototype.updateSortValue=function(){this.renderCentroid.set(this.renderOrigin).lerp(this.apex.renderOrigin,1/3),this.sortValue=this.renderCentroid.z},o.prototype.render=function(h,l){this.renderConeSurface(h,l),a.prototype.render.apply(this,arguments)},o.prototype.renderConeSurface=function(h,l){if(this.visible){this.renderApex.set(this.apex.renderOrigin).subtract(this.renderOrigin);var d=this.renderNormal.magnitude(),f=this.renderApex.magnitude2d(),p=this.renderNormal.magnitude2d(),m=Math.acos(p/d),g=Math.sin(m),v=this.diameter/2*d,y=v*g<f;if(y){var S=Math.atan2(this.renderNormal.y,this.renderNormal.x)+c/2,C=f/g,b=Math.acos(v/C),T=this.tangentA,x=this.tangentB;T.x=Math.cos(b)*v*g,T.y=Math.sin(b)*v,x.set(this.tangentA),x.y*=-1,T.rotateZ(S),x.rotateZ(S),T.add(this.renderOrigin),x.add(this.renderOrigin),this.setSurfaceRenderPoint(0,T),this.setSurfaceRenderPoint(1,this.apex.renderOrigin),this.setSurfaceRenderPoint(2,x);var w=this.getSurfaceRenderElement(h,l);l.renderPath(h,w,this.surfacePathCommands),l.stroke(h,w,this.stroke,this.color,this.getLineWidth()),l.fill(h,w,this.fill,this.color),l.end(h,w)}}};var u="http://www.w3.org/2000/svg";return o.prototype.getSurfaceRenderElement=function(h,l){if(l.isSvg)return this.surfaceSvgElement||(this.surfaceSvgElement=document.createElementNS(u,"path"),this.surfaceSvgElement.setAttribute("stroke-linecap","round"),this.surfaceSvgElement.setAttribute("stroke-linejoin","round")),this.surfaceSvgElement},o.prototype.setSurfaceRenderPoint=function(h,l){var d=this.surfacePathCommands[h].renderPoints[0];d.set(l)},o})}(Kh)),es}var ts={},Zh={get exports(){return ts},set exports(n){ts=n}},Ba;function Jh(){return Ba||(Ba=1,function(n){(function(e,t){if(n.exports)n.exports=t(rt(),jt(),Wt(),xc());else{var r=e.Zdog;r.Box=t(r,r.Anchor,r.Shape,r.Rect)}})(z,function(t,r,s,i){var a=i.subclass();a.prototype.copyGraph=function(){};var o=t.TAU,c=["frontFace","rearFace","leftFace","rightFace","topFace","bottomFace"],u=t.extend({},s.defaults);delete u.path,c.forEach(function(d){u[d]=!0}),t.extend(u,{width:1,height:1,depth:1,fill:!0});var h=r.subclass(u);h.prototype.create=function(d){r.prototype.create.call(this,d),this.updatePath(),this.fill=this.fill},h.prototype.updatePath=function(){c.forEach(function(d){this[d]=this[d]},this)},c.forEach(function(d){var f="_"+d;Object.defineProperty(h.prototype,d,{get:function(){return this[f]},set:function(p){this[f]=p,this.setFace(d,p)}})}),h.prototype.setFace=function(d,f){var p=d+"Rect",m=this[p];if(!f){this.removeChild(m);return}var g=this.getFaceOptions(d);g.color=typeof f=="string"?f:this.color,m?m.setOptions(g):m=this[p]=new a(g),m.updatePath(),this.addChild(m)},h.prototype.getFaceOptions=function(d){return{frontFace:{width:this.width,height:this.height,translate:{z:this.depth/2}},rearFace:{width:this.width,height:this.height,translate:{z:-this.depth/2},rotate:{y:o/2}},leftFace:{width:this.depth,height:this.height,translate:{x:-this.width/2},rotate:{y:-o/4}},rightFace:{width:this.depth,height:this.height,translate:{x:this.width/2},rotate:{y:o/4}},topFace:{width:this.width,height:this.depth,translate:{y:-this.height/2},rotate:{x:-o/4}},bottomFace:{width:this.width,height:this.depth,translate:{y:this.height/2},rotate:{x:o/4}}}[d]};var l=["color","stroke","fill","backface","front","visible"];return l.forEach(function(d){var f="_"+d;Object.defineProperty(h.prototype,d,{get:function(){return this[f]},set:function(p){this[f]=p,c.forEach(function(m){var g=this[m+"Rect"],v=typeof this[m]=="string",y=d=="color"&&v;g&&!y&&(g[d]=p)},this)}})}),h})}(Zh)),ts}(function(n){(function(e,t){n.exports&&(n.exports=t(rt(),vc(),_c(),_n(),jt(),yc(),Fh(),Ms(),Wt(),bc(),xc(),Bh(),Ps(),Gh(),Hh(),Yh(),Qh(),Jh()))})(z,function(t,r,s,i,a,o,c,u,h,l,d,f,p,m,g,v,y,S){return t.CanvasRenderer=r,t.SvgRenderer=s,t.Vector=i,t.Anchor=a,t.Dragger=o,t.Illustration=c,t.PathCommand=u,t.Shape=h,t.Group=l,t.Rect=d,t.RoundedRect=f,t.Ellipse=p,t.Polygon=m,t.Hemisphere=g,t.Cylinder=v,t.Cone=y,t.Box=S,t})})(kh);const Pt=hi;/*!
 * Zfont v1.2.8
 * Text plugin for Zdog
 * 2019 James Daniel
 * MIT Licensed 
 * github.com/jaames/zfont
 */var _={};_.parse=function(n){var e=_._bin,t=new Uint8Array(n),r=0;e.readFixed(t,r),r+=4;var s=e.readUshort(t,r);r+=2,e.readUshort(t,r),r+=2,e.readUshort(t,r),r+=2,e.readUshort(t,r),r+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],a={_data:t},o={},c=0;c<s;c++){var u=e.readASCII(t,r,4);r+=4,e.readUint(t,r),r+=4;var h=e.readUint(t,r);r+=4;var l=e.readUint(t,r);r+=4,o[u]={offset:h,length:l}}for(var c=0;c<i.length;c++){var d=i[c];o[d]&&(a[d.trim()]=_[d.trim()].parse(t,o[d].offset,o[d].length,a))}return a};_._tabOffset=function(n,e){for(var t=_._bin,r=t.readUshort(n,4),s=12,i=0;i<r;i++){var a=t.readASCII(n,s,4);s+=4,t.readUint(n,s),s+=4;var o=t.readUint(n,s);if(s+=4,t.readUint(n,s),s+=4,a==e)return o}return 0};_._bin={readFixed:function(n,e){return(n[e]<<8|n[e+1])+(n[e+2]<<8|n[e+3])/(256*256+4)},readF2dot14:function(n,e){var t=_._bin.readShort(n,e);return t/16384},readInt:function(n,e){var t=_._bin.t.uint8;return t[0]=n[e+3],t[1]=n[e+2],t[2]=n[e+1],t[3]=n[e],_._bin.t.int32[0]},readInt8:function(n,e){var t=_._bin.t.uint8;return t[0]=n[e],_._bin.t.int8[0]},readShort:function(n,e){var t=_._bin.t.uint8;return t[1]=n[e],t[0]=n[e+1],_._bin.t.int16[0]},readUshort:function(n,e){return n[e]<<8|n[e+1]},readUshorts:function(n,e,t){for(var r=[],s=0;s<t;s++)r.push(_._bin.readUshort(n,e+s*2));return r},readUint:function(n,e){var t=_._bin.t.uint8;return t[3]=n[e],t[2]=n[e+1],t[1]=n[e+2],t[0]=n[e+3],_._bin.t.uint32[0]},readUint64:function(n,e){return _._bin.readUint(n,e)*(4294967295+1)+_._bin.readUint(n,e+4)},readASCII:function(n,e,t){for(var r="",s=0;s<t;s++)r+=String.fromCharCode(n[e+s]);return r},readUnicode:function(n,e,t){for(var r="",s=0;s<t;s++){var i=n[e++]<<8|n[e++];r+=String.fromCharCode(i)}return r},_tdec:window.TextDecoder?new window.TextDecoder:null,readUTF8:function(n,e,t){var r=_._bin._tdec;return r&&e==0&&t==n.length?r.decode(n):_._bin.readASCII(n,e,t)},readBytes:function(n,e,t){for(var r=[],s=0;s<t;s++)r.push(n[e+s]);return r},readASCIIArray:function(n,e,t){for(var r=[],s=0;s<t;s++)r.push(String.fromCharCode(n[e+s]));return r}};_._bin.t={buff:new ArrayBuffer(8)};_._bin.t.int8=new Int8Array(_._bin.t.buff);_._bin.t.uint8=new Uint8Array(_._bin.t.buff);_._bin.t.int16=new Int16Array(_._bin.t.buff);_._bin.t.uint16=new Uint16Array(_._bin.t.buff);_._bin.t.int32=new Int32Array(_._bin.t.buff);_._bin.t.uint32=new Uint32Array(_._bin.t.buff);_._lctf={};_._lctf.parse=function(n,e,t,r,s){var i=_._bin,a={},o=e;i.readFixed(n,e),e+=4;var c=i.readUshort(n,e);e+=2;var u=i.readUshort(n,e);e+=2;var h=i.readUshort(n,e);return e+=2,a.scriptList=_._lctf.readScriptList(n,o+c),a.featureList=_._lctf.readFeatureList(n,o+u),a.lookupList=_._lctf.readLookupList(n,o+h,s),a};_._lctf.readLookupList=function(n,e,t){var r=_._bin,s=e,i=[],a=r.readUshort(n,e);e+=2;for(var o=0;o<a;o++){var c=r.readUshort(n,e);e+=2;var u=_._lctf.readLookupTable(n,s+c,t);i.push(u)}return i};_._lctf.readLookupTable=function(n,e,t){var r=_._bin,s=e,i={tabs:[]};i.ltype=r.readUshort(n,e),e+=2,i.flag=r.readUshort(n,e),e+=2;var a=r.readUshort(n,e);e+=2;for(var o=0;o<a;o++){var c=r.readUshort(n,e);e+=2;var u=t(n,i.ltype,s+c);i.tabs.push(u)}return i};_._lctf.numOfOnes=function(n){for(var e=0,t=0;t<32;t++)n>>>t&1&&e++;return e};_._lctf.readClassDef=function(n,e){var t=_._bin,r=[],s=t.readUshort(n,e);if(e+=2,s==1){var i=t.readUshort(n,e);e+=2;var a=t.readUshort(n,e);e+=2;for(var o=0;o<a;o++)r.push(i+o),r.push(i+o),r.push(t.readUshort(n,e)),e+=2}if(s==2){var c=t.readUshort(n,e);e+=2;for(var o=0;o<c;o++)r.push(t.readUshort(n,e)),e+=2,r.push(t.readUshort(n,e)),e+=2,r.push(t.readUshort(n,e)),e+=2}return r};_._lctf.getInterval=function(n,e){for(var t=0;t<n.length;t+=3){var r=n[t],s=n[t+1];if(n[t+2],r<=e&&e<=s)return t}return-1};_._lctf.readValueRecord=function(n,e,t){var r=_._bin,s=[];return s.push(t&1?r.readShort(n,e):0),e+=t&1?2:0,s.push(t&2?r.readShort(n,e):0),e+=t&2?2:0,s.push(t&4?r.readShort(n,e):0),e+=t&4?2:0,s.push(t&8?r.readShort(n,e):0),e+=t&8?2:0,s};_._lctf.readCoverage=function(n,e){var t=_._bin,r={};r.fmt=t.readUshort(n,e),e+=2;var s=t.readUshort(n,e);return e+=2,r.fmt==1&&(r.tab=t.readUshorts(n,e,s)),r.fmt==2&&(r.tab=t.readUshorts(n,e,s*3)),r};_._lctf.coverageIndex=function(n,e){var t=n.tab;if(n.fmt==1)return t.indexOf(e);if(n.fmt==2){var r=_._lctf.getInterval(t,e);if(r!=-1)return t[r+2]+(e-t[r])}return-1};_._lctf.readFeatureList=function(n,e){var t=_._bin,r=e,s=[],i=t.readUshort(n,e);e+=2;for(var a=0;a<i;a++){var o=t.readASCII(n,e,4);e+=4;var c=t.readUshort(n,e);e+=2,s.push({tag:o.trim(),tab:_._lctf.readFeatureTable(n,r+c)})}return s};_._lctf.readFeatureTable=function(n,e){var t=_._bin;t.readUshort(n,e),e+=2;var r=t.readUshort(n,e);e+=2;for(var s=[],i=0;i<r;i++)s.push(t.readUshort(n,e+2*i));return s};_._lctf.readScriptList=function(n,e){var t=_._bin,r=e,s={},i=t.readUshort(n,e);e+=2;for(var a=0;a<i;a++){var o=t.readASCII(n,e,4);e+=4;var c=t.readUshort(n,e);e+=2,s[o.trim()]=_._lctf.readScriptTable(n,r+c)}return s};_._lctf.readScriptTable=function(n,e){var t=_._bin,r=e,s={},i=t.readUshort(n,e);e+=2,s.default=_._lctf.readLangSysTable(n,r+i);var a=t.readUshort(n,e);e+=2;for(var o=0;o<a;o++){var c=t.readASCII(n,e,4);e+=4;var u=t.readUshort(n,e);e+=2,s[c.trim()]=_._lctf.readLangSysTable(n,r+u)}return s};_._lctf.readLangSysTable=function(n,e){var t=_._bin,r={};t.readUshort(n,e),e+=2,r.reqFeature=t.readUshort(n,e),e+=2;var s=t.readUshort(n,e);return e+=2,r.features=t.readUshorts(n,e,s),r};_.CFF={};_.CFF.parse=function(n,e,t){var r=_._bin;n=new Uint8Array(n.buffer,e,t),e=0,n[e],e++,n[e],e++,n[e],e++,n[e],e++;var s=[];e=_.CFF.readIndex(n,e,s);for(var i=[],a=0;a<s.length-1;a++)i.push(r.readASCII(n,e+s[a],s[a+1]-s[a]));e+=s[s.length-1];var o=[];e=_.CFF.readIndex(n,e,o);for(var c=[],a=0;a<o.length-1;a++)c.push(_.CFF.readDict(n,e+o[a],e+o[a+1]));e+=o[o.length-1];var u=c[0],h=[];e=_.CFF.readIndex(n,e,h);for(var l=[],a=0;a<h.length-1;a++)l.push(r.readASCII(n,e+h[a],h[a+1]-h[a]));if(e+=h[h.length-1],_.CFF.readSubrs(n,e,u),u.CharStrings){e=u.CharStrings;var h=[];e=_.CFF.readIndex(n,e,h);for(var d=[],a=0;a<h.length-1;a++)d.push(r.readBytes(n,e+h[a],h[a+1]-h[a]));u.CharStrings=d}u.Encoding&&(u.Encoding=_.CFF.readEncoding(n,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=_.CFF.readCharset(n,u.charset,u.CharStrings.length)),u.Private&&(e=u.Private[1],u.Private=_.CFF.readDict(n,e,e+u.Private[0]),u.Private.Subrs&&_.CFF.readSubrs(n,e+u.Private.Subrs,u.Private));var f={};for(var p in u)["FamilyName","FullName","Notice","version","Copyright"].indexOf(p)!=-1?f[p]=l[u[p]-426+35]:f[p]=u[p];return f};_.CFF.readSubrs=function(n,e,t){var r=_._bin,s=[];e=_.CFF.readIndex(n,e,s);var i,a=s.length;a<1240?i=107:a<33900?i=1131:i=32768,t.Bias=i,t.Subrs=[];for(var o=0;o<s.length-1;o++)t.Subrs.push(r.readBytes(n,e+s[o],s[o+1]-s[o]))};_.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0];_.CFF.glyphByUnicode=function(n,e){for(var t=0;t<n.charset.length;t++)if(n.charset[t]==e)return t;return-1};_.CFF.glyphBySE=function(n,e){return e<0||e>255?-1:_.CFF.glyphByUnicode(n,_.CFF.tableSE[e])};_.CFF.readEncoding=function(n,e,t){_._bin;var r=[".notdef"],s=n[e];if(e++,s==0){var i=n[e];e++;for(var a=0;a<i;a++)r.push(n[e+a])}else throw"error: unknown encoding format: "+s;return r};_.CFF.readCharset=function(n,e,t){var r=_._bin,s=[".notdef"],i=n[e];if(e++,i==0)for(var a=0;a<t;a++){var o=r.readUshort(n,e);e+=2,s.push(o)}else if(i==1||i==2)for(;s.length<t;){var o=r.readUshort(n,e);e+=2;var c=0;i==1?(c=n[e],e++):(c=r.readUshort(n,e),e+=2);for(var a=0;a<=c;a++)s.push(o),o++}else throw"error: format: "+i;return s};_.CFF.readIndex=function(n,e,t){var r=_._bin,s=r.readUshort(n,e);e+=2;var i=n[e];if(e++,i==1)for(var a=0;a<s+1;a++)t.push(n[e+a]);else if(i==2)for(var a=0;a<s+1;a++)t.push(r.readUshort(n,e+a*2));else if(i==3)for(var a=0;a<s+1;a++)t.push(r.readUint(n,e+a*3-1)&16777215);else if(s!=0)throw"unsupported offset size: "+i+", count: "+s;return e+=(s+1)*i,e-1};_.CFF.getCharString=function(n,e,t){var r=_._bin,s=n[e],i=n[e+1];n[e+2],n[e+3],n[e+4];var a=1,o=null,c=null;s<=20&&(o=s,a=1),s==12&&(o=s*100+i,a=2),21<=s&&s<=27&&(o=s,a=1),s==28&&(c=r.readShort(n,e+1),a=3),29<=s&&s<=31&&(o=s,a=1),32<=s&&s<=246&&(c=s-139,a=1),247<=s&&s<=250&&(c=(s-247)*256+i+108,a=2),251<=s&&s<=254&&(c=-(s-251)*256-i-108,a=2),s==255&&(c=r.readInt(n,e+1)/65535,a=5),t.val=c??"o"+o,t.size=a};_.CFF.readCharString=function(n,e,t){for(var r=e+t,s=_._bin,i=[];e<r;){var a=n[e],o=n[e+1];n[e+2],n[e+3],n[e+4];var c=1,u=null,h=null;a<=20&&(u=a,c=1),a==12&&(u=a*100+o,c=2),(a==19||a==20)&&(u=a,c=2),21<=a&&a<=27&&(u=a,c=1),a==28&&(h=s.readShort(n,e+1),c=3),29<=a&&a<=31&&(u=a,c=1),32<=a&&a<=246&&(h=a-139,c=1),247<=a&&a<=250&&(h=(a-247)*256+o+108,c=2),251<=a&&a<=254&&(h=-(a-251)*256-o-108,c=2),a==255&&(h=s.readInt(n,e+1)/65535,c=5),i.push(h??"o"+u),e+=c}return i};_.CFF.readDict=function(n,e,t){for(var r=_._bin,s={},i=[];e<t;){var a=n[e],o=n[e+1];n[e+2],n[e+3],n[e+4];var c=1,u=null,h=null;if(a==28&&(h=r.readShort(n,e+1),c=3),a==29&&(h=r.readInt(n,e+1),c=5),32<=a&&a<=246&&(h=a-139,c=1),247<=a&&a<=250&&(h=(a-247)*256+o+108,c=2),251<=a&&a<=254&&(h=-(a-251)*256-o-108,c=2),a==255)throw h=r.readInt(n,e+1)/65535,c=5,"unknown number";if(a==30){var l=[];for(c=1;;){var d=n[e+c];c++;var f=d>>4,p=d&15;if(f!=15&&l.push(f),p!=15&&l.push(p),p==15)break}for(var m="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],v=0;v<l.length;v++)m+=g[l[v]];h=parseFloat(m)}if(a<=21){var y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"];if(u=y[a],c=1,a==12){var y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"];u=y[o],c=2}}u!=null?(s[u]=i.length==1?i[0]:i,i=[]):i.push(h),e+=c}return s};_.cmap={};_.cmap.parse=function(n,e,t){n=new Uint8Array(n.buffer,e,t),e=0;var r=_._bin,s={};r.readUshort(n,e),e+=2;var i=r.readUshort(n,e);e+=2;var a=[];s.tables=[];for(var o=0;o<i;o++){var c=r.readUshort(n,e);e+=2;var u=r.readUshort(n,e);e+=2;var h=r.readUint(n,e);e+=4;var l="p"+c+"e"+u,d=a.indexOf(h);if(d==-1){d=s.tables.length;var f;a.push(h);var p=r.readUshort(n,h);p==0?f=_.cmap.parse0(n,h):p==4?f=_.cmap.parse4(n,h):p==6?f=_.cmap.parse6(n,h):p==12?f=_.cmap.parse12(n,h):console.log("unknown format: "+p,c,u,h),s.tables.push(f)}if(s[l]!=null)throw"multiple tables for one platform+encoding";s[l]=d}return s};_.cmap.parse0=function(n,e){var t=_._bin,r={};r.format=t.readUshort(n,e),e+=2;var s=t.readUshort(n,e);e+=2,t.readUshort(n,e),e+=2,r.map=[];for(var i=0;i<s-6;i++)r.map.push(n[e+i]);return r};_.cmap.parse4=function(n,e){var t=_._bin,r=e,s={};s.format=t.readUshort(n,e),e+=2;var i=t.readUshort(n,e);e+=2,t.readUshort(n,e),e+=2;var a=t.readUshort(n,e);e+=2;var o=a/2;s.searchRange=t.readUshort(n,e),e+=2,s.entrySelector=t.readUshort(n,e),e+=2,s.rangeShift=t.readUshort(n,e),e+=2,s.endCount=t.readUshorts(n,e,o),e+=o*2,e+=2,s.startCount=t.readUshorts(n,e,o),e+=o*2,s.idDelta=[];for(var c=0;c<o;c++)s.idDelta.push(t.readShort(n,e)),e+=2;for(s.idRangeOffset=t.readUshorts(n,e,o),e+=o*2,s.glyphIdArray=[];e<r+i;)s.glyphIdArray.push(t.readUshort(n,e)),e+=2;return s};_.cmap.parse6=function(n,e){var t=_._bin,r={};r.format=t.readUshort(n,e),e+=2,t.readUshort(n,e),e+=2,t.readUshort(n,e),e+=2,r.firstCode=t.readUshort(n,e),e+=2;var s=t.readUshort(n,e);e+=2,r.glyphIdArray=[];for(var i=0;i<s;i++)r.glyphIdArray.push(t.readUshort(n,e)),e+=2;return r};_.cmap.parse12=function(n,e){var t=_._bin,r={};r.format=t.readUshort(n,e),e+=2,e+=2,t.readUint(n,e),e+=4,t.readUint(n,e),e+=4;var s=t.readUint(n,e);e+=4,r.groups=[];for(var i=0;i<s;i++){var a=e+i*12,o=t.readUint(n,a+0),c=t.readUint(n,a+4),u=t.readUint(n,a+8);r.groups.push([o,c,u])}return r};_.glyf={};_.glyf.parse=function(n,e,t,r){for(var s=[],i=0;i<r.maxp.numGlyphs;i++)s.push(null);return s};_.glyf._parseGlyf=function(n,e){var t=_._bin,r=n._data,s=_._tabOffset(r,"glyf")+n.loca[e];if(n.loca[e]==n.loca[e+1])return null;var i={};if(i.noc=t.readShort(r,s),s+=2,i.xMin=t.readShort(r,s),s+=2,i.yMin=t.readShort(r,s),s+=2,i.xMax=t.readShort(r,s),s+=2,i.yMax=t.readShort(r,s),s+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var a=0;a<i.noc;a++)i.endPts.push(t.readUshort(r,s)),s+=2;var o=t.readUshort(r,s);if(s+=2,r.length-s<o)return null;i.instructions=t.readBytes(r,s,o),s+=o;var c=i.endPts[i.noc-1]+1;i.flags=[];for(var a=0;a<c;a++){var u=r[s];if(s++,i.flags.push(u),u&8){var h=r[s];s++;for(var l=0;l<h;l++)i.flags.push(u),a++}}i.xs=[];for(var a=0;a<c;a++){var d=(i.flags[a]&2)!=0,f=(i.flags[a]&16)!=0;d?(i.xs.push(f?r[s]:-r[s]),s++):f?i.xs.push(0):(i.xs.push(t.readShort(r,s)),s+=2)}i.ys=[];for(var a=0;a<c;a++){var d=(i.flags[a]&4)!=0,f=(i.flags[a]&32)!=0;d?(i.ys.push(f?r[s]:-r[s]),s++):f?i.ys.push(0):(i.ys.push(t.readShort(r,s)),s+=2)}for(var p=0,m=0,a=0;a<c;a++)p+=i.xs[a],m+=i.ys[a],i.xs[a]=p,i.ys[a]=m}else{var g=1,v=1<<1,y=1<<3,S=1<<5,C=1<<6,b=1<<7,T=1<<8;i.parts=[];var x;do{x=t.readUshort(r,s),s+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(w),w.glyphIndex=t.readUshort(r,s),s+=2,x&g){var A=t.readShort(r,s);s+=2;var O=t.readShort(r,s);s+=2}else{var A=t.readInt8(r,s);s++;var O=t.readInt8(r,s);s++}x&v?(w.m.tx=A,w.m.ty=O):(w.p1=A,w.p2=O),x&y?(w.m.a=w.m.d=t.readF2dot14(r,s),s+=2):x&C?(w.m.a=t.readF2dot14(r,s),s+=2,w.m.d=t.readF2dot14(r,s),s+=2):x&b&&(w.m.a=t.readF2dot14(r,s),s+=2,w.m.b=t.readF2dot14(r,s),s+=2,w.m.c=t.readF2dot14(r,s),s+=2,w.m.d=t.readF2dot14(r,s),s+=2)}while(x&S);if(x&T){var I=t.readUshort(r,s);s+=2,i.instr=[];for(var a=0;a<I;a++)i.instr.push(r[s]),s++}}return i};_.GPOS={};_.GPOS.parse=function(n,e,t,r){return _._lctf.parse(n,e,t,r,_.GPOS.subt)};_.GPOS.subt=function(n,e,t){if(e!=2)return null;var r=_._bin,s=t,i={};i.format=r.readUshort(n,t),t+=2;var a=r.readUshort(n,t);t+=2,i.coverage=_._lctf.readCoverage(n,a+s),i.valFmt1=r.readUshort(n,t),t+=2,i.valFmt2=r.readUshort(n,t),t+=2;var o=_._lctf.numOfOnes(i.valFmt1),c=_._lctf.numOfOnes(i.valFmt2);if(i.format==1){i.pairsets=[];var u=r.readUshort(n,t);t+=2;for(var h=0;h<u;h++){var l=r.readUshort(n,t);t+=2,l+=s;var d=r.readUshort(n,l);l+=2;for(var f=[],p=0;p<d;p++){var m=r.readUshort(n,l);l+=2;var g,v;i.valFmt1!=0&&(g=_._lctf.readValueRecord(n,l,i.valFmt1),l+=o*2),i.valFmt2!=0&&(v=_._lctf.readValueRecord(n,l,i.valFmt2),l+=c*2),f.push({gid2:m,val1:g,val2:v})}i.pairsets.push(f)}}if(i.format==2){var y=r.readUshort(n,t);t+=2;var S=r.readUshort(n,t);t+=2;var C=r.readUshort(n,t);t+=2;var b=r.readUshort(n,t);t+=2,i.classDef1=_._lctf.readClassDef(n,s+y),i.classDef2=_._lctf.readClassDef(n,s+S),i.matrix=[];for(var h=0;h<C;h++){for(var T=[],p=0;p<b;p++){var g=null,v=null;i.valFmt1!=0&&(g=_._lctf.readValueRecord(n,t,i.valFmt1),t+=o*2),i.valFmt2!=0&&(v=_._lctf.readValueRecord(n,t,i.valFmt2),t+=c*2),T.push({val1:g,val2:v})}i.matrix.push(T)}}return i};_.GSUB={};_.GSUB.parse=function(n,e,t,r){return _._lctf.parse(n,e,t,r,_.GSUB.subt)};_.GSUB.subt=function(n,e,t){var r=_._bin,s=t,i={};if(e!=1&&e!=4&&e!=5)return null;i.fmt=r.readUshort(n,t),t+=2;var a=r.readUshort(n,t);if(t+=2,i.coverage=_._lctf.readCoverage(n,a+s),e==1){if(i.fmt==1)i.delta=r.readShort(n,t),t+=2;else if(i.fmt==2){var o=r.readUshort(n,t);t+=2,i.newg=r.readUshorts(n,t,o),t+=i.newg.length*2}}else if(e==4){i.vals=[];var o=r.readUshort(n,t);t+=2;for(var c=0;c<o;c++){var u=r.readUshort(n,t);t+=2,i.vals.push(_.GSUB.readLigatureSet(n,s+u))}}else if(e==5)if(i.fmt==2){var h=r.readUshort(n,t);t+=2,i.cDef=_._lctf.readClassDef(n,s+h),i.scset=[];var l=r.readUshort(n,t);t+=2;for(var c=0;c<l;c++){var d=r.readUshort(n,t);t+=2,i.scset.push(d==0?null:_.GSUB.readSubClassSet(n,s+d))}}else console.log("unknown table format",i.fmt);return i};_.GSUB.readSubClassSet=function(n,e){var t=_._bin.readUshort,r=e,s=[],i=t(n,e);e+=2;for(var a=0;a<i;a++){var o=t(n,e);e+=2,s.push(_.GSUB.readSubClassRule(n,r+o))}return s};_.GSUB.readSubClassRule=function(n,e){var t=_._bin.readUshort,r={},s=t(n,e);e+=2;var i=t(n,e);e+=2,r.input=[];for(var a=0;a<s-1;a++)r.input.push(t(n,e)),e+=2;return r.substLookupRecords=_.GSUB.readSubstLookupRecords(n,e,i),r};_.GSUB.readSubstLookupRecords=function(n,e,t){for(var r=_._bin.readUshort,s=[],i=0;i<t;i++)s.push(r(n,e),r(n,e+2)),e+=4;return s};_.GSUB.readChainSubClassSet=function(n,e){var t=_._bin,r=e,s=[],i=t.readUshort(n,e);e+=2;for(var a=0;a<i;a++){var o=t.readUshort(n,e);e+=2,s.push(_.GSUB.readChainSubClassRule(n,r+o))}return s};_.GSUB.readChainSubClassRule=function(n,e){for(var t=_._bin,r={},s=["backtrack","input","lookahead"],i=0;i<s.length;i++){var a=t.readUshort(n,e);e+=2,i==1&&a--,r[s[i]]=t.readUshorts(n,e,a),e+=r[s[i]].length*2}var a=t.readUshort(n,e);return e+=2,r.subst=t.readUshorts(n,e,a*2),e+=r.subst.length*2,r};_.GSUB.readLigatureSet=function(n,e){var t=_._bin,r=e,s=[],i=t.readUshort(n,e);e+=2;for(var a=0;a<i;a++){var o=t.readUshort(n,e);e+=2,s.push(_.GSUB.readLigature(n,r+o))}return s};_.GSUB.readLigature=function(n,e){var t=_._bin,r={chain:[]};r.nglyph=t.readUshort(n,e),e+=2;var s=t.readUshort(n,e);e+=2;for(var i=0;i<s-1;i++)r.chain.push(t.readUshort(n,e)),e+=2;return r};_.head={};_.head.parse=function(n,e,t){var r=_._bin,s={};return r.readFixed(n,e),e+=4,s.fontRevision=r.readFixed(n,e),e+=4,r.readUint(n,e),e+=4,r.readUint(n,e),e+=4,s.flags=r.readUshort(n,e),e+=2,s.unitsPerEm=r.readUshort(n,e),e+=2,s.created=r.readUint64(n,e),e+=8,s.modified=r.readUint64(n,e),e+=8,s.xMin=r.readShort(n,e),e+=2,s.yMin=r.readShort(n,e),e+=2,s.xMax=r.readShort(n,e),e+=2,s.yMax=r.readShort(n,e),e+=2,s.macStyle=r.readUshort(n,e),e+=2,s.lowestRecPPEM=r.readUshort(n,e),e+=2,s.fontDirectionHint=r.readShort(n,e),e+=2,s.indexToLocFormat=r.readShort(n,e),e+=2,s.glyphDataFormat=r.readShort(n,e),e+=2,s};_.hhea={};_.hhea.parse=function(n,e,t){var r=_._bin,s={};return r.readFixed(n,e),e+=4,s.ascender=r.readShort(n,e),e+=2,s.descender=r.readShort(n,e),e+=2,s.lineGap=r.readShort(n,e),e+=2,s.advanceWidthMax=r.readUshort(n,e),e+=2,s.minLeftSideBearing=r.readShort(n,e),e+=2,s.minRightSideBearing=r.readShort(n,e),e+=2,s.xMaxExtent=r.readShort(n,e),e+=2,s.caretSlopeRise=r.readShort(n,e),e+=2,s.caretSlopeRun=r.readShort(n,e),e+=2,s.caretOffset=r.readShort(n,e),e+=2,e+=4*2,s.metricDataFormat=r.readShort(n,e),e+=2,s.numberOfHMetrics=r.readUshort(n,e),e+=2,s};_.hmtx={};_.hmtx.parse=function(n,e,t,r){var s=_._bin,i={};i.aWidth=[],i.lsBearing=[];for(var a=0,o=0,c=0;c<r.maxp.numGlyphs;c++)c<r.hhea.numberOfHMetrics&&(a=s.readUshort(n,e),e+=2,o=s.readShort(n,e),e+=2),i.aWidth.push(a),i.lsBearing.push(o);return i};_.kern={};_.kern.parse=function(n,e,t,r){var s=_._bin,i=s.readUshort(n,e);if(e+=2,i==1)return _.kern.parseV1(n,e-2,t,r);var a=s.readUshort(n,e);e+=2;for(var o={glyph1:[],rval:[]},c=0;c<a;c++){e+=2;var t=s.readUshort(n,e);e+=2;var u=s.readUshort(n,e);e+=2;var h=u>>>8;if(h&=15,h==0)e=_.kern.readFormat0(n,e,o);else throw"unknown kern table format: "+h}return o};_.kern.parseV1=function(n,e,t,r){var s=_._bin;s.readFixed(n,e),e+=4;var i=s.readUint(n,e);e+=4;for(var a={glyph1:[],rval:[]},o=0;o<i;o++){s.readUint(n,e),e+=4;var c=s.readUshort(n,e);e+=2,s.readUshort(n,e),e+=2;var u=c>>>8;if(u&=15,u==0)e=_.kern.readFormat0(n,e,a);else throw"unknown kern table format: "+u}return a};_.kern.readFormat0=function(n,e,t){var r=_._bin,s=-1,i=r.readUshort(n,e);e+=2,r.readUshort(n,e),e+=2,r.readUshort(n,e),e+=2,r.readUshort(n,e),e+=2;for(var a=0;a<i;a++){var o=r.readUshort(n,e);e+=2;var c=r.readUshort(n,e);e+=2;var u=r.readShort(n,e);e+=2,o!=s&&(t.glyph1.push(o),t.rval.push({glyph2:[],vals:[]}));var h=t.rval[t.rval.length-1];h.glyph2.push(c),h.vals.push(u),s=o}return e};_.loca={};_.loca.parse=function(n,e,t,r){var s=_._bin,i=[],a=r.head.indexToLocFormat,o=r.maxp.numGlyphs+1;if(a==0)for(var c=0;c<o;c++)i.push(s.readUshort(n,e+(c<<1))<<1);if(a==1)for(var c=0;c<o;c++)i.push(s.readUint(n,e+(c<<2)));return i};_.maxp={};_.maxp.parse=function(n,e,t){var r=_._bin,s={},i=r.readUint(n,e);return e+=4,s.numGlyphs=r.readUshort(n,e),e+=2,i==65536&&(s.maxPoints=r.readUshort(n,e),e+=2,s.maxContours=r.readUshort(n,e),e+=2,s.maxCompositePoints=r.readUshort(n,e),e+=2,s.maxCompositeContours=r.readUshort(n,e),e+=2,s.maxZones=r.readUshort(n,e),e+=2,s.maxTwilightPoints=r.readUshort(n,e),e+=2,s.maxStorage=r.readUshort(n,e),e+=2,s.maxFunctionDefs=r.readUshort(n,e),e+=2,s.maxInstructionDefs=r.readUshort(n,e),e+=2,s.maxStackElements=r.readUshort(n,e),e+=2,s.maxSizeOfInstructions=r.readUshort(n,e),e+=2,s.maxComponentElements=r.readUshort(n,e),e+=2,s.maxComponentDepth=r.readUshort(n,e),e+=2),s};_.name={};_.name.parse=function(n,e,t){var r=_._bin,s={};r.readUshort(n,e),e+=2;var i=r.readUshort(n,e);e+=2,r.readUshort(n,e),e+=2;for(var a=e,o=0;o<i;o++){var c=r.readUshort(n,e);e+=2;var u=r.readUshort(n,e);e+=2;var h=r.readUshort(n,e);e+=2;var l=r.readUshort(n,e);e+=2;var t=r.readUshort(n,e);e+=2;var d=r.readUshort(n,e);e+=2;var f="p"+c;s[f]==null&&(s[f]={});var p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=p[l],g=a+i*12+d,v;if(c==0)v=r.readUnicode(n,g,t/2);else if(c==3&&u==0)v=r.readUnicode(n,g,t/2);else if(u==0)v=r.readASCII(n,g,t);else if(u==1)v=r.readUnicode(n,g,t/2);else if(u==3)v=r.readUnicode(n,g,t/2);else if(c==1)v=r.readASCII(n,g,t),console.log("reading unknown MAC encoding "+u+" as ASCII");else throw"unknown encoding "+u+", platformID: "+c;s[f][m]=v,s[f]._lang=h}for(var y in s)if(s[y].postScriptName!=null&&s[y]._lang==1033)return s[y];for(var y in s)if(s[y].postScriptName!=null&&s[y]._lang==3084)return s[y];for(var y in s)if(s[y].postScriptName!=null)return s[y];var S;for(var y in s){S=y;break}return console.log("returning name table with languageID "+s[S]._lang),s[S]};_["OS/2"]={};_["OS/2"].parse=function(n,e,t){var r=_._bin,s=r.readUshort(n,e);e+=2;var i={};if(s==0)_["OS/2"].version0(n,e,i);else if(s==1)_["OS/2"].version1(n,e,i);else if(s==2||s==3||s==4)_["OS/2"].version2(n,e,i);else if(s==5)_["OS/2"].version5(n,e,i);else throw"unknown OS/2 table version: "+s;return i};_["OS/2"].version0=function(n,e,t){var r=_._bin;return t.xAvgCharWidth=r.readShort(n,e),e+=2,t.usWeightClass=r.readUshort(n,e),e+=2,t.usWidthClass=r.readUshort(n,e),e+=2,t.fsType=r.readUshort(n,e),e+=2,t.ySubscriptXSize=r.readShort(n,e),e+=2,t.ySubscriptYSize=r.readShort(n,e),e+=2,t.ySubscriptXOffset=r.readShort(n,e),e+=2,t.ySubscriptYOffset=r.readShort(n,e),e+=2,t.ySuperscriptXSize=r.readShort(n,e),e+=2,t.ySuperscriptYSize=r.readShort(n,e),e+=2,t.ySuperscriptXOffset=r.readShort(n,e),e+=2,t.ySuperscriptYOffset=r.readShort(n,e),e+=2,t.yStrikeoutSize=r.readShort(n,e),e+=2,t.yStrikeoutPosition=r.readShort(n,e),e+=2,t.sFamilyClass=r.readShort(n,e),e+=2,t.panose=r.readBytes(n,e,10),e+=10,t.ulUnicodeRange1=r.readUint(n,e),e+=4,t.ulUnicodeRange2=r.readUint(n,e),e+=4,t.ulUnicodeRange3=r.readUint(n,e),e+=4,t.ulUnicodeRange4=r.readUint(n,e),e+=4,t.achVendID=[r.readInt8(n,e),r.readInt8(n,e+1),r.readInt8(n,e+2),r.readInt8(n,e+3)],e+=4,t.fsSelection=r.readUshort(n,e),e+=2,t.usFirstCharIndex=r.readUshort(n,e),e+=2,t.usLastCharIndex=r.readUshort(n,e),e+=2,t.sTypoAscender=r.readShort(n,e),e+=2,t.sTypoDescender=r.readShort(n,e),e+=2,t.sTypoLineGap=r.readShort(n,e),e+=2,t.usWinAscent=r.readUshort(n,e),e+=2,t.usWinDescent=r.readUshort(n,e),e+=2,e};_["OS/2"].version1=function(n,e,t){var r=_._bin;return e=_["OS/2"].version0(n,e,t),t.ulCodePageRange1=r.readUint(n,e),e+=4,t.ulCodePageRange2=r.readUint(n,e),e+=4,e};_["OS/2"].version2=function(n,e,t){var r=_._bin;return e=_["OS/2"].version1(n,e,t),t.sxHeight=r.readShort(n,e),e+=2,t.sCapHeight=r.readShort(n,e),e+=2,t.usDefault=r.readUshort(n,e),e+=2,t.usBreak=r.readUshort(n,e),e+=2,t.usMaxContext=r.readUshort(n,e),e+=2,e};_["OS/2"].version5=function(n,e,t){var r=_._bin;return e=_["OS/2"].version2(n,e,t),t.usLowerOpticalPointSize=r.readUshort(n,e),e+=2,t.usUpperOpticalPointSize=r.readUshort(n,e),e+=2,e};_.post={};_.post.parse=function(n,e,t){var r=_._bin,s={};return s.version=r.readFixed(n,e),e+=4,s.italicAngle=r.readFixed(n,e),e+=4,s.underlinePosition=r.readShort(n,e),e+=2,s.underlineThickness=r.readShort(n,e),e+=2,s};_.SVG={};_.SVG.parse=function(n,e,t){var r=_._bin,s={entries:[]},i=e;r.readUshort(n,e),e+=2;var a=r.readUint(n,e);e+=4,r.readUint(n,e),e+=4,e=a+i;var o=r.readUshort(n,e);e+=2;for(var c=0;c<o;c++){var u=r.readUshort(n,e);e+=2;var h=r.readUshort(n,e);e+=2;var l=r.readUint(n,e);e+=4;var d=r.readUint(n,e);e+=4;for(var f=new Uint8Array(n.buffer,i+l+a,d),p=r.readUTF8(f,0,f.length),m=u;m<=h;m++)s.entries[m]=p}return s};_.SVG.toPath=function(n){var e={cmds:[],crds:[]};if(n==null)return e;for(var t=new DOMParser,r=t.parseFromString(n,"image/svg+xml"),s=r.firstChild;s.tagName!="svg";)s=s.nextSibling;var i=s.getAttribute("viewBox");i?i=i.trim().split(" ").map(parseFloat):i=[0,0,1e3,1e3],_.SVG._toPath(s.children,e);for(var a=0;a<e.crds.length;a+=2){var o=e.crds[a],c=e.crds[a+1];o-=i[0],c-=i[1],c=-c,e.crds[a]=o,e.crds[a+1]=c}return e};_.SVG._toPath=function(n,e,t){for(var r=0;r<n.length;r++){var s=n[r],i=s.tagName,a=s.getAttribute("fill");if(a==null&&(a=t),i=="g")_.SVG._toPath(s.children,e,a);else if(i=="path"){e.cmds.push(a||"#000000");var o=s.getAttribute("d"),c=_.SVG._tokens(o);_.SVG._toksToPath(c,e),e.cmds.push("X")}else i=="defs"||console.log(i,s)}};_.SVG._tokens=function(n){for(var e=[],t=0,r=!1,s="";t<n.length;){var i=n.charCodeAt(t),a=n.charAt(t);t++;var o=48<=i&&i<=57||a=="."||a=="-";r?a=="-"?(e.push(parseFloat(s)),s=a):o?s+=a:(e.push(parseFloat(s)),a!=","&&a!=" "&&e.push(a),r=!1):o?(s=a,r=!0):a!=","&&a!=" "&&e.push(a)}return r&&e.push(parseFloat(s)),e};_.SVG._toksToPath=function(n,e){for(var t=0,r=0,s=0,i=0,a=0,o={M:2,L:2,H:1,V:1,S:4,C:6},c=e.cmds,u=e.crds;t<n.length;){var h=n[t];if(t++,h=="z")c.push("Z"),r=i,s=a;else for(var l=h.toUpperCase(),d=o[l],f=_.SVG._reps(n,t,d),p=0;p<f;p++){var m=0,g=0;if(h!=l&&(m=r,g=s),l=="M")r=m+n[t++],s=g+n[t++],c.push("M"),u.push(r,s),i=r,a=s;else if(l=="L")r=m+n[t++],s=g+n[t++],c.push("L"),u.push(r,s);else if(l=="H")r=m+n[t++],c.push("L"),u.push(r,s);else if(l=="V")s=g+n[t++],c.push("L"),u.push(r,s);else if(l=="C"){var v=m+n[t++],y=g+n[t++],S=m+n[t++],C=g+n[t++],b=m+n[t++],T=g+n[t++];c.push("C"),u.push(v,y,S,C,b,T),r=b,s=T}else if(l=="S"){var x=Math.max(u.length-4,0),v=r+r-u[x],y=s+s-u[x+1],S=m+n[t++],C=g+n[t++],b=m+n[t++],T=g+n[t++];c.push("C"),u.push(v,y,S,C,b,T),r=b,s=T}else console.log("Unknown SVG command "+h)}}};_.SVG._reps=function(n,e,t){for(var r=e;r<n.length&&typeof n[r]!="string";)r+=t;return(r-e)/t};_==null&&(_={});_.U==null&&(_.U={});_.U.codeToGlyph=function(n,e){var t=n.cmap,r=-1;if(t.p0e4!=null?r=t.p0e4:t.p3e1!=null?r=t.p3e1:t.p1e0!=null&&(r=t.p1e0),r==-1)throw"no familiar platform and encoding!";var s=t.tables[r];if(s.format==0)return e>=s.map.length?0:s.map[e];if(s.format==4){for(var i=-1,a=0;a<s.endCount.length;a++)if(e<=s.endCount[a]){i=a;break}if(i==-1||s.startCount[i]>e)return 0;var o=0;return s.idRangeOffset[i]!=0?o=s.glyphIdArray[e-s.startCount[i]+(s.idRangeOffset[i]>>1)-(s.idRangeOffset.length-i)]:o=e+s.idDelta[i],o&65535}else if(s.format==12){if(e>s.groups[s.groups.length-1][1])return 0;for(var a=0;a<s.groups.length;a++){var c=s.groups[a];if(c[0]<=e&&e<=c[1])return c[2]+(e-c[0])}return 0}else throw"unknown cmap table format "+s.format};_.U.glyphToPath=function(n,e){var t={cmds:[],crds:[]};if(n.SVG&&n.SVG.entries[e]){var r=n.SVG.entries[e];return r==null?t:(typeof r=="string"&&(r=_.SVG.toPath(r),n.SVG.entries[e]=r),r)}else if(n.CFF){var s={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:n.CFF.Private?n.CFF.Private.defaultWidthX:0,open:!1};_.U._drawCFF(n.CFF.CharStrings[e],s,n.CFF,t)}else n.glyf&&_.U._drawGlyf(e,n,t);return t};_.U._drawGlyf=function(n,e,t){var r=e.glyf[n];r==null&&(r=e.glyf[n]=_.glyf._parseGlyf(e,n)),r!=null&&(r.noc>-1?_.U._simpleGlyph(r,t):_.U._compoGlyph(r,e,t))};_.U._simpleGlyph=function(n,e){for(var t=0;t<n.noc;t++){for(var r=t==0?0:n.endPts[t-1]+1,s=n.endPts[t],i=r;i<=s;i++){var a=i==r?s:i-1,o=i==s?r:i+1,c=n.flags[i]&1,u=n.flags[a]&1,h=n.flags[o]&1,l=n.xs[i],d=n.ys[i];if(i==r)if(c)if(u)_.U.P.moveTo(e,n.xs[a],n.ys[a]);else{_.U.P.moveTo(e,l,d);continue}else u?_.U.P.moveTo(e,n.xs[a],n.ys[a]):_.U.P.moveTo(e,(n.xs[a]+l)/2,(n.ys[a]+d)/2);c?u&&_.U.P.lineTo(e,l,d):h?_.U.P.qcurveTo(e,l,d,n.xs[o],n.ys[o]):_.U.P.qcurveTo(e,l,d,(l+n.xs[o])/2,(d+n.ys[o])/2)}_.U.P.closePath(e)}};_.U._compoGlyph=function(n,e,t){for(var r=0;r<n.parts.length;r++){var s={cmds:[],crds:[]},i=n.parts[r];_.U._drawGlyf(i.glyphIndex,e,s);for(var a=i.m,o=0;o<s.crds.length;o+=2){var c=s.crds[o],u=s.crds[o+1];t.crds.push(c*a.a+u*a.b+a.tx),t.crds.push(c*a.c+u*a.d+a.ty)}for(var o=0;o<s.cmds.length;o++)t.cmds.push(s.cmds[o])}};_.U._getGlyphClass=function(n,e){var t=_._lctf.getInterval(e,n);return t==-1?0:e[t+2]};_.U.getPairAdjustment=function(n,e,t){if(n.GPOS){for(var r=null,s=0;s<n.GPOS.featureList.length;s++){var i=n.GPOS.featureList[s];if(i.tag=="kern")for(var a=0;a<i.tab.length;a++)n.GPOS.lookupList[i.tab[a]].ltype==2&&(r=n.GPOS.lookupList[i.tab[a]])}if(r)for(var s=0;s<r.tabs.length;s++){var o=r.tabs[s],c=_._lctf.coverageIndex(o.coverage,e);if(c!=-1){var u;if(o.format==1){for(var h=o.pairsets[c],a=0;a<h.length;a++)h[a].gid2==t&&(u=h[a]);if(u==null)continue}else if(o.format==2)var l=_.U._getGlyphClass(e,o.classDef1),d=_.U._getGlyphClass(t,o.classDef2),u=o.matrix[l][d];return u.val1[2]}}}if(n.kern){var f=n.kern.glyph1.indexOf(e);if(f!=-1){var p=n.kern.rval[f].glyph2.indexOf(t);if(p!=-1)return n.kern.rval[f].vals[p]}}return 0};_.U.stringToGlyphs=function(n,e){for(var t=[],r=0;r<e.length;r++){var s=e.codePointAt(r);s>65535&&r++,t.push(_.U.codeToGlyph(n,s))}var i=n.GSUB;if(i==null)return t;for(var a=i.lookupList,o=i.featureList,c=`
	" ,.:;!?()  `,u="",h="",l=0;l<t.length;l++){var d=t[l],f=l==0||c.indexOf(e[l-1])!=-1,p=l==t.length-1||c.indexOf(e[l+1])!=-1;!f&&u.indexOf(e[l-1])!=-1&&(f=!0),!p&&u.indexOf(e[l])!=-1&&(p=!0),!p&&h.indexOf(e[l+1])!=-1&&(p=!0),!f&&h.indexOf(e[l])!=-1&&(f=!0);var m=null;f?m=p?"isol":"init":m=p?"fina":"medi";for(var g=0;g<o.length;g++)if(o[g].tag==m)for(var v=0;v<o[g].tab.length;v++){var y=a[o[g].tab[v]];y.ltype==1&&_.U._applyType1(t,l,y)}}for(var S=["rlig","liga","mset"],l=0;l<t.length;l++)for(var d=t[l],C=Math.min(3,t.length-l-1),g=0;g<o.length;g++){var b=o[g];if(S.indexOf(b.tag)!=-1){for(var v=0;v<b.tab.length;v++)for(var y=a[b.tab[v]],T=0;T<y.tabs.length;T++)if(y.tabs[T]!=null){var x=_._lctf.coverageIndex(y.tabs[T].coverage,d);if(x!=-1){if(y.ltype==4)for(var w=y.tabs[T].vals[x],A=0;A<w.length;A++){var O=w[A],I=O.chain.length;if(!(I>C)){for(var k=!0,D=0;D<I;D++)O.chain[D]!=t[l+(1+D)]&&(k=!1);if(k){t[l]=O.nglyph;for(var D=0;D<I;D++)t[l+D+1]=-1}}}else if(y.ltype==5){var P=y.tabs[T];if(P.fmt!=2)continue;for(var U=_._lctf.getInterval(P.cDef,d),R=P.cDef[U+2],$=P.scset[R],r=0;r<$.length;r++){var G=$[r],V=G.input;if(!(V.length>C)){for(var k=!0,D=0;D<V.length;D++){var E=_._lctf.getInterval(P.cDef,t[l+1+D]);if(U==-1&&P.cDef[E+2]!=V[D]){k=!1;break}}if(k)for(var N=G.substLookupRecords,A=0;A<N.length;A+=2)N[A],N[A+1]}}}}}}}return t};_.U._applyType1=function(n,e,t){for(var r=n[e],s=0;s<t.tabs.length;s++){var i=t.tabs[s],a=_._lctf.coverageIndex(i.coverage,r);a!=-1&&(i.fmt==1?n[e]=n[e]+i.delta:n[e]=i.newg[a])}};_.U.glyphsToPath=function(n,e,t){for(var r={cmds:[],crds:[]},s=0,i=0;i<e.length;i++){var a=e[i];if(a!=-1){for(var o=i<e.length-1&&e[i+1]!=-1?e[i+1]:0,c=_.U.glyphToPath(n,a),u=0;u<c.crds.length;u+=2)r.crds.push(c.crds[u]+s),r.crds.push(c.crds[u+1]);t&&r.cmds.push(t);for(var u=0;u<c.cmds.length;u++)r.cmds.push(c.cmds[u]);t&&r.cmds.push("X"),s+=n.hmtx.aWidth[a],i<e.length-1&&(s+=_.U.getPairAdjustment(n,a,o))}}return r};_.U.pathToSVG=function(n,e){e==null&&(e=5);for(var t=[],r=0,s={M:2,L:2,Q:4,C:6},i=0;i<n.cmds.length;i++){var a=n.cmds[i],o=r+(s[a]?s[a]:0);for(t.push(a);r<o;){var c=n.crds[r++];t.push(parseFloat(c.toFixed(e))+(r==o?"":" "))}}return t.join("")};_.U.pathToContext=function(n,e){for(var t=0,r=n.crds,s=0;s<n.cmds.length;s++){var i=n.cmds[s];i=="M"?(e.moveTo(r[t],r[t+1]),t+=2):i=="L"?(e.lineTo(r[t],r[t+1]),t+=2):i=="C"?(e.bezierCurveTo(r[t],r[t+1],r[t+2],r[t+3],r[t+4],r[t+5]),t+=6):i=="Q"?(e.quadraticCurveTo(r[t],r[t+1],r[t+2],r[t+3]),t+=4):i.charAt(0)=="#"?(e.beginPath(),e.fillStyle=i):i=="Z"?e.closePath():i=="X"&&e.fill()}};_.U.P={};_.U.P.moveTo=function(n,e,t){n.cmds.push("M"),n.crds.push(e,t)};_.U.P.lineTo=function(n,e,t){n.cmds.push("L"),n.crds.push(e,t)};_.U.P.curveTo=function(n,e,t,r,s,i,a){n.cmds.push("C"),n.crds.push(e,t,r,s,i,a)};_.U.P.qcurveTo=function(n,e,t,r,s){n.cmds.push("Q"),n.crds.push(e,t,r,s)};_.U.P.closePath=function(n){n.cmds.push("Z")};_.U._drawCFF=function(n,e,t,r){for(var s=e.stack,i=e.nStems,a=e.haveWidth,o=e.width,c=e.open,u=0,h=e.x,l=e.y,d=0,f=0,p=0,m=0,g=0,v=0,y=0,S=0,C=0,b=0,T={val:0,size:0};u<n.length;){_.CFF.getCharString(n,u,T);var x=T.val;if(u+=T.size,x=="o1"||x=="o18"){var w;w=s.length%2!==0,w&&!a&&(o=s.shift()+t.Private.nominalWidthX),i+=s.length>>1,s.length=0,a=!0}else if(x=="o3"||x=="o23"){var w;w=s.length%2!==0,w&&!a&&(o=s.shift()+t.Private.nominalWidthX),i+=s.length>>1,s.length=0,a=!0}else if(x=="o4")s.length>1&&!a&&(o=s.shift()+t.Private.nominalWidthX,a=!0),c&&_.U.P.closePath(r),l+=s.pop(),_.U.P.moveTo(r,h,l),c=!0;else if(x=="o5")for(;s.length>0;)h+=s.shift(),l+=s.shift(),_.U.P.lineTo(r,h,l);else if(x=="o6"||x=="o7")for(var A=s.length,O=x=="o6",I=0;I<A;I++){var k=s.shift();O?h+=k:l+=k,O=!O,_.U.P.lineTo(r,h,l)}else if(x=="o8"||x=="o24"){for(var A=s.length,D=0;D+6<=A;)d=h+s.shift(),f=l+s.shift(),p=d+s.shift(),m=f+s.shift(),h=p+s.shift(),l=m+s.shift(),_.U.P.curveTo(r,d,f,p,m,h,l),D+=6;x=="o24"&&(h+=s.shift(),l+=s.shift(),_.U.P.lineTo(r,h,l))}else{if(x=="o11")break;if(x=="o1234"||x=="o1235"||x=="o1236"||x=="o1237")x=="o1234"&&(d=h+s.shift(),f=l,p=d+s.shift(),m=f+s.shift(),C=p+s.shift(),b=m,g=C+s.shift(),v=m,y=g+s.shift(),S=l,h=y+s.shift(),_.U.P.curveTo(r,d,f,p,m,C,b),_.U.P.curveTo(r,g,v,y,S,h,l)),x=="o1235"&&(d=h+s.shift(),f=l+s.shift(),p=d+s.shift(),m=f+s.shift(),C=p+s.shift(),b=m+s.shift(),g=C+s.shift(),v=b+s.shift(),y=g+s.shift(),S=v+s.shift(),h=y+s.shift(),l=S+s.shift(),s.shift(),_.U.P.curveTo(r,d,f,p,m,C,b),_.U.P.curveTo(r,g,v,y,S,h,l)),x=="o1236"&&(d=h+s.shift(),f=l+s.shift(),p=d+s.shift(),m=f+s.shift(),C=p+s.shift(),b=m,g=C+s.shift(),v=m,y=g+s.shift(),S=v+s.shift(),h=y+s.shift(),_.U.P.curveTo(r,d,f,p,m,C,b),_.U.P.curveTo(r,g,v,y,S,h,l)),x=="o1237"&&(d=h+s.shift(),f=l+s.shift(),p=d+s.shift(),m=f+s.shift(),C=p+s.shift(),b=m+s.shift(),g=C+s.shift(),v=b+s.shift(),y=g+s.shift(),S=v+s.shift(),Math.abs(y-h)>Math.abs(S-l)?h=y+s.shift():l=S+s.shift(),_.U.P.curveTo(r,d,f,p,m,C,b),_.U.P.curveTo(r,g,v,y,S,h,l));else if(x=="o14"){if(s.length>0&&!a&&(o=s.shift()+t.nominalWidthX,a=!0),s.length==4){var P=s.shift(),U=s.shift(),R=s.shift(),$=s.shift(),G=_.CFF.glyphBySE(t,R),V=_.CFF.glyphBySE(t,$);_.U._drawCFF(t.CharStrings[G],e,t,r),e.x=P,e.y=U,_.U._drawCFF(t.CharStrings[V],e,t,r)}c&&(_.U.P.closePath(r),c=!1)}else if(x=="o19"||x=="o20"){var w;w=s.length%2!==0,w&&!a&&(o=s.shift()+t.Private.nominalWidthX),i+=s.length>>1,s.length=0,a=!0,u+=i+7>>3}else if(x=="o21")s.length>2&&!a&&(o=s.shift()+t.Private.nominalWidthX,a=!0),l+=s.pop(),h+=s.pop(),c&&_.U.P.closePath(r),_.U.P.moveTo(r,h,l),c=!0;else if(x=="o22")s.length>1&&!a&&(o=s.shift()+t.Private.nominalWidthX,a=!0),h+=s.pop(),c&&_.U.P.closePath(r),_.U.P.moveTo(r,h,l),c=!0;else if(x=="o25"){for(;s.length>6;)h+=s.shift(),l+=s.shift(),_.U.P.lineTo(r,h,l);d=h+s.shift(),f=l+s.shift(),p=d+s.shift(),m=f+s.shift(),h=p+s.shift(),l=m+s.shift(),_.U.P.curveTo(r,d,f,p,m,h,l)}else if(x=="o26")for(s.length%2&&(h+=s.shift());s.length>0;)d=h,f=l+s.shift(),p=d+s.shift(),m=f+s.shift(),h=p,l=m+s.shift(),_.U.P.curveTo(r,d,f,p,m,h,l);else if(x=="o27")for(s.length%2&&(l+=s.shift());s.length>0;)d=h+s.shift(),f=l,p=d+s.shift(),m=f+s.shift(),h=p+s.shift(),l=m,_.U.P.curveTo(r,d,f,p,m,h,l);else if(x=="o10"||x=="o29"){var E=x=="o10"?t.Private:t;if(s.length==0)console.log("error: empty stack");else{var N=s.pop(),q=E.Subrs[N+E.Bias];e.x=h,e.y=l,e.nStems=i,e.haveWidth=a,e.width=o,e.open=c,_.U._drawCFF(q,e,t,r),h=e.x,l=e.y,i=e.nStems,a=e.haveWidth,o=e.width,c=e.open}}else if(x=="o30"||x=="o31"){var A,Y=s.length,D=0,K=x=="o31";for(A=Y&-3,D+=Y-A;D<A;)K?(d=h+s.shift(),f=l,p=d+s.shift(),m=f+s.shift(),l=m+s.shift(),A-D==5?(h=p+s.shift(),D++):h=p,K=!1):(d=h,f=l+s.shift(),p=d+s.shift(),m=f+s.shift(),h=p+s.shift(),A-D==5?(l=m+s.shift(),D++):l=m,K=!0),_.U.P.curveTo(r,d,f,p,m,h,l),D+=4}else{if((x+"").charAt(0)=="o")throw console.log("Unknown operation: "+x,n),x;s.push(x)}}}e.x=h,e.y=l,e.nStems=i,e.haveWidth=a,e.width=o,e.open=c};var Qt=_,ni=/\r?\n/;function el(n){var e=function(r){var s=this;r=n.extend({src:""},r),this.src=r.src,this.font=null,this._hasLoaded=!1,this._loadCallbacks=[],n.FontList.push(this),this._fetchFontResource(this.src).then(function(i){var a=Qt.parse(i);if(!a.head||!a.hmtx||!a.hhea||!a.glyf){var o=["head","hmtx","hhea","glyf"].filter(function(c){return!a[c]});throw new Error("Typr.js could not parse this font (unable to find "+o.join(", ")+")")}return a}).then(function(i){s.font=i,s._hasLoaded=!0,s._loadCallbacks.forEach(function(a){return a()})}).catch(function(i){throw new Error("Unable to load font from "+s.src+`:
`+i)})};return e.prototype.waitForLoad=function(){var r=this;return new Promise(function(s,i){r._hasLoaded&&r._hasLoaded?s():r._loadCallbacks.push(s)})},e.prototype.getFontScale=function(r){return this._hasLoaded?1/this.font.head.unitsPerEm*r:null},e.prototype.measureText=function(r,s){var i=this;if(s===void 0&&(s=64),!this._hasLoaded)return null;var a=Array.isArray(r)?r:r.split(ni),o=this.font,c=o.hmtx.aWidth,u=this.getFontScale(s),h=o.hhea.descender,l=o.hhea.ascender;o.hhea.lineGap;var d=a.map(function(g){var v=Qt.U.stringToGlyphs(i.font,g);return v.reduce(function(y,S){return S>-1&&S<c.length&&(y+=c[S]),y},0)}),f=Math.max.apply(Math,d),p=0-h+l,m=p*a.length;return{width:f*u,height:m*u,lineHeight:p*u,lineWidths:d.map(function(g){return g*u}),descender:h*u,ascender:l*u}},e.prototype.getTextPath=function(r,s,i,a,o,c,u){var h=this;if(s===void 0&&(s=64),i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),c===void 0&&(c="left"),u===void 0&&(u="bottom"),!this._hasLoaded)return[];var l=Array.isArray(r)?r:r.split(ni),d=this.measureText(r,s),f=d.lineWidths,p=d.lineHeight;return l.map(function(m,g){var v=h.getTextOrigin(Object.assign({},d,{width:f[g]}),i,a,o,c,u),y=v[0],S=v[1];v[2],a+=p;var C=Qt.U.stringToGlyphs(h.font,m),b=Qt.U.glyphsToPath(h.font,C);return h._convertPathCommands(b,s,y,S,o)}).flat()},e.prototype.getTextGlyphs=function(r,s,i,a,o,c,u){var h=this;if(s===void 0&&(s=64),i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),c===void 0&&(c="left"),u===void 0&&(u="bottom"),!this._hasLoaded)return[];var l=this.measureText(r,s),d=this.font.hmtx.aWidth,f=this.getFontScale(s),p=l.lineWidths,m=l.lineHeight,g=Array.isArray(r)?r:r.split(ni);return g.map(function(v,y){var S=Qt.U.stringToGlyphs(h.font,v),C=h.getTextOrigin(Object.assign({},l,{width:p[y]}),i,a,o,c,u),b=C[0],T=C[1],x=C[2];return a+=m,S.filter(function(w){return w!==-1}).map(function(w){var A=Qt.U.glyphToPath(h.font,w),O={translate:{x:b,y:T,z:x},path:h._convertPathCommands(A,s,0,0,0)};return b+=d[w]*f,O})}).flat()},e.prototype.getTextOrigin=function(r,s,i,a,o,c){s===void 0&&(s=0),i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o="left"),c===void 0&&(c="bottom");var u=r.width,h=r.height,l=r.lineHeight;switch(o){case"right":s-=u;break;case"center":s-=u/2;break}switch(c){case"middle":i-=h/2-l;break;case"bottom":default:i-=h-l;break}return[s,i,a]},e.prototype._convertPathCommands=function(r,s,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0);var c=-1,u=1,h=this.getFontScale(s),l=r.cmds,d=r.crds.map(function(m){return m*h}),f=null,p=0;return l.map(function(m){var g=null;switch(f||(f={x:i+d[p]*u,y:a+d[p+1]*c,z:o}),m){case"M":return g={move:{x:i+d[p]*u,y:a+d[p+1]*c,z:o}},p+=2,g;case"L":return g={line:{x:i+d[p]*u,y:a+d[p+1]*c,z:o}},p+=2,g;case"C":return g={bezier:[{x:i+d[p]*u,y:a+d[p+1]*c,z:o},{x:i+d[p+2]*u,y:a+d[p+3]*c,z:o},{x:i+d[p+4]*u,y:a+d[p+5]*c,z:o}]},p+=6,g;case"Q":return g={arc:[{x:i+d[p]*u,y:a+d[p+1]*c,z:o},{x:i+d[p+2]*u,y:a+d[p+3]*c,z:o}]},p+=4,g;case"Z":return f&&(g={line:f},f=null),g;default:return g}}).filter(function(m){return m!==null})},e.prototype._fetchFontResource=function(r){return new Promise(function(s,i){var a=new XMLHttpRequest;a.responseType="arraybuffer",a.open("GET",r,!0),a.onreadystatechange=function(o){a.readyState===4&&(a.status>=200&&a.status<300?s(a.response):i("HTTP error "+a.status+": "+a.statusText))},a.send(null)})},n.Font=e,n}function tl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)===-1&&(t[r]=n[r]);return t}function nl(n){var e=function(t){function r(i){i=n.extend({font:null,value:"",fontSize:64,textAlign:"left",textBaseline:"bottom"},i);var a=i.font,o=i.value,c=i.fontSize,u=i.textAlign,h=i.textBaseline,l=tl(i,["font","value","fontSize","textAlign","textBaseline"]),d=l;t.call(this,Object.assign({},d,{closed:!0,visible:!1,path:[{}]})),this._font=null,this._value=o,this._fontSize=c,this._textAlign=u,this._textBaseline=h,this.font=a}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var s={font:{configurable:!0},value:{configurable:!0},fontSize:{configurable:!0},textAlign:{configurable:!0},textBaseline:{configurable:!0}};return r.prototype.updateText=function(){var a=this.font.getTextPath(this.value,this.fontSize,0,0,0,this.textAlign,this.textBaseline);a.length==0?(this.path=[{}],this.visible=!1):(this.path=a,this.visible=!0),this.updatePath()},s.font.set=function(i){var a=this;this._font=i,this.font.waitForLoad().then(function(){a.updateText(),a.visible=!0;for(var o=a.addTo;o.addTo!==void 0;)o=o.addTo;o&&typeof o.updateRenderGraph=="function"&&o.updateRenderGraph()})},s.font.get=function(){return this._font},s.value.set=function(i){this._value=i,this.updateText()},s.value.get=function(){return this._value},s.fontSize.set=function(i){this._fontSize=i,this.updateText()},s.fontSize.get=function(){return this._fontSize},s.textAlign.set=function(i){this._textAlign=i,this.updateText()},s.textAlign.get=function(){return this._textAlign},s.textBaseline.set=function(i){this._textBaseline=i,this.updateText()},s.textBaseline.get=function(){return this._textBaseline},Object.defineProperties(r.prototype,s),r}(n.Shape);return e.optionKeys=e.optionKeys.concat(["font","fontSize","value","textAlign","textBaseline"]),n.Text=e,n}function rl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)===-1&&(t[r]=n[r]);return t}function sl(n){var e=function(t){function r(i){i=n.extend({font:null,value:"",fontSize:64,textAlign:"left",textBaseline:"bottom",color:"#333",fill:!1,stroke:1},i);var a=i.font,o=i.value,c=i.fontSize,u=i.textAlign,h=i.textBaseline,l=i.color,d=i.fill,f=i.stroke,p=rl(i,["font","value","fontSize","textAlign","textBaseline","color","fill","stroke"]),m=p;t.call(this,Object.assign({},m,{visible:!1})),this._font=null,this._value=o,this._fontSize=c,this._textAlign=u,this._textBaseline=h,this._color=l,this._fill=d,this._stroke=f,this.font=a}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var s={font:{configurable:!0},value:{configurable:!0},fontSize:{configurable:!0},textAlign:{configurable:!0},textBaseline:{configurable:!0},color:{configurable:!0},fill:{configurable:!0},stroke:{configurable:!0}};return r.prototype.updateText=function(){for(var a=this;this.children.length>0;)this.removeChild(this.children[0]);var o=this.font.getTextGlyphs(this.value,this.fontSize,0,0,0,this.textAlign,this.textBaseline);o.filter(function(c){return c.path.length>0}).forEach(function(c){a.addChild(new n.Shape({translate:c.translate,path:c.path,color:a.color,fill:a.fill,stroke:a.stroke,closed:!0}))}),this.updateFlatGraph()},s.font.set=function(i){var a=this;this._font=i,this._font.waitForLoad().then(function(){a.updateText(),a.visible=!0;for(var o=a.addTo;o.addTo!==void 0;)o=o.addTo;o&&typeof o.updateRenderGraph=="function"&&o.updateRenderGraph()})},s.font.get=function(){return this._font},s.value.set=function(i){this._value=i,this.updateText()},s.value.get=function(){return this._value},s.fontSize.set=function(i){this._fontSize=i,this.updateText()},s.fontSize.get=function(){return this._fontSize},s.textAlign.set=function(i){this._textAlign=i,this.updateText()},s.textAlign.get=function(){return this._textAlign},s.textBaseline.set=function(i){this._textBaseline=i,this.updateText()},s.textBaseline.get=function(){return this._textBaseline},s.color.set=function(i){this._color=i,this.children.forEach(function(a){return a.color=i})},s.color.get=function(){return this._color},s.fill.set=function(i){this._fill=i,this.children.forEach(function(a){return a.fill=i})},s.fill.get=function(){return this._fill},s.stroke.set=function(i){this._stroke=i,this.children.forEach(function(a){return a.stroke=i})},s.stroke.get=function(){return this._stroke},Object.defineProperties(r.prototype,s),r}(n.Group);return e.optionKeys=e.optionKeys.concat(["color","fill","stroke","font","fontSize","value","textAlign","textBaseline"]),n.TextGroup=e,n}var il={init:function(e){return e.FontList=[],e.waitForFonts=function(){return Promise.all(e.FontList.map(function(t){return t.waitForLoad()}))},el(e),nl(e),sl(e),e},version:"1.2.8"};const wc="14.7.77",ja=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),Wa=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),li=(n,e)=>({startTime:e,type:"setValue",value:n}),Tc=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),Sc=(n,e,{startTime:t,target:r,timeConstant:s})=>r+(e-r)*Math.exp((t-n)/s),en=n=>n.type==="exponentialRampToValue",ns=n=>n.type==="linearRampToValue",wt=n=>en(n)||ns(n),Ei=n=>n.type==="setValue",dt=n=>n.type==="setValueCurve",rs=(n,e,t,r)=>{const s=n[e];return s===void 0?r:wt(s)||Ei(s)?s.value:dt(s)?s.values[s.values.length-1]:Sc(t,rs(n,e-1,s.startTime,r),s)},Ga=(n,e,t,r,s)=>t===void 0?[r.insertTime,s]:wt(t)?[t.endTime,t.value]:Ei(t)?[t.startTime,t.value]:dt(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,rs(n,e-1,t.startTime,s)],di=n=>n.type==="cancelAndHold",pi=n=>n.type==="cancelScheduledValues",bt=n=>di(n)||pi(n)?n.cancelTime:en(n)||ns(n)?n.endTime:n.startTime,za=(n,e,t,{endTime:r,value:s})=>t===s?s:0<t&&0<s||t<0&&s<0?t*(s/t)**((n-e)/(r-e)):0,Ha=(n,e,t,{endTime:r,value:s})=>t+(n-e)/(r-e)*(s-t),al=(n,e)=>{const t=Math.floor(e),r=Math.ceil(e);return t===r?n[t]:(1-(e-t))*n[t]+(1-(r-e))*n[r]},ol=(n,{duration:e,startTime:t,values:r})=>{const s=(n-t)/e*(r.length-1);return al(r,s)},yr=n=>n.type==="setTarget";class cl{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=bt(e);if(di(e)||pi(e)){const r=this._automationEvents.findIndex(i=>pi(e)&&dt(i)?i.startTime+i.duration>=t:bt(i)>=t),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),di(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&wt(s)){if(yr(i))throw new Error("The internal list is malformed.");const a=dt(i)?i.startTime+i.duration:bt(i),o=dt(i)?i.values[i.values.length-1]:i.value,c=en(s)?za(t,a,o,s):Ha(t,a,o,s),u=en(s)?ja(c,t,this._currenTime):Wa(c,t,this._currenTime);this._automationEvents.push(u)}i!==void 0&&yr(i)&&this._automationEvents.push(li(this.getValue(t),t)),i!==void 0&&dt(i)&&i.startTime+i.duration>t&&(this._automationEvents[this._automationEvents.length-1]=Tc(new Float32Array([6,7]),i.startTime,t-i.startTime))}}else{const r=this._automationEvents.findIndex(a=>bt(a)>t),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&dt(s)&&bt(s)+s.duration>t)return!1;const i=en(e)?ja(e.value,e.endTime,this._currenTime):ns(e)?Wa(e.value,t,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(dt(e)&&t+e.duration>bt(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(r=>bt(r)>e);if(t>1){const r=this._automationEvents.slice(t-1),s=r[0];yr(s)&&r.unshift(li(rs(this._automationEvents,t-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(a=>bt(a)>e),r=this._automationEvents[t],s=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[s];if(i!==void 0&&yr(i)&&(r===void 0||!wt(r)||r.insertTime>e))return Sc(e,rs(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Ei(i)&&(r===void 0||!wt(r)))return i.value;if(i!==void 0&&dt(i)&&(r===void 0||!wt(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?ol(e,i):i.values[i.values.length-1];if(i!==void 0&&wt(i)&&(r===void 0||!wt(r)))return i.value;if(r!==void 0&&en(r)){const[a,o]=Ga(this._automationEvents,s,i,r,this._defaultValue);return za(e,a,o,r)}if(r!==void 0&&ns(r)){const[a,o]=Ga(this._automationEvents,s,i,r,this._defaultValue);return Ha(e,a,o,r)}return this._defaultValue}}const ul=n=>({cancelTime:n,type:"cancelAndHold"}),hl=n=>({cancelTime:n,type:"cancelScheduledValues"}),ll=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),dl=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),pl=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),fl=()=>new DOMException("","AbortError"),ml=n=>(e,t,[r,s,i],a)=>{n(e[s],[t,r,i],o=>o[0]===t&&o[1]===r,a)},gl=n=>(e,t,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);n.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},vl=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},un=new WeakSet,Cc=new WeakMap,Mi=new WeakMap,Ac=new WeakMap,Pi=new WeakMap,Ns=new WeakMap,Oc=new WeakMap,fi=new WeakMap,mi=new WeakMap,gi=new WeakMap,kc={construct(){return kc}},_l=n=>{try{const e=new Proxy(n,kc);new e}catch{return!1}return!0},Xa=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ya=(n,e)=>{const t=[];let r=n.replace(/^[\s]+/,""),s=r.match(Xa);for(;s!==null;){const i=s[1].slice(1,-1),a=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(a),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(Xa)}return[t.join(";"),r]},Ka=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Qa=n=>{if(!_l(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},yl=(n,e,t,r,s,i,a,o,c,u,h,l,d)=>{let f=0;return(p,m,g={credentials:"omit"})=>{const v=h.get(p);if(v!==void 0&&v.has(m))return Promise.resolve();const y=u.get(p);if(y!==void 0){const b=y.get(m);if(b!==void 0)return b}const S=i(p),C=S.audioWorklet===void 0?s(m).then(([b,T])=>{const[x,w]=Ya(b,T),A=`${x};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${w}
})})(window,'_AWGS')`;return t(A)}).then(()=>{const b=d._AWGS.pop();if(b===void 0)throw new SyntaxError;r(S.currentTime,S.sampleRate,()=>b(class{},void 0,(T,x)=>{if(T.trim()==="")throw e();const w=mi.get(S);if(w!==void 0){if(w.has(T))throw e();Qa(x),Ka(x.parameterDescriptors),w.set(T,x)}else Qa(x),Ka(x.parameterDescriptors),mi.set(S,new Map([[T,x]]))},S.sampleRate,void 0,void 0))}):Promise.all([s(m),Promise.resolve(n(l,l))]).then(([[b,T],x])=>{const w=f+1;f=w;const[A,O]=Ya(b,T),P=`${A};((AudioWorkletProcessor,registerProcessor)=>{${O}
})(${x?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${x?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${x?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${w}',class extends AudioWorkletProcessor{process(){return !1}})`,U=new Blob([P],{type:"application/javascript; charset=utf-8"}),R=URL.createObjectURL(U);return S.audioWorklet.addModule(R,g).then(()=>{if(o(S))return S;const $=a(S);return $.audioWorklet.addModule(R,g).then(()=>$)}).then($=>{if(c===null)throw new SyntaxError;try{new c($,`__sac${w}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(R))});return y===void 0?u.set(p,new Map([[m,C]])):y.set(m,C),C.then(()=>{const b=h.get(p);b===void 0?h.set(p,new Set([m])):b.add(m)}).finally(()=>{const b=u.get(p);b!==void 0&&b.delete(m)}),C}},He=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Rs=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return n.delete(r),r},Ic=(n,e,t,r)=>{const s=He(n,e),i=Rs(s,a=>a[0]===t&&a[1]===r);return s.size===0&&n.delete(e),i},nr=n=>He(Oc,n),hn=n=>{if(un.has(n))throw new Error("The AudioNode is already stored.");un.add(n),nr(n).forEach(e=>e(!0))},Dc=n=>"port"in n,rr=n=>{if(!un.has(n))throw new Error("The AudioNode is not stored.");un.delete(n),nr(n).forEach(e=>e(!1))},vi=(n,e)=>{!Dc(n)&&e.every(t=>t.size===0)&&rr(n)},bl=(n,e,t,r,s,i,a,o,c,u,h,l,d)=>{const f=new WeakMap;return(p,m,g,v,y)=>{const{activeInputs:S,passiveInputs:C}=i(m),{outputs:b}=i(p),T=o(p),x=w=>{const A=c(m),O=c(p);if(w){const I=Ic(C,p,g,v);n(S,p,I,!1),!y&&!l(p)&&t(O,A,g,v),d(m)&&hn(m)}else{const I=r(S,p,g,v);e(C,v,I,!1),!y&&!l(p)&&s(O,A,g,v);const k=a(m);if(k===0)h(m)&&vi(m,S);else{const D=f.get(m);D!==void 0&&clearTimeout(D),f.set(m,setTimeout(()=>{h(m)&&vi(m,S)},k*1e3))}}};return u(b,[m,g,v],w=>w[0]===m&&w[1]===g&&w[2]===v,!0)?(T.add(x),h(p)?n(S,p,[g,v,x],!0):e(C,v,[p,g,x],!0),!0):!1}},xl=n=>(e,t,[r,s,i],a)=>{const o=e.get(r);o===void 0?e.set(r,new Set([[s,t,i]])):n(o,[s,t,i],c=>c[0]===s&&c[1]===t,a)},wl=n=>(e,t)=>{const r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);const s=()=>{t.removeEventListener("ended",s),t.disconnect(r),r.disconnect()};t.addEventListener("ended",s)},Tl=n=>(e,t)=>{n(e).add(t)},Sl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Cl=(n,e,t,r,s,i)=>class extends n{constructor(o,c){const u=s(o),h={...Sl,...c},l=r(u,h),d=i(u)?e():null;super(o,!1,l,d),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},ke=(n,e)=>n.context===e,Al=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!ke(o,a)){const u={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=n(a,u)}return r.set(a,o),await t(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},ss=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},st=()=>new DOMException("","IndexSizeError"),Ni=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(r){throw r.code===12?st():r}})(n.getChannelData)},Ol={numberOfChannels:1},kl=(n,e,t,r,s,i,a,o)=>{let c=null;return class Ec{constructor(h){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:d,sampleRate:f}={...Ol,...h};c===null&&(c=new s(1,1,44100));const p=r!==null&&e(i,i)?new r({length:l,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,l,f);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(a(p),Ni(p)):e(ss,()=>ss(p))||o(p),n.add(p),p}static[Symbol.hasInstance](h){return h!==null&&typeof h=="object"&&Object.getPrototypeOf(h)===Ec.prototype||n.has(h)}}},Ne=-34028234663852886e22,Ie=-Ne,ft=n=>un.has(n),Il={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Dl=(n,e,t,r,s,i,a,o)=>class extends n{constructor(u,h){const l=i(u),d={...Il,...h},f=s(l,d),p=a(l),m=p?e():null;super(u,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,Ie,Ne)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const h=typeof u=="function"?o(this,u):null;this._nativeAudioBufferSourceNode.onended=h;const l=this._nativeAudioBufferSourceNode.onended;this._onended=l!==null&&l===h?u:l}get playbackRate(){return this._playbackRate}start(u=0,h=0,l){if(this._nativeAudioBufferSourceNode.start(u,h,l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=l===void 0?[u,h]:[u,h,l]),this.context.state!=="closed"){hn(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),ft(this)&&rr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},El=(n,e,t,r,s)=>()=>{const i=new WeakMap;let a=null,o=null;const c=async(u,h)=>{let l=t(u);const d=ke(l,h);if(!d){const f={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,loop:l.loop,loopEnd:l.loopEnd,loopStart:l.loopStart,playbackRate:l.playbackRate.value};l=e(h,f),a!==null&&l.start(...a),o!==null&&l.stop(o)}return i.set(h,l),d?await n(h,u.playbackRate,l.playbackRate):await r(h,u.playbackRate,l.playbackRate),await s(u,h,l),l};return{set start(u){a=u},set stop(u){o=u},render(u,h){const l=i.get(h);return l!==void 0?Promise.resolve(l):c(u,h)}}},Ml=n=>"playbackRate"in n,Pl=n=>"frequency"in n&&"gain"in n,Nl=n=>"offset"in n,Rl=n=>!("frequency"in n)&&"gain"in n,Fl=n=>"detune"in n&&"frequency"in n,$l=n=>"pan"in n,De=n=>He(Cc,n),sr=n=>He(Ac,n),_i=(n,e)=>{const{activeInputs:t}=De(n);t.forEach(s=>s.forEach(([i])=>{e.includes(n)||_i(i,[...e,n])}));const r=Ml(n)?[n.playbackRate]:Dc(n)?Array.from(n.parameters.values()):Pl(n)?[n.Q,n.detune,n.frequency,n.gain]:Nl(n)?[n.offset]:Rl(n)?[n.gain]:Fl(n)?[n.detune,n.frequency]:$l(n)?[n.pan]:[];for(const s of r){const i=sr(s);i!==void 0&&i.activeInputs.forEach(([a])=>_i(a,e))}ft(n)&&rr(n)},Mc=n=>{_i(n.destination,[])},Ul=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),Ll=(n,e,t,r,s,i,a,o,c)=>class extends n{constructor(h={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let l;try{l=new c(h)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(l===null)throw r();if(!Ul(h.latencyHint))throw new TypeError(`The provided value '${h.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(h.sampleRate!==void 0&&l.sampleRate!==h.sampleRate)throw t();super(l,2);const{latencyHint:d}=h,{sampleRate:f}=l;if(this._baseLatency=typeof l.baseLatency=="number"?l.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=l,c.name==="webkitAudioContext"?(this._nativeGainNode=l.createGain(),this._nativeOscillatorNode=l.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(l.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,l.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),l.removeEventListener("statechange",p)};l.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Mc(this)}))}createMediaElementSource(h){return new s(this,{mediaElement:h})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(h){return new a(this,{mediaStream:h})}createMediaStreamTrackSource(h){return new o(this,{mediaStreamTrack:h})}resume(){return this._state==="suspended"?new Promise((h,l)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?h():this.resume().then(h,l)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(h=>{throw h===void 0||h.code===15?e():h})}suspend(){return this._nativeAudioContext.suspend().catch(h=>{throw h===void 0?e():h})}},Vl=(n,e,t,r,s,i,a,o)=>class extends n{constructor(u,h){const l=i(u),d=a(l),f=s(l,h,d),p=d?e(o):null;super(u,!1,f,p),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},ql=n=>{const e=new WeakMap,t=async(r,s)=>{const i=s.destination;return e.set(s,i),await n(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):t(r,s)}}},Bl=(n,e,t,r,s,i,a,o)=>(c,u)=>{const h=u.listener,l=()=>{const b=new Float32Array(1),T=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),x=a(u);let w=!1,A=[0,0,-1,0,1,0],O=[0,0,0];const I=()=>{if(w)return;w=!0;const U=r(u,256,9,0);U.onaudioprocess=({inputBuffer:R})=>{const $=[i(R,b,0),i(R,b,1),i(R,b,2),i(R,b,3),i(R,b,4),i(R,b,5)];$.some((V,E)=>V!==A[E])&&(h.setOrientation(...$),A=$);const G=[i(R,b,6),i(R,b,7),i(R,b,8)];G.some((V,E)=>V!==O[E])&&(h.setPosition(...G),O=G)},T.connect(U)},k=U=>R=>{R!==A[U]&&(A[U]=R,h.setOrientation(...A))},D=U=>R=>{R!==O[U]&&(O[U]=R,h.setPosition(...O))},P=(U,R,$)=>{const G=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:R});G.connect(T,0,U),G.start(),Object.defineProperty(G.offset,"defaultValue",{get(){return R}});const V=n({context:c},x,G.offset,Ie,Ne);return o(V,"value",E=>()=>E.call(V),E=>N=>{try{E.call(V,N)}catch(q){if(q.code!==9)throw q}I(),x&&$(N)}),V.cancelAndHoldAtTime=(E=>x?()=>{throw s()}:(...N)=>{const q=E.apply(V,N);return I(),q})(V.cancelAndHoldAtTime),V.cancelScheduledValues=(E=>x?()=>{throw s()}:(...N)=>{const q=E.apply(V,N);return I(),q})(V.cancelScheduledValues),V.exponentialRampToValueAtTime=(E=>x?()=>{throw s()}:(...N)=>{const q=E.apply(V,N);return I(),q})(V.exponentialRampToValueAtTime),V.linearRampToValueAtTime=(E=>x?()=>{throw s()}:(...N)=>{const q=E.apply(V,N);return I(),q})(V.linearRampToValueAtTime),V.setTargetAtTime=(E=>x?()=>{throw s()}:(...N)=>{const q=E.apply(V,N);return I(),q})(V.setTargetAtTime),V.setValueAtTime=(E=>x?()=>{throw s()}:(...N)=>{const q=E.apply(V,N);return I(),q})(V.setValueAtTime),V.setValueCurveAtTime=(E=>x?()=>{throw s()}:(...N)=>{const q=E.apply(V,N);return I(),q})(V.setValueCurveAtTime),V};return{forwardX:P(0,0,k(0)),forwardY:P(1,0,k(1)),forwardZ:P(2,-1,k(2)),positionX:P(6,0,D(0)),positionY:P(7,0,D(1)),positionZ:P(8,0,D(2)),upX:P(3,0,k(3)),upY:P(4,1,k(4)),upZ:P(5,0,k(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:v,upX:y,upY:S,upZ:C}=h.forwardX===void 0?l():h;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return y},get upY(){return S},get upZ(){return C}}},is=n=>"context"in n,ir=n=>is(n[0]),Gt=(n,e,t,r)=>{for(const s of n)if(t(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},Za=(n,e,[t,r],s)=>{Gt(n,[e,t,r],i=>i[0]===e&&i[1]===t,s)},Ja=(n,[e,t,r],s)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,r]])):Gt(i,[t,r],a=>a[0]===t,s)},yn=n=>"inputs"in n,as=(n,e,t,r)=>{if(yn(e)){const s=e.inputs[r];return n.connect(s,t,0),[s,t,0]}return n.connect(e,t,r),[e,t,r]},Pc=(n,e,t)=>{for(const r of n)if(r[0]===e&&r[1]===t)return n.delete(r),r;return null},jl=(n,e,t)=>Rs(n,r=>r[0]===e&&r[1]===t),Nc=(n,e)=>{if(!nr(n).delete(e))throw new Error("Missing the expected event listener.")},Rc=(n,e,t)=>{const r=He(n,e),s=Rs(r,i=>i[0]===t);return r.size===0&&n.delete(e),s},os=(n,e,t,r)=>{yn(e)?n.disconnect(e.inputs[r],t,0):n.disconnect(e,t,r)},he=n=>He(Mi,n),Un=n=>He(Pi,n),Lt=n=>fi.has(n),Dr=n=>!un.has(n),eo=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const r=n.createScriptProcessor(256,1,1),s=n.createGain(),i=n.createBuffer(1,2,44100),a=i.getChannelData(0);a[0]=1,a[1]=1;const o=n.createBufferSource();o.buffer=i,o.loop=!0,o.connect(r).connect(n.destination),o.connect(s),o.disconnect(s),r.onaudioprocess=c=>{const u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,h=>h===1)?t(!0):t(!1),o.stop(),r.onaudioprocess=null,o.disconnect(r),r.disconnect(n.destination)},o.start()}}),ri=(n,e)=>{const t=new Map;for(const r of n)for(const s of r){const i=t.get(s);t.set(s,i===void 0?1:i+1)}t.forEach((r,s)=>e(s,r))},cs=n=>"context"in n,Wl=n=>{const e=new Map;n.connect=(t=>(r,s=0,i=0)=>{const a=cs(r)?t(r,s,i):t(r,s),o=e.get(r);return o===void 0?e.set(r,[{input:i,output:s}]):o.every(c=>c.input!==i||c.output!==s)&&o.push({input:i,output:s}),a})(n.connect.bind(n)),n.disconnect=(t=>(r,s,i)=>{if(t.apply(n),r===void 0)e.clear();else if(typeof r=="number")for(const[a,o]of e){const c=o.filter(u=>u.output!==r);c.length===0?e.delete(a):e.set(a,c)}else if(e.has(r))if(s===void 0)e.delete(r);else{const a=e.get(r);if(a!==void 0){const o=a.filter(c=>c.output!==s&&(c.input!==i||i===void 0));o.length===0?e.delete(r):e.set(r,o)}}for(const[a,o]of e)o.forEach(c=>{cs(a)?n.connect(a,c.output,c.input):n.connect(a,c.output)})})(n.disconnect)},Gl=(n,e,t,r)=>{const{activeInputs:s,passiveInputs:i}=sr(e),{outputs:a}=De(n),o=nr(n),c=u=>{const h=he(n),l=Un(e);if(u){const d=Rc(i,n,t);Za(s,n,d,!1),!r&&!Lt(n)&&h.connect(l,t)}else{const d=jl(s,n,t);Ja(i,d,!1),!r&&!Lt(n)&&h.disconnect(l,t)}};return Gt(a,[e,t],u=>u[0]===e&&u[1]===t,!0)?(o.add(c),ft(n)?Za(s,n,[t,c],!0):Ja(i,[n,t,c],!0),!0):!1},zl=(n,e,t,r)=>{const{activeInputs:s,passiveInputs:i}=De(e),a=Pc(s[r],n,t);return a===null?[Ic(i,n,t,r)[2],!1]:[a[2],!0]},Hl=(n,e,t)=>{const{activeInputs:r,passiveInputs:s}=sr(e),i=Pc(r,n,t);return i===null?[Rc(s,n,t)[1],!1]:[i[2],!0]},Ri=(n,e,t,r,s)=>{const[i,a]=zl(n,t,r,s);if(i!==null&&(Nc(n,i),a&&!e&&!Lt(n)&&os(he(n),he(t),r,s)),ft(t)){const{activeInputs:o}=De(t);vi(t,o)}},Fi=(n,e,t,r)=>{const[s,i]=Hl(n,t,r);s!==null&&(Nc(n,s),i&&!e&&!Lt(n)&&he(n).disconnect(Un(t),r))},Xl=(n,e)=>{const t=De(n),r=[];for(const s of t.outputs)ir(s)?Ri(n,e,...s):Fi(n,e,...s),r.push(s[0]);return t.outputs.clear(),r},Yl=(n,e,t)=>{const r=De(n),s=[];for(const i of r.outputs)i[1]===t&&(ir(i)?Ri(n,e,...i):Fi(n,e,...i),s.push(i[0]),r.outputs.delete(i));return s},Kl=(n,e,t,r,s)=>{const i=De(n);return Array.from(i.outputs).filter(a=>a[0]===t&&(r===void 0||a[1]===r)&&(s===void 0||a[2]===s)).map(a=>(ir(a)?Ri(n,e,...a):Fi(n,e,...a),i.outputs.delete(a),a[0]))},Ql=(n,e,t,r,s,i,a,o,c,u,h,l,d,f,p,m)=>class extends u{constructor(v,y,S,C){super(S),this._context=v,this._nativeAudioNode=S;const b=h(v);l(b)&&t(eo,()=>eo(b,m))!==!0&&Wl(S),Mi.set(this,S),Oc.set(this,new Set),v.state!=="closed"&&y&&hn(this),n(this,C,S)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,y=0,S=0){if(y<0||y>=this._nativeAudioNode.numberOfOutputs)throw s();const C=h(this._context),b=p(C);if(d(v)||f(v))throw i();if(is(v)){const w=he(v);try{const O=as(this._nativeAudioNode,w,y,S),I=Dr(this);(b||I)&&this._nativeAudioNode.disconnect(...O),this.context.state!=="closed"&&!I&&Dr(v)&&hn(v)}catch(O){throw O.code===12?i():O}if(e(this,v,y,S,b)){const O=c([this],v);ri(O,r(b))}return v}const T=Un(v);if(T.name==="playbackRate"&&T.maxValue===1024)throw a();try{this._nativeAudioNode.connect(T,y),(b||Dr(this))&&this._nativeAudioNode.disconnect(T,y)}catch(w){throw w.code===12?i():w}if(Gl(this,v,y,b)){const w=c([this],v);ri(w,r(b))}}disconnect(v,y,S){let C;const b=h(this._context),T=p(b);if(v===void 0)C=Xl(this,T);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw s();C=Yl(this,T,v)}else{if(y!==void 0&&(y<0||y>=this.numberOfOutputs)||is(v)&&S!==void 0&&(S<0||S>=v.numberOfInputs))throw s();if(C=Kl(this,T,v,y,S),C.length===0)throw i()}for(const x of C){const w=c([this],x);ri(w,o)}}},Zl=(n,e,t,r,s,i,a,o,c,u,h,l,d)=>(f,p,m,g=null,v=null)=>{const y=new cl(m.defaultValue),S=p?r(y):null,C={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(b){m.value=b,C.setValueAtTime(b,f.context.currentTime)},cancelAndHoldAtTime(b){if(typeof m.cancelAndHoldAtTime=="function")S===null&&y.flush(f.context.currentTime),y.add(s(b)),m.cancelAndHoldAtTime(b);else{const T=Array.from(y).pop();S===null&&y.flush(f.context.currentTime),y.add(s(b));const x=Array.from(y).pop();m.cancelScheduledValues(b),T!==x&&x!==void 0&&(x.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(x.value,x.endTime):x.type==="linearRampToValue"?m.linearRampToValueAtTime(x.value,x.endTime):x.type==="setValue"?m.setValueAtTime(x.value,x.startTime):x.type==="setValueCurve"&&m.setValueCurveAtTime(x.values,x.startTime,x.duration))}return C},cancelScheduledValues(b){return S===null&&y.flush(f.context.currentTime),y.add(i(b)),m.cancelScheduledValues(b),C},exponentialRampToValueAtTime(b,T){if(b===0)throw new RangeError;if(!Number.isFinite(T)||T<0)throw new RangeError;return S===null&&y.flush(f.context.currentTime),y.add(a(b,T)),m.exponentialRampToValueAtTime(b,T),C},linearRampToValueAtTime(b,T){return S===null&&y.flush(f.context.currentTime),y.add(o(b,T)),m.linearRampToValueAtTime(b,T),C},setTargetAtTime(b,T,x){return S===null&&y.flush(f.context.currentTime),y.add(c(b,T,x)),m.setTargetAtTime(b,T,x),C},setValueAtTime(b,T){return S===null&&y.flush(f.context.currentTime),y.add(u(b,T)),m.setValueAtTime(b,T),C},setValueCurveAtTime(b,T,x){const w=b instanceof Float32Array?b:new Float32Array(b);if(l!==null&&l.name==="webkitAudioContext"){const A=T+x,O=f.context.sampleRate,I=Math.ceil(T*O),k=Math.floor(A*O),D=k-I,P=new Float32Array(D);for(let R=0;R<D;R+=1){const $=(w.length-1)/x*((I+R)/O-T),G=Math.floor($),V=Math.ceil($);P[R]=G===V?w[G]:(1-($-G))*w[G]+(1-(V-$))*w[V]}S===null&&y.flush(f.context.currentTime),y.add(h(P,T,x)),m.setValueCurveAtTime(P,T,x);const U=k/O;U<A&&d(C,P[P.length-1],U),d(C,w[w.length-1],A)}else S===null&&y.flush(f.context.currentTime),y.add(h(w,T,x)),m.setValueCurveAtTime(w,T,x);return C}};return t.set(C,m),e.set(C,f),n(C,S),C},Jl=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:r,value:s}=t;e.exponentialRampToValueAtTime(s,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:s}=t;e.linearRampToValueAtTime(s,r)}else if(t.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=t;e.setTargetAtTime(s,r,i)}else if(t.type==="setValue"){const{startTime:r,value:s}=t;e.setValueAtTime(s,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=t;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class Fc{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,s)=>e.call(t,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const ed={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},td=(n,e,t,r,s,i,a,o,c,u,h,l,d,f)=>class extends e{constructor(m,g,v){var y;const S=o(m),C=c(S),b=h({...ed,...v});d(b);const T=mi.get(S),x=T==null?void 0:T.get(g),w=C||S.state!=="closed"?S:(y=a(S))!==null&&y!==void 0?y:S,A=s(w,C?null:m.baseLatency,u,g,x,b),O=C?r(g,b,x):null;super(m,!0,A,O);const I=[];A.parameters.forEach((D,P)=>{const U=t(this,C,D);I.push([P,U])}),this._nativeAudioWorkletNode=A,this._onprocessorerror=null,this._parameters=new Fc(I),C&&n(S,this);const{activeInputs:k}=i(this);l(A,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===g?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function us(n,e,t,r,s){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],r,s);else{const i=n.getChannelData(r);if(e[t].byteLength===0)e[t]=i.slice(s,s+128);else{const a=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(a)}}}const $c=(n,e,t,r,s)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],r,s):e[t].byteLength!==0&&n.getChannelData(r).set(e[t],s)},hs=(n,e)=>{const t=[];for(let r=0;r<n;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let a=0;a<i;a+=1)s.push(new Float32Array(128));t.push(s)}return t},nd=(n,e)=>{const t=He(gi,n),r=he(e);return He(t,r)},rd=async(n,e,t,r,s,i,a)=>{const o=e===null?Math.ceil(n.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,u=s.reduce((g,v)=>g+v,0),h=u===0?null:t.createBuffer(u,o,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const l=De(n),d=await nd(t,n),f=hs(r.numberOfInputs,r.channelCount),p=hs(r.numberOfOutputs,s),m=Array.from(n.parameters.keys()).reduce((g,v)=>({...g,[v]:new Float32Array(128)}),{});for(let g=0;g<o;g+=128){if(r.numberOfInputs>0&&e!==null)for(let v=0;v<r.numberOfInputs;v+=1)for(let y=0;y<r.channelCount;y+=1)us(e,f[v],y,y,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},y)=>{us(e,m,v,c+y,g)});for(let v=0;v<r.numberOfInputs;v+=1)for(let y=0;y<s[v];y+=1)p[v][y].byteLength===0&&(p[v][y]=new Float32Array(128));try{const v=f.map((S,C)=>l.activeInputs[C].size===0?[]:S),y=a(g/t.sampleRate,t.sampleRate,()=>d.process(v,p,m));if(h!==null)for(let S=0,C=0;S<r.numberOfOutputs;S+=1){for(let b=0;b<s[S];b+=1)$c(h,p[S],b,C+b,g);C+=s[S]}if(!y)break}catch(v){n.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return h},sd=(n,e,t,r,s,i,a,o,c,u,h,l,d,f,p,m)=>(g,v,y)=>{const S=new WeakMap;let C=null;const b=async(T,x)=>{let w=h(T),A=null;const O=ke(w,x),I=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(l===null){const k=I.reduce((R,$)=>R+$,0),D=s(x,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),P=[];for(let R=0;R<T.numberOfOutputs;R+=1)P.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:I[R]}));const U=a(x,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});U.connect=e.bind(null,P),U.disconnect=c.bind(null,P),A=[D,P,U]}else O||(w=new l(x,g));if(S.set(x,A===null?w:A[2]),A!==null){if(C===null){if(y===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const $=T.channelCount*T.numberOfInputs,G=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length,V=$+G;C=rd(T,V===0?null:await(async()=>{const N=new d(V,Math.ceil(T.context.length/128)*128,x.sampleRate),q=[],Y=[];for(let X=0;X<v.numberOfInputs;X+=1)q.push(a(N,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),Y.push(s(N,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const K=await Promise.all(Array.from(T.parameters.values()).map(async X=>{const re=i(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X.value});return await f(N,X,re.offset),re})),j=r(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,$+G)});for(let X=0;X<v.numberOfInputs;X+=1){q[X].connect(Y[X]);for(let re=0;re<v.channelCount;re+=1)Y[X].connect(j,re,X*v.channelCount+re)}for(const[X,re]of K.entries())re.connect(j,0,$+X),re.start(0);return j.connect(N.destination),await Promise.all(q.map(X=>p(T,N,X))),m(N)})(),x,v,I,y,u)}const k=await C,D=t(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[P,U,R]=A;k!==null&&(D.buffer=k,D.start(0)),D.connect(P);for(let $=0,G=0;$<T.numberOfOutputs;$+=1){const V=U[$];for(let E=0;E<I[$];E+=1)P.connect(V,G+E,E);G+=I[$]}return R}if(O)for(const[k,D]of T.parameters.entries())await n(x,D,w.parameters.get(k));else for(const[k,D]of T.parameters.entries())await f(x,D,w.parameters.get(k));return await p(T,x,w),w};return{render(T,x){o(x,T);const w=S.get(x);return w!==void 0?Promise.resolve(w):b(T,x)}}},id=(n,e,t,r,s,i,a,o,c,u,h,l,d,f,p,m,g,v,y,S)=>class extends p{constructor(b,T){super(b,T),this._nativeContext=b,this._audioWorklet=n===void 0?void 0:{addModule:(x,w)=>n(this,x,w)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(b,T,x){return new t({length:T,numberOfChannels:b,sampleRate:x})}createBufferSource(){return new r(this)}createChannelMerger(b=6){return new i(this,{numberOfInputs:b})}createChannelSplitter(b=6){return new a(this,{numberOfOutputs:b})}createConstantSource(){return new o(this)}createConvolver(){return new c(this)}createDelay(b=1){return new h(this,{maxDelayTime:b})}createDynamicsCompressor(){return new l(this)}createGain(){return new d(this)}createIIRFilter(b,T){return new f(this,{feedback:T,feedforward:b})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(b,T,x={disableNormalization:!1}){return new v(this,{...x,imag:T,real:b})}createStereoPanner(){return new y(this)}createWaveShaper(){return new S(this)}decodeAudioData(b,T,x){return u(this._nativeContext,b).then(w=>(typeof T=="function"&&T(w),w),w=>{throw typeof x=="function"&&x(w),w})}},ad={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},od=(n,e,t,r,s,i,a,o)=>class extends n{constructor(u,h){const l=i(u),d={...ad,...h},f=s(l,d),p=a(l),m=p?t():null;super(u,!1,f,m),this._Q=e(this,p,f.Q,Ie,Ne),this._detune=e(this,p,f.detune,1200*Math.log2(Ie),-1200*Math.log2(Ie)),this._frequency=e(this,p,f.frequency,u.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Ie),Ne),this._nativeBiquadFilterNode=f,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,h,l){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,h,l)}catch(d){throw d.code===11?r():d}if(u.length!==h.length||h.length!==l.length)throw r()}},cd=(n,e,t,r,s)=>()=>{const i=new WeakMap,a=async(o,c)=>{let u=t(o);const h=ke(u,c);if(!h){const l={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(c,l)}return i.set(c,u),h?(await n(c,o.Q,u.Q),await n(c,o.detune,u.detune),await n(c,o.frequency,u.frequency),await n(c,o.gain,u.gain)):(await r(c,o.Q,u.Q),await r(c,o.detune,u.detune),await r(c,o.frequency,u.frequency),await r(c,o.gain,u.gain)),await s(o,c,u),u};return{render(o,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):a(o,c)}}},ud=(n,e)=>(t,r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n.get(t);if(i!==void 0)return i;try{const a=r();return a instanceof Promise?(n.set(t,a),a.catch(()=>!1).then(o=>(n.delete(t),e.set(t,o),o))):(e.set(t,a),a)}catch{return e.set(t,!1),!1}},hd={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},ld=(n,e,t,r,s)=>class extends n{constructor(a,o){const c=r(a),u={...hd,...o},h=t(c,u),l=s(c)?e():null;super(a,!1,h,l)}},dd=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!ke(o,a)){const u={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=n(a,u)}return r.set(a,o),await t(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},pd={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},fd=(n,e,t,r,s,i)=>class extends n{constructor(o,c){const u=r(o),h=i({...pd,...c}),l=t(u,h),d=s(u)?e():null;super(o,!1,l,d)}},md=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!ke(o,a)){const u={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=n(a,u)}return r.set(a,o),await t(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},gd=n=>(e,t,r)=>n(t,e,r),vd=n=>(e,t,r=0,s=0)=>{const i=e[r];if(i===void 0)throw n();return cs(t)?i.connect(t,0,s):i.connect(t,0)},_d=n=>(e,t)=>{const r=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},yd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},bd=(n,e,t,r,s,i,a)=>class extends n{constructor(c,u){const h=s(c),l={...yd,...u},d=r(h,l),f=i(h),p=f?t():null;super(c,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Ie,Ne),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeConstantSourceNode.onended=u;const h=this._nativeConstantSourceNode.onended;this._onended=h!==null&&h===u?c:h}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){hn(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),ft(this)&&rr(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},xd=(n,e,t,r,s)=>()=>{const i=new WeakMap;let a=null,o=null;const c=async(u,h)=>{let l=t(u);const d=ke(l,h);if(!d){const f={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,offset:l.offset.value};l=e(h,f),a!==null&&l.start(a),o!==null&&l.stop(o)}return i.set(h,l),d?await n(h,u.offset,l.offset):await r(h,u.offset,l.offset),await s(u,h,l),l};return{set start(u){a=u},set stop(u){o=u},render(u,h){const l=i.get(h);return l!==void 0?Promise.resolve(l):c(u,h)}}},wd=n=>e=>(n[0]=e,n[0]),Td={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Sd=(n,e,t,r,s,i)=>class extends n{constructor(o,c){const u=r(o),h={...Td,...c},l=t(u,h),f=s(u)?e():null;super(o,!1,l,f),this._isBufferNullified=!1,this._nativeConvolverNode=l,h.buffer!==null&&i(this,h.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},Cd=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!ke(o,a)){const u={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=n(a,u)}return r.set(a,o),yn(o)?await t(i,a,o.inputs[0]):await t(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},Ad=(n,e)=>(t,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,s)}catch(i){throw i.name==="SyntaxError"?n():i}},Od=()=>new DOMException("","DataCloneError"),to=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{const s=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>s();try{e.postMessage(n,[n])}finally{s()}})},kd=(n,e,t,r,s,i,a,o,c,u,h)=>(l,d)=>{const f=a(l)?l:i(l);if(s.has(d)){const p=t();return Promise.reject(p)}try{s.add(d)}catch{}return e(c,()=>c(f))?f.decodeAudioData(d).then(p=>(to(d).catch(()=>{}),e(o,()=>o(p))||h(p),n.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await to(d)}catch{}},v=y=>{m(y),g()};try{f.decodeAudioData(d,y=>{typeof y.copyFromChannel!="function"&&(u(y),Ni(y)),n.add(y),g().then(()=>p(y))},y=>{v(y===null?r():y)})}catch(y){v(y)}})},Id=(n,e,t,r,s,i,a,o)=>(c,u)=>{const h=e.get(c);if(h===void 0)throw new Error("Missing the expected cycle count.");const l=i(c.context),d=o(l);if(h===u){if(e.delete(c),!d&&a(c)){const f=r(c),{outputs:p}=t(c);for(const m of p)if(ir(m)){const g=r(m[0]);n(f,g,m[1],m[2])}else{const g=s(m[0]);f.connect(g,m[1])}}}else e.set(c,h-u)},Dd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Ed=(n,e,t,r,s,i,a)=>class extends n{constructor(c,u){const h=s(c),l={...Dd,...u},d=r(h,l),f=i(h),p=f?t(l.maxDelayTime):null;super(c,!1,d,p),this._delayTime=e(this,f,d.delayTime),a(this,l.maxDelayTime)}get delayTime(){return this._delayTime}},Md=(n,e,t,r,s)=>i=>{const a=new WeakMap,o=async(c,u)=>{let h=t(c);const l=ke(h,u);if(!l){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:i};h=e(u,d)}return a.set(u,h),l?await n(u,c.delayTime,h.delayTime):await r(u,c.delayTime,h.delayTime),await s(c,u,h),h};return{render(c,u){const h=a.get(u);return h!==void 0?Promise.resolve(h):o(c,u)}}},Pd=n=>(e,t,r,s)=>n(e[s],i=>i[0]===t&&i[1]===r),Nd=n=>(e,t)=>{n(e).delete(t)},Rd=n=>"delayTime"in n,Fd=(n,e,t)=>function r(s,i){const a=is(i)?i:t(n,i);if(Rd(a))return[];if(s[0]===a)return[s];if(s.includes(a))return[];const{outputs:o}=e(a);return Array.from(o).map(c=>r([...s,a],c[0])).reduce((c,u)=>c.concat(u),[])},br=(n,e,t)=>{const r=e[t];if(r===void 0)throw n();return r},$d=n=>(e,t=void 0,r=void 0,s=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?br(n,e,t).disconnect():cs(t)?r===void 0?e.forEach(i=>i.disconnect(t)):s===void 0?br(n,e,r).disconnect(t,0):br(n,e,r).disconnect(t,0,s):r===void 0?e.forEach(i=>i.disconnect(t)):br(n,e,r).disconnect(t,0),Ud={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Ld=(n,e,t,r,s,i,a,o)=>class extends n{constructor(u,h){const l=i(u),d={...Ud,...h},f=r(l,d),p=a(l),m=p?t():null;super(u,!1,f,m),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const h=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=h,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const h=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=h,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Vd=(n,e,t,r,s)=>()=>{const i=new WeakMap,a=async(o,c)=>{let u=t(o);const h=ke(u,c);if(!h){const l={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(c,l)}return i.set(c,u),h?(await n(c,o.attack,u.attack),await n(c,o.knee,u.knee),await n(c,o.ratio,u.ratio),await n(c,o.release,u.release),await n(c,o.threshold,u.threshold)):(await r(c,o.attack,u.attack),await r(c,o.knee,u.knee),await r(c,o.ratio,u.ratio),await r(c,o.release,u.release),await r(c,o.threshold,u.threshold)),await s(o,c,u),u};return{render(o,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):a(o,c)}}},qd=()=>new DOMException("","EncodingError"),Bd=n=>e=>new Promise((t,r)=>{if(n===null){r(new SyntaxError);return}const s=n.document.head;if(s===null)r(new SyntaxError);else{const i=n.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(a),c=n.onerror,u=()=>{n.onerror=c,URL.revokeObjectURL(o)};n.onerror=(h,l,d,f,p)=>{if(l===o||l===n.location.href&&d===1&&f===1)return u(),r(p),!1;if(c!==null)return c(h,l,d,f,p)},i.onerror=()=>{u(),r(new SyntaxError)},i.onload=()=>{u(),t()},i.src=o,i.type="module",s.appendChild(i)}}),jd=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=n(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(t,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,s)}},Wd=n=>(e,t,r)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},Gd=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},zd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Hd=(n,e,t,r,s,i)=>class extends n{constructor(o,c){const u=s(o),h={...zd,...c},l=r(u,h),d=i(u),f=d?t():null;super(o,!1,l,f),this._gain=e(this,d,l.gain,Ie,Ne)}get gain(){return this._gain}},Xd=(n,e,t,r,s)=>()=>{const i=new WeakMap,a=async(o,c)=>{let u=t(o);const h=ke(u,c);if(!h){const l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(c,l)}return i.set(c,u),h?await n(c,o.gain,u.gain):await r(c,o.gain,u.gain),await s(o,c,u),u};return{render(o,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):a(o,c)}}},Yd=(n,e)=>t=>e(n,t),Kd=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Qd=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},Zd=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Jd=n=>e=>n.get(e),Ce=()=>new DOMException("","InvalidStateError"),ep=n=>e=>{const t=n.get(e);if(t===void 0)throw Ce();return t},tp=(n,e)=>t=>{let r=n.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),n.set(t,r),r},np=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Fs=()=>new DOMException("","InvalidAccessError"),rp=n=>{n.getFrequencyResponse=(e=>(t,r,s)=>{if(t.length!==r.length||r.length!==s.length)throw Fs();return e.call(n,t,r,s)})(n.getFrequencyResponse)},sp={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ip=(n,e,t,r,s,i)=>class extends n{constructor(o,c){const u=r(o),h=s(u),l={...sp,...c},d=e(u,h?null:o.baseLatency,l),f=h?t(l.feedback,l.feedforward):null;super(o,!1,d,f),rp(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(o,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(o,c,u)}},Uc=(n,e,t,r,s,i,a,o,c,u,h)=>{const l=u.length;let d=o;for(let f=0;f<l;f+=1){let p=t[0]*u[f];for(let m=1;m<s;m+=1){const g=d-m&c-1;p+=t[m]*i[g],p-=n[m]*a[g]}for(let m=s;m<r;m+=1)p+=t[m]*i[d-m&c-1];for(let m=s;m<e;m+=1)p-=n[m]*a[d-m&c-1];i[d]=u[f],a[d]=p,d=d+1&c-1,h[f]=p}return d},ap=(n,e,t,r)=>{const s=t instanceof Float64Array?t:new Float64Array(t),i=r instanceof Float64Array?r:new Float64Array(r),a=s.length,o=i.length,c=Math.min(a,o);if(s[0]!==1){for(let p=0;p<a;p+=1)i[p]/=s[0];for(let p=1;p<o;p+=1)s[p]/=s[0]}const u=32,h=new Float32Array(u),l=new Float32Array(u),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const m=n.getChannelData(p),g=d.getChannelData(p);h.fill(0),l.fill(0),Uc(s,a,i,o,c,h,l,0,u,m,g)}return d},op=(n,e,t,r,s)=>(i,a)=>{const o=new WeakMap;let c=null;const u=async(h,l)=>{let d=null,f=e(h);const p=ke(f,l);if(l.createIIRFilter===void 0?d=n(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=l.createIIRFilter(a,i)),o.set(l,d===null?f:d),d!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new t(h.context.destination.channelCount,h.context.length,l.sampleRate);c=(async()=>{await r(h,g,g.destination);const v=await s(g);return ap(v,l,i,a)})()}const m=await c;return d.buffer=m,d.start(0),d}return await r(h,l,f),f};return{render(h,l){const d=o.get(l);return d!==void 0?Promise.resolve(d):u(h,l)}}},cp=(n,e,t,r,s,i)=>a=>(o,c)=>{const u=n.get(o);if(u===void 0){if(!a&&i(o)){const h=r(o),{outputs:l}=t(o);for(const d of l)if(ir(d)){const f=r(d[0]);e(h,f,d[1],d[2])}else{const f=s(d[0]);h.disconnect(f,d[1])}}n.set(o,c)}else n.set(o,u+c)},up=(n,e)=>t=>{const r=n.get(t);return e(r)||e(t)},hp=(n,e)=>t=>n.has(t)||e(t),lp=(n,e)=>t=>n.has(t)||e(t),dp=(n,e)=>t=>{const r=n.get(t);return e(r)||e(t)},pp=n=>e=>n!==null&&e instanceof n,fp=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,mp=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,gp=(n,e)=>t=>n(t)||e(t),vp=n=>e=>n!==null&&e instanceof n,_p=n=>n!==null&&n.isSecureContext,yp=(n,e,t,r)=>class extends n{constructor(i,a){const o=t(i),c=e(o,a);if(r(o))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},bp={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},xp=(n,e,t,r)=>class extends n{constructor(i,a){const o=t(i);if(r(o))throw new TypeError;const c={...bp,...a},u=e(o,c);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},wp=(n,e,t,r)=>class extends n{constructor(i,a){const o=t(i),c=e(o,a);if(r(o))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Tp=(n,e,t)=>class extends n{constructor(s,i){const a=t(s),o=e(a,i);super(s,!0,o,null)}},Sp=(n,e,t,r,s,i)=>class extends t{constructor(o,c){super(o),this._nativeContext=o,Ns.set(this,o),r(o)&&s.set(o,new Set),this._destination=new n(this,c),this._listener=e(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const c=typeof o=="function"?i(this,o):null;this._nativeContext.onstatechange=c;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===c?o:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Ln=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Cp=(n,e)=>(t,r,s)=>{const i=new Set;return t.connect=(a=>(o,c=0,u=0)=>{const h=i.size===0;if(e(o))return a.call(t,o,c,u),n(i,[o,c,u],l=>l[0]===o&&l[1]===c&&l[2]===u,!0),h&&r(),o;a.call(t,o,c),n(i,[o,c],l=>l[0]===o&&l[1]===c,!0),h&&r()})(t.connect),t.disconnect=(a=>(o,c,u)=>{const h=i.size>0;if(o===void 0)a.apply(t),i.clear();else if(typeof o=="number"){a.call(t,o);for(const d of i)d[1]===o&&i.delete(d)}else{e(o)?a.call(t,o,c,u):a.call(t,o,c);for(const d of i)d[0]===o&&(c===void 0||d[1]===c)&&(u===void 0||d[2]===u)&&i.delete(d)}const l=i.size===0;h&&l&&s()})(t.disconnect),t},le=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t]&&(n[t]=r)},Te=(n,e)=>{le(n,e,"channelCount"),le(n,e,"channelCountMode"),le(n,e,"channelInterpretation")},no=n=>typeof n.getFloatTimeDomainData=="function",Ap=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const r=Math.max(t.length,n.fftSize);for(let s=0;s<r;s+=1)e[s]=(t[s]-128)*.0078125;return e}},Op=(n,e)=>(t,r)=>{const s=t.createAnalyser();if(Te(s,r),!(r.maxDecibels>r.minDecibels))throw e();return le(s,r,"fftSize"),le(s,r,"maxDecibels"),le(s,r,"minDecibels"),le(s,r,"smoothingTimeConstant"),n(no,()=>no(s))||Ap(s),s},kp=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,ge=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t].value&&(n[t].value=r)},Ip=n=>{n.start=(e=>{let t=!1;return(r=0,s=0,i)=>{if(t)throw Ce();e.call(n,r,s,i),t=!0}})(n.start)},$i=n=>{n.start=(e=>(t=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,r,s)})(n.start)},Ui=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},Dp=(n,e,t,r,s,i,a,o,c,u,h)=>(l,d)=>{const f=l.createBufferSource();return Te(f,d),ge(f,d,"playbackRate"),le(f,d,"buffer"),le(f,d,"loop"),le(f,d,"loopEnd"),le(f,d,"loopStart"),e(t,()=>t(l))||Ip(f),e(r,()=>r(l))||c(f),e(s,()=>s(l))||u(f,l),e(i,()=>i(l))||$i(f),e(a,()=>a(l))||h(f,l),e(o,()=>o(l))||Ui(f),n(l,f),f},Ep=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,Mp=(n,e)=>(t,r,s)=>{const i=t.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const a=n(t,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(a,"channelCount",o=>()=>o.call(a),o=>c=>{o.call(a,c);try{i.channelCount=c}catch(u){if(c>i.maxChannelCount)throw u}}),e(a,"channelCountMode",o=>()=>o.call(a),o=>c=>{o.call(a,c),i.channelCountMode=c}),e(a,"channelInterpretation",o=>()=>o.call(a),o=>c=>{o.call(a,c),i.channelInterpretation=c}),Object.defineProperty(a,"maxChannelCount",{get:()=>i.maxChannelCount}),a.connect(i),a},Pp=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,Np=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},Rp=(n,e,t,r,s)=>(i,a,o,c,u,h)=>{if(o!==null)try{const l=new o(i,c,h),d=new Map;let f=null;if(Object.defineProperties(l,{channelCount:{get:()=>h.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&l.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&l.addEventListener("processorerror",f)}}}),l.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const v=d.get(m[1]);v!==void 0?m[1]=v:(m[1]=y=>{y.type==="error"?(Object.defineProperties(y,{type:{value:"processorerror"}}),g(y)):g(new ErrorEvent(m[0],{...y}))},d.set(g,m[1]))}}return p.call(l,"error",m[1],m[2]),p.call(l,...m)})(l.addEventListener),l.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=d.get(m[1]);g!==void 0&&(d.delete(m[1]),m[1]=g)}return p.call(l,"error",m[1],m[2]),p.call(l,m[0],m[1],m[2])})(l.removeEventListener),h.numberOfOutputs!==0){const p=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return l.connect(p).connect(i.destination),s(l,()=>p.disconnect(),()=>p.connect(i.destination))}return l}catch(l){throw l.code===11?r():l}if(u===void 0)throw r();return Np(h),e(i,a,u,h)},Lc=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),Fp=n=>new Promise((e,t)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),t(i)},s.postMessage(n)}),$p=async(n,e)=>{const t=await Fp(e);return new n(t)},Up=(n,e,t,r)=>{let s=gi.get(n);s===void 0&&(s=new WeakMap,gi.set(n,s));const i=$p(t,r);return s.set(e,i),i},Lp=(n,e,t,r,s,i,a,o,c,u,h,l,d)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(F=>F<1))throw c();if(v.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();const y=g.channelCount*g.numberOfInputs,S=v.reduce((F,W)=>F+W,0),C=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(y+C>6||S>6)throw c();const b=new MessageChannel,T=[],x=[];for(let F=0;F<g.numberOfInputs;F+=1)T.push(a(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),x.push(s(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const w=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:F,maxValue:W,minValue:we,name:pe}of m.parameterDescriptors){const ee=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[pe]!==void 0?g.parameterData[pe]:F===void 0?0:F});Object.defineProperties(ee.offset,{defaultValue:{get:()=>F===void 0?0:F},maxValue:{get:()=>W===void 0?Ie:W},minValue:{get:()=>we===void 0?Ne:we}}),w.push(ee)}const A=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+C)}),O=Lc(p,f.sampleRate),I=o(f,O,y+C,Math.max(1,S)),k=s(f,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),D=[];for(let F=0;F<g.numberOfOutputs;F+=1)D.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[F]}));for(let F=0;F<g.numberOfInputs;F+=1){T[F].connect(x[F]);for(let W=0;W<g.channelCount;W+=1)x[F].connect(A,W,F*g.channelCount+W)}const P=new Fc(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:F},W)=>{const we=w[W];return we.connect(A,0,y+W),we.start(0),[F,we.offset]}));A.connect(I);let U=g.channelInterpretation,R=null;const $=g.numberOfOutputs===0?[I]:D,G={get bufferSize(){return O},get channelCount(){return g.channelCount},set channelCount(F){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(F){throw t()},get channelInterpretation(){return U},set channelInterpretation(F){for(const W of T)W.channelInterpretation=F;U=F},get context(){return I.context},get inputs(){return T},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(F){typeof R=="function"&&G.removeEventListener("processorerror",R),R=typeof F=="function"?F:null,typeof R=="function"&&G.addEventListener("processorerror",R)},get parameters(){return P},get port(){return b.port2},addEventListener(...F){return I.addEventListener(F[0],F[1],F[2])},connect:n.bind(null,$),disconnect:u.bind(null,$),dispatchEvent(...F){return I.dispatchEvent(F[0])},removeEventListener(...F){return I.removeEventListener(F[0],F[1],F[2])}},V=new Map;b.port1.addEventListener=(F=>(...W)=>{if(W[0]==="message"){const we=typeof W[1]=="function"?W[1]:typeof W[1]=="object"&&W[1]!==null&&typeof W[1].handleEvent=="function"?W[1].handleEvent:null;if(we!==null){const pe=V.get(W[1]);pe!==void 0?W[1]=pe:(W[1]=ee=>{h(f.currentTime,f.sampleRate,()=>we(ee))},V.set(we,W[1]))}}return F.call(b.port1,W[0],W[1],W[2])})(b.port1.addEventListener),b.port1.removeEventListener=(F=>(...W)=>{if(W[0]==="message"){const we=V.get(W[1]);we!==void 0&&(V.delete(W[1]),W[1]=we)}return F.call(b.port1,W[0],W[1],W[2])})(b.port1.removeEventListener);let E=null;Object.defineProperty(b.port1,"onmessage",{get:()=>E,set:F=>{typeof E=="function"&&b.port1.removeEventListener("message",E),E=typeof F=="function"?F:null,typeof E=="function"&&(b.port1.addEventListener("message",E),b.port1.start())}}),m.prototype.port=b.port1;let N=null;Up(f,G,m,g).then(F=>N=F);const Y=hs(g.numberOfInputs,g.channelCount),K=hs(g.numberOfOutputs,v),j=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((F,{name:W})=>({...F,[W]:new Float32Array(128)}),{});let X=!0;const re=()=>{g.numberOfOutputs>0&&I.disconnect(k);for(let F=0,W=0;F<g.numberOfOutputs;F+=1){const we=D[F];for(let pe=0;pe<v[F];pe+=1)k.disconnect(we,W+pe,pe);W+=v[F]}},L=new Map;I.onaudioprocess=({inputBuffer:F,outputBuffer:W})=>{if(N!==null){const we=l(G);for(let pe=0;pe<O;pe+=128){for(let ee=0;ee<g.numberOfInputs;ee+=1)for(let me=0;me<g.channelCount;me+=1)us(F,Y[ee],me,me,pe);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:ee},me)=>{us(F,j,ee,y+me,pe)});for(let ee=0;ee<g.numberOfInputs;ee+=1)for(let me=0;me<v[ee];me+=1)K[ee][me].byteLength===0&&(K[ee][me]=new Float32Array(128));try{const ee=Y.map((Le,yt)=>{if(we[yt].size>0)return L.set(yt,O/128),Le;const ti=L.get(yt);return ti===void 0?[]:(Le.every(Ah=>Ah.every(Oh=>Oh===0))&&(ti===1?L.delete(yt):L.set(yt,ti-1)),Le)});X=h(f.currentTime+pe/f.sampleRate,f.sampleRate,()=>N.process(ee,K,j));for(let Le=0,yt=0;Le<g.numberOfOutputs;Le+=1){for(let En=0;En<v[Le];En+=1)$c(W,K[Le],En,yt+En,pe);yt+=v[Le]}}catch(ee){X=!1,G.dispatchEvent(new ErrorEvent("processorerror",{colno:ee.colno,filename:ee.filename,lineno:ee.lineno,message:ee.message}))}if(!X){for(let ee=0;ee<g.numberOfInputs;ee+=1){T[ee].disconnect(x[ee]);for(let me=0;me<g.channelCount;me+=1)x[pe].disconnect(A,me,ee*g.channelCount+me)}if(m.parameterDescriptors!==void 0){const ee=m.parameterDescriptors.length;for(let me=0;me<ee;me+=1){const Le=w[me];Le.disconnect(A,0,y+me),Le.stop()}}A.disconnect(I),I.onaudioprocess=null,Se?re():xe();break}}}};let Se=!1;const Ae=a(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),de=()=>I.connect(Ae).connect(f.destination),xe=()=>{I.disconnect(Ae),Ae.disconnect()},$e=()=>{if(X){xe(),g.numberOfOutputs>0&&I.connect(k);for(let F=0,W=0;F<g.numberOfOutputs;F+=1){const we=D[F];for(let pe=0;pe<v[F];pe+=1)k.connect(we,W+pe,pe);W+=v[F]}}Se=!0},Ze=()=>{X&&(de(),re()),Se=!1};return de(),d(G,$e,Ze)},Vc=(n,e)=>{const t=n.createBiquadFilter();return Te(t,e),ge(t,e,"Q"),ge(t,e,"detune"),ge(t,e,"frequency"),ge(t,e,"gain"),le(t,e,"type"),t},Vp=(n,e)=>(t,r)=>{const s=t.createChannelMerger(r.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,s),Te(s,r),s},qp=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ce()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Ce()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Ce()}})},ar=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Te(t,e),qp(t),t},Bp=(n,e,t,r,s)=>(i,a)=>{if(i.createConstantSource===void 0)return t(i,a);const o=i.createConstantSource();return Te(o,a),ge(o,a,"offset"),e(r,()=>r(i))||$i(o),e(s,()=>s(i))||Ui(o),n(i,o),o},bn=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),jp=(n,e,t,r)=>(s,{offset:i,...a})=>{const o=s.createBuffer(1,2,44100),c=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=t(s,{...a,gain:i}),h=o.getChannelData(0);h[0]=1,h[1]=1,c.buffer=o,c.loop=!0;const l={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(p){u.channelCount=p},get channelCountMode(){return u.channelCountMode},set channelCountMode(p){u.channelCountMode=p},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(p){u.channelInterpretation=p},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},d=()=>c.connect(u),f=()=>c.disconnect(u);return n(s,c),r(bn(l,u),d,f)},Wp=(n,e)=>(t,r)=>{const s=t.createConvolver();if(Te(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),le(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>a=>{if(a>2)throw n();return i.call(s,a)}),r.channelCountMode==="max"))throw n();return e(s,"channelCountMode",i=>()=>i.call(s),i=>a=>{if(a==="max")throw n();return i.call(s,a)}),s},qc=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Te(t,e),ge(t,e,"delayTime"),t},Gp=n=>(e,t)=>{const r=e.createDynamicsCompressor();if(Te(r,t),t.channelCount>2||t.channelCountMode==="max")throw n();return ge(r,t,"attack"),ge(r,t,"knee"),ge(r,t,"ratio"),ge(r,t,"release"),ge(r,t,"threshold"),r},Fe=(n,e)=>{const t=n.createGain();return Te(t,e),ge(t,e,"gain"),t},zp=n=>(e,t,r)=>{if(e.createIIRFilter===void 0)return n(e,t,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return Te(s,r),s};function Hp(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function Xp(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function ro(n,e){let t=[0,0];for(let r=n.length-1;r>=0;r-=1)t=Xp(t,e),t[0]+=n[r];return t}const Yp=(n,e,t,r)=>(s,i,{channelCount:a,channelCountMode:o,channelInterpretation:c,feedback:u,feedforward:h})=>{const l=Lc(i,s.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),f=h instanceof Float64Array?h:new Float64Array(h),p=d.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw r();if(d[0]===0)throw e();if(m===0||m>20)throw r();if(f[0]===0)throw e();if(d[0]!==1){for(let w=0;w<m;w+=1)f[w]/=d[0];for(let w=1;w<p;w+=1)d[w]/=d[0]}const v=t(s,l,a,a);v.channelCount=a,v.channelCountMode=o,v.channelInterpretation=c;const y=32,S=[],C=[],b=[];for(let w=0;w<a;w+=1){S.push(0);const A=new Float32Array(y),O=new Float32Array(y);A.fill(0),O.fill(0),C.push(A),b.push(O)}v.onaudioprocess=w=>{const A=w.inputBuffer,O=w.outputBuffer,I=A.numberOfChannels;for(let k=0;k<I;k+=1){const D=A.getChannelData(k),P=O.getChannelData(k);S[k]=Uc(d,p,f,m,g,C[k],b[k],S[k],y,D,P)}};const T=s.sampleRate/2;return bn({get bufferSize(){return l},get channelCount(){return v.channelCount},set channelCount(w){v.channelCount=w},get channelCountMode(){return v.channelCountMode},set channelCountMode(w){v.channelCountMode=w},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(w){v.channelInterpretation=w},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...w){return v.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return v.dispatchEvent(w[0])},getFrequencyResponse(w,A,O){if(w.length!==A.length||A.length!==O.length)throw n();const I=w.length;for(let k=0;k<I;k+=1){const D=-Math.PI*(w[k]/T),P=[Math.cos(D),Math.sin(D)],U=ro(f,P),R=ro(d,P),$=Hp(U,R);A[k]=Math.sqrt($[0]*$[0]+$[1]*$[1]),O[k]=Math.atan2($[1],$[0])}},removeEventListener(...w){return v.removeEventListener(w[0],w[1],w[2])}},v)},Kp=(n,e)=>n.createMediaElementSource(e.mediaElement),Qp=(n,e)=>{const t=n.createMediaStreamDestination();return Te(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Zp=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,a)=>i.id<a.id?-1:i.id>a.id?1:0);const r=t.slice(0,1),s=n.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},Jp=(n,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=t.createMediaStreamSource(s);if(r.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},ef=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,tf=(n,e,t,r,s,i)=>(a,o)=>{const c=a.createOscillator();return Te(c,o),ge(c,o,"detune"),ge(c,o,"frequency"),o.periodicWave!==void 0?c.setPeriodicWave(o.periodicWave):le(c,o,"type"),e(t,()=>t(a))||$i(c),e(r,()=>r(a))||i(c,a),e(s,()=>s(a))||Ui(c),n(a,c),c},nf=n=>(e,t)=>{const r=e.createPanner();return r.orientationX===void 0?n(e,t):(Te(r,t),ge(r,t,"orientationX"),ge(r,t,"orientationY"),ge(r,t,"orientationZ"),ge(r,t,"positionX"),ge(r,t,"positionY"),ge(r,t,"positionZ"),le(r,t,"coneInnerAngle"),le(r,t,"coneOuterAngle"),le(r,t,"coneOuterGain"),le(r,t,"distanceModel"),le(r,t,"maxDistance"),le(r,t,"panningModel"),le(r,t,"refDistance"),le(r,t,"rolloffFactor"),r)},rf=(n,e,t,r,s,i,a,o,c,u)=>(h,{coneInnerAngle:l,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:v,orientationZ:y,panningModel:S,positionX:C,positionY:b,positionZ:T,refDistance:x,rolloffFactor:w,...A})=>{const O=h.createPanner();if(A.channelCount>2||A.channelCountMode==="max")throw a();Te(O,A);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=t(h,{...I,channelInterpretation:"speakers",numberOfInputs:6}),D=r(h,{...A,gain:1}),P=r(h,{...I,gain:1}),U=r(h,{...I,gain:0}),R=r(h,{...I,gain:0}),$=r(h,{...I,gain:0}),G=r(h,{...I,gain:0}),V=r(h,{...I,gain:0}),E=s(h,256,6,1),N=i(h,{...I,curve:new Float32Array([1,1]),oversample:"none"});let q=[g,v,y],Y=[C,b,T];const K=new Float32Array(1);E.onaudioprocess=({inputBuffer:L})=>{const Se=[c(L,K,0),c(L,K,1),c(L,K,2)];Se.some((de,xe)=>de!==q[xe])&&(O.setOrientation(...Se),q=Se);const Ae=[c(L,K,3),c(L,K,4),c(L,K,5)];Ae.some((de,xe)=>de!==Y[xe])&&(O.setPosition(...Ae),Y=Ae)},Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});const j={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(L){if(L>2)throw a();D.channelCount=L,O.channelCount=L},get channelCountMode(){return O.channelCountMode},set channelCountMode(L){if(L==="max")throw a();D.channelCountMode=L,O.channelCountMode=L},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(L){D.channelInterpretation=L,O.channelInterpretation=L},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(L){O.coneInnerAngle=L},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(L){O.coneOuterAngle=L},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(L){if(L<0||L>1)throw e();O.coneOuterGain=L},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(L){O.distanceModel=L},get inputs(){return[D]},get maxDistance(){return O.maxDistance},set maxDistance(L){if(L<0)throw new RangeError;O.maxDistance=L},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return P.gain},get orientationY(){return U.gain},get orientationZ(){return R.gain},get panningModel(){return O.panningModel},set panningModel(L){O.panningModel=L},get positionX(){return $.gain},get positionY(){return G.gain},get positionZ(){return V.gain},get refDistance(){return O.refDistance},set refDistance(L){if(L<0)throw new RangeError;O.refDistance=L},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(L){if(L<0)throw new RangeError;O.rolloffFactor=L},addEventListener(...L){return D.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return D.dispatchEvent(L[0])},removeEventListener(...L){return D.removeEventListener(L[0],L[1],L[2])}};l!==j.coneInnerAngle&&(j.coneInnerAngle=l),d!==j.coneOuterAngle&&(j.coneOuterAngle=d),f!==j.coneOuterGain&&(j.coneOuterGain=f),p!==j.distanceModel&&(j.distanceModel=p),m!==j.maxDistance&&(j.maxDistance=m),g!==j.orientationX.value&&(j.orientationX.value=g),v!==j.orientationY.value&&(j.orientationY.value=v),y!==j.orientationZ.value&&(j.orientationZ.value=y),S!==j.panningModel&&(j.panningModel=S),C!==j.positionX.value&&(j.positionX.value=C),b!==j.positionY.value&&(j.positionY.value=b),T!==j.positionZ.value&&(j.positionZ.value=T),x!==j.refDistance&&(j.refDistance=x),w!==j.rolloffFactor&&(j.rolloffFactor=w),(q[0]!==1||q[1]!==0||q[2]!==0)&&O.setOrientation(...q),(Y[0]!==0||Y[1]!==0||Y[2]!==0)&&O.setPosition(...Y);const X=()=>{D.connect(O),n(D,N,0,0),N.connect(P).connect(k,0,0),N.connect(U).connect(k,0,1),N.connect(R).connect(k,0,2),N.connect($).connect(k,0,3),N.connect(G).connect(k,0,4),N.connect(V).connect(k,0,5),k.connect(E).connect(h.destination)},re=()=>{D.disconnect(O),o(D,N,0,0),N.disconnect(P),P.disconnect(k),N.disconnect(U),U.disconnect(k),N.disconnect(R),R.disconnect(k),N.disconnect($),$.disconnect(k),N.disconnect(G),G.disconnect(k),N.disconnect(V),V.disconnect(k),k.disconnect(E),E.disconnect(h.destination)};return u(bn(j,O),X,re)},sf=n=>(e,{disableNormalization:t,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),a=s instanceof Float32Array?s:new Float32Array(s),o=e.createPeriodicWave(a,i,{disableNormalization:t});if(Array.from(r).length<2)throw n();return o},or=(n,e,t,r)=>n.createScriptProcessor(e,t,r),af=(n,e)=>(t,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,r);const i=t.createStereoPanner();return Te(i,r),ge(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:a=>{if(a!==s)throw e()}}),i},of=(n,e,t,r,s,i)=>{const o=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h={...u,oversample:"none"},l=(p,m,g,v)=>{const y=new Float32Array(16385),S=new Float32Array(16385);for(let A=0;A<16385;A+=1){const O=A/16384*c;y[A]=Math.cos(O),S[A]=Math.sin(O)}const C=t(p,{...u,gain:0}),b=r(p,{...h,curve:y}),T=r(p,{...h,curve:o}),x=t(p,{...u,gain:0}),w=r(p,{...h,curve:S});return{connectGraph(){m.connect(C),m.connect(T.inputs===void 0?T:T.inputs[0]),m.connect(x),T.connect(g),g.connect(b.inputs===void 0?b:b.inputs[0]),g.connect(w.inputs===void 0?w:w.inputs[0]),b.connect(C.gain),w.connect(x.gain),C.connect(v,0,0),x.connect(v,0,1)},disconnectGraph(){m.disconnect(C),m.disconnect(T.inputs===void 0?T:T.inputs[0]),m.disconnect(x),T.disconnect(g),g.disconnect(b.inputs===void 0?b:b.inputs[0]),g.disconnect(w.inputs===void 0?w:w.inputs[0]),b.disconnect(C.gain),w.disconnect(x.gain),C.disconnect(v,0,0),x.disconnect(v,0,1)}}},d=(p,m,g,v)=>{const y=new Float32Array(16385),S=new Float32Array(16385),C=new Float32Array(16385),b=new Float32Array(16385),T=Math.floor(16385/2);for(let $=0;$<16385;$+=1)if($>T){const G=($-T)/(16384-T)*c;y[$]=Math.cos(G),S[$]=Math.sin(G),C[$]=0,b[$]=1}else{const G=$/(16384-T)*c;y[$]=1,S[$]=0,C[$]=Math.cos(G),b[$]=Math.sin(G)}const x=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=t(p,{...u,gain:0}),A=r(p,{...h,curve:y}),O=t(p,{...u,gain:0}),I=r(p,{...h,curve:S}),k=r(p,{...h,curve:o}),D=t(p,{...u,gain:0}),P=r(p,{...h,curve:C}),U=t(p,{...u,gain:0}),R=r(p,{...h,curve:b});return{connectGraph(){m.connect(x),m.connect(k.inputs===void 0?k:k.inputs[0]),x.connect(w,0),x.connect(O,0),x.connect(D,1),x.connect(U,1),k.connect(g),g.connect(A.inputs===void 0?A:A.inputs[0]),g.connect(I.inputs===void 0?I:I.inputs[0]),g.connect(P.inputs===void 0?P:P.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),A.connect(w.gain),I.connect(O.gain),P.connect(D.gain),R.connect(U.gain),w.connect(v,0,0),D.connect(v,0,0),O.connect(v,0,1),U.connect(v,0,1)},disconnectGraph(){m.disconnect(x),m.disconnect(k.inputs===void 0?k:k.inputs[0]),x.disconnect(w,0),x.disconnect(O,0),x.disconnect(D,1),x.disconnect(U,1),k.disconnect(g),g.disconnect(A.inputs===void 0?A:A.inputs[0]),g.disconnect(I.inputs===void 0?I:I.inputs[0]),g.disconnect(P.inputs===void 0?P:P.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),A.disconnect(w.gain),I.disconnect(O.gain),P.disconnect(D.gain),R.disconnect(U.gain),w.disconnect(v,0,0),D.disconnect(v,0,0),O.disconnect(v,0,1),U.disconnect(v,0,1)}}},f=(p,m,g,v,y)=>{if(m===1)return l(p,g,v,y);if(m===2)return d(p,g,v,y);throw s()};return(p,{channelCount:m,channelCountMode:g,pan:v,...y})=>{if(g==="max")throw s();const S=n(p,{...y,channelCount:1,channelCountMode:g,numberOfInputs:2}),C=t(p,{...y,channelCount:m,channelCountMode:g,gain:1}),b=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:T,disconnectGraph:x}=f(p,m,C,b,S);Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"maxValue",{get:()=>1}),Object.defineProperty(b.gain,"minValue",{get:()=>-1});const w={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(k){C.channelCount!==k&&(A&&x(),{connectGraph:T,disconnectGraph:x}=f(p,k,C,b,S),A&&T()),C.channelCount=k},get channelCountMode(){return C.channelCountMode},set channelCountMode(k){if(k==="clamped-max"||k==="max")throw s();C.channelCountMode=k},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(k){C.channelInterpretation=k},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get pan(){return b.gain},addEventListener(...k){return C.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return C.dispatchEvent(k[0])},removeEventListener(...k){return C.removeEventListener(k[0],k[1],k[2])}};let A=!1;const O=()=>{T(),A=!0},I=()=>{x(),A=!1};return i(bn(w,S),O,I)}},cf=(n,e,t,r,s,i,a)=>(o,c)=>{const u=o.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&o.createGain().gain.automationRate===void 0)return t(o,c);Te(u,c);const h=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(h!==null&&h.length<2)throw e();le(u,{curve:h},"curve"),le(u,c,"oversample");let l=null,d=!1;return a(u,"curve",m=>()=>m.call(u),m=>g=>(m.call(u,g),d&&(r(g)&&l===null?l=n(o,u):!r(g)&&l!==null&&(l(),l=null)),g)),s(u,()=>{d=!0,r(u.curve)&&(l=n(o,u))},()=>{d=!1,l!==null&&(l(),l=null)})},uf=(n,e,t,r,s)=>(i,{curve:a,oversample:o,...c})=>{const u=i.createWaveShaper(),h=i.createWaveShaper();Te(u,c),Te(h,c);const l=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1}),f=t(i,{...c,gain:1}),p=t(i,{...c,gain:-1});let m=null,g=!1,v=null;const y={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(b){l.channelCount=b,d.channelCount=b,u.channelCount=b,f.channelCount=b,h.channelCount=b,p.channelCount=b},get channelCountMode(){return u.channelCountMode},set channelCountMode(b){l.channelCountMode=b,d.channelCountMode=b,u.channelCountMode=b,f.channelCountMode=b,h.channelCountMode=b,p.channelCountMode=b},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(b){l.channelInterpretation=b,d.channelInterpretation=b,u.channelInterpretation=b,f.channelInterpretation=b,h.channelInterpretation=b,p.channelInterpretation=b},get context(){return u.context},get curve(){return v},set curve(b){if(b!==null&&b.length<2)throw e();if(b===null)u.curve=b,h.curve=b;else{const T=b.length,x=new Float32Array(T+2-T%2),w=new Float32Array(T+2-T%2);x[0]=b[0],w[0]=-b[T-1];const A=Math.ceil((T+1)/2),O=(T+1)/2-1;for(let I=1;I<A;I+=1){const k=I/A*O,D=Math.floor(k),P=Math.ceil(k);x[I]=D===P?b[D]:(1-(k-D))*b[D]+(1-(P-k))*b[P],w[I]=D===P?-b[T-1-D]:-((1-(k-D))*b[T-1-D])-(1-(P-k))*b[T-1-P]}x[A]=T%2===1?b[A-1]:(b[A-2]+b[A-1])/2,u.curve=x,h.curve=w}v=b,g&&(r(v)&&m===null?m=n(i,l):m!==null&&(m(),m=null))},get inputs(){return[l]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(b){u.oversample=b,h.oversample=b},addEventListener(...b){return l.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return l.dispatchEvent(b[0])},removeEventListener(...b){return l.removeEventListener(b[0],b[1],b[2])}};a!==null&&(y.curve=a instanceof Float32Array?a:new Float32Array(a)),o!==y.oversample&&(y.oversample=o);const S=()=>{l.connect(u).connect(f),l.connect(d).connect(h).connect(p).connect(f),g=!0,r(v)&&(m=n(i,l))},C=()=>{l.disconnect(u),u.disconnect(f),l.disconnect(d),d.disconnect(h),h.disconnect(p),p.disconnect(f),g=!1,m!==null&&(m(),m=null)};return s(bn(y,f),S,C)},Ee=()=>new DOMException("","NotSupportedError"),hf={numberOfChannels:1},lf=(n,e,t,r,s)=>class extends n{constructor(a,o,c){let u;if(typeof a=="number"&&o!==void 0&&c!==void 0)u={length:o,numberOfChannels:a,sampleRate:c};else if(typeof a=="object")u=a;else throw new Error("The given parameters are not valid.");const{length:h,numberOfChannels:l,sampleRate:d}={...hf,...u},f=r(l,h,d);e(Ln,()=>Ln(f))||f.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(f,l),this._length=h,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Mc(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}},df={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},pf=(n,e,t,r,s,i,a)=>class extends n{constructor(c,u){const h=s(c),l={...df,...u},d=t(h,l),f=i(h),p=f?r():null,m=c.sampleRate/2;super(c,!1,d,p),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,m,-m),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&l.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeOscillatorNode.onended=u;const h=this._nativeOscillatorNode.onended;this._onended=h!==null&&h===u?c:h}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){hn(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),ft(this)&&rr(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},ff=(n,e,t,r,s)=>()=>{const i=new WeakMap;let a=null,o=null,c=null;const u=async(h,l)=>{let d=t(h);const f=ke(d,l);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:a===null?void 0:a,type:d.type};d=e(l,p),o!==null&&d.start(o),c!==null&&d.stop(c)}return i.set(l,d),f?(await n(l,h.detune,d.detune),await n(l,h.frequency,d.frequency)):(await r(l,h.detune,d.detune),await r(l,h.frequency,d.frequency)),await s(h,l,d),d};return{set periodicWave(h){a=h},set start(h){o=h},set stop(h){c=h},render(h,l){const d=i.get(l);return d!==void 0?Promise.resolve(d):u(h,l)}}},mf={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},gf=(n,e,t,r,s,i,a)=>class extends n{constructor(c,u){const h=s(c),l={...mf,...u},d=t(h,l),f=i(h),p=f?r():null;super(c,!1,d,p),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Ie,Ne),this._orientationY=e(this,f,d.orientationY,Ie,Ne),this._orientationZ=e(this,f,d.orientationZ,Ie,Ne),this._positionX=e(this,f,d.positionX,Ie,Ne),this._positionY=e(this,f,d.positionY,Ie,Ne),this._positionZ=e(this,f,d.positionZ,Ie,Ne),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},vf=(n,e,t,r,s,i,a,o,c,u)=>()=>{const h=new WeakMap;let l=null;const d=async(f,p)=>{let m=null,g=i(f);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},y={...v,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},S=ke(g,p);if("bufferSize"in g)m=r(p,{...v,gain:1});else if(!S){const C={...y,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=s(p,C)}if(h.set(p,m===null?g:m),m!==null){if(l===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new a(6,f.context.length,p.sampleRate),k=e(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(I.destination),l=(async()=>{const D=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(P,U)=>{const R=t(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U===0?1:0});return await o(I,P,R.offset),R}));for(let P=0;P<6;P+=1)D[P].connect(k,0,P),D[P].start(0);return u(I)})()}const C=await l,b=r(p,{...v,gain:1});await c(f,p,b);const T=[];for(let I=0;I<C.numberOfChannels;I+=1)T.push(C.getChannelData(I));let x=[T[0][0],T[1][0],T[2][0]],w=[T[3][0],T[4][0],T[5][0]],A=r(p,{...v,gain:1}),O=s(p,{...y,orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:w[0],positionY:w[1],positionZ:w[2]});b.connect(A).connect(O.inputs[0]),O.connect(m);for(let I=128;I<C.length;I+=128){const k=[T[0][I],T[1][I],T[2][I]],D=[T[3][I],T[4][I],T[5][I]];if(k.some((P,U)=>P!==x[U])||D.some((P,U)=>P!==w[U])){x=k,w=D;const P=I/p.sampleRate;A.gain.setValueAtTime(0,P),A=r(p,{...v,gain:0}),O=s(p,{...y,orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:w[0],positionY:w[1],positionZ:w[2]}),A.gain.setValueAtTime(1,P),b.connect(A).connect(O.inputs[0]),O.connect(m)}}return m}return S?(await n(p,f.orientationX,g.orientationX),await n(p,f.orientationY,g.orientationY),await n(p,f.orientationZ,g.orientationZ),await n(p,f.positionX,g.positionX),await n(p,f.positionY,g.positionY),await n(p,f.positionZ,g.positionZ)):(await o(p,f.orientationX,g.orientationX),await o(p,f.orientationY,g.orientationY),await o(p,f.orientationZ,g.orientationZ),await o(p,f.positionX,g.positionX),await o(p,f.positionY,g.positionY),await o(p,f.positionZ,g.positionZ)),yn(g)?await c(f,p,g.inputs[0]):await c(f,p,g),g};return{render(f,p){const m=h.get(p);return m!==void 0?Promise.resolve(m):d(f,p)}}},_f={disableNormalization:!1},yf=(n,e,t,r)=>class Bc{constructor(i,a){const o=e(i),c=r({..._f,...a}),u=n(o,c);return t.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Bc.prototype||t.has(i)}},bf=(n,e)=>(t,r,s)=>(n(r).replay(s),e(r,t,s)),xf=(n,e,t)=>async(r,s,i)=>{const a=n(r);await Promise.all(a.activeInputs.map((o,c)=>Array.from(o).map(async([u,h])=>{const d=await e(u).render(u,s),f=r.context.destination;!t(u)&&(r!==f||!t(r))&&d.connect(i,h,c)})).reduce((o,c)=>[...o,...c],[]))},wf=(n,e,t)=>async(r,s,i)=>{const a=e(r);await Promise.all(Array.from(a.activeInputs).map(async([o,c])=>{const h=await n(o).render(o,s);t(o)||h.connect(i,c)}))},Tf=(n,e,t,r)=>s=>n(Ln,()=>Ln(s))?Promise.resolve(n(r,r)).then(i=>{if(!i){const a=t(s,512,0,1);s.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>s.currentTime,a.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const a=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=o=>{a.disconnect(),i(o.renderedBuffer)},a.connect(s.destination),s.startRendering()}),Sf=n=>(e,t)=>{n.set(e,t)},Cf=n=>(e,t)=>n.set(e,t),Af=(n,e,t,r,s,i,a,o)=>(c,u)=>t(c).render(c,u).then(()=>Promise.all(Array.from(r(u)).map(h=>t(h).render(h,u)))).then(()=>s(u)).then(h=>(typeof h.copyFromChannel!="function"?(a(h),Ni(h)):e(i,()=>i(h))||o(h),n.add(h),h)),Of={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},kf=(n,e,t,r,s,i)=>class extends n{constructor(o,c){const u=s(o),h={...Of,...c},l=t(u,h),d=i(u),f=d?r():null;super(o,!1,l,f),this._pan=e(this,d,l.pan)}get pan(){return this._pan}},If=(n,e,t,r,s)=>()=>{const i=new WeakMap,a=async(o,c)=>{let u=t(o);const h=ke(u,c);if(!h){const l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(c,l)}return i.set(c,u),h?await n(c,o.pan,u.pan):await r(c,o.pan,u.pan),yn(u)?await s(o,c,u.inputs[0]):await s(o,c,u),u};return{render(o,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):a(o,c)}}},Df=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},Ef=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(t);let i=!1,a=!1;try{await r.audioWorklet.addModule(s);const o=new n(r,"a",{numberOfOutputs:0}),c=r.createOscillator();o.port.onmessage=()=>i=!0,o.onprocessorerror=()=>a=!0,c.connect(o),c.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(s)}return i&&!a},Mf=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{t.oncomplete=()=>{r.disconnect(),s(t.currentTime!==0)},t.startRendering()})},Pf=()=>new DOMException("","UnknownError"),Nf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Rf=(n,e,t,r,s,i,a)=>class extends n{constructor(c,u){const h=s(c),l={...Nf,...u},d=t(h,l),p=i(h)?r():null;super(c,!0,d,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},Ff=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!ke(o,a)){const u={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=n(a,u)}return r.set(a,o),yn(o)?await t(i,a,o.inputs[0]):await t(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},$f=()=>typeof window>"u"?null:window,Uf=(n,e)=>t=>{t.copyFromChannel=(r,s,i=0)=>{const a=n(i),o=n(s);if(o>=t.numberOfChannels)throw e();const c=t.length,u=t.getChannelData(o),h=r.length;for(let l=a<0?-a:0;l+a<c&&l<h;l+=1)r[l]=u[l+a]},t.copyToChannel=(r,s,i=0)=>{const a=n(i),o=n(s);if(o>=t.numberOfChannels)throw e();const c=t.length,u=t.getChannelData(o),h=r.length;for(let l=a<0?-a:0;l+a<c&&l<h;l+=1)u[l+a]=r[l]}},Lf=n=>e=>{e.copyFromChannel=(t=>(r,s,i=0)=>{const a=n(i),o=n(s);if(a<e.length)return t.call(e,r,o,a)})(e.copyFromChannel),e.copyToChannel=(t=>(r,s,i=0)=>{const a=n(i),o=n(s);if(a<e.length)return t.call(e,r,o,a)})(e.copyToChannel)},Vf=n=>(e,t)=>{const r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),n(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},qf=(n,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const s=t.createBufferSource();e(r,()=>{const o=r.numberOfInputs;for(let c=0;c<o;c+=1)s.connect(r,0,c)},()=>s.disconnect(r))},jc=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),Wc=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},cr=(n,e,t,r)=>{let s=n;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:a}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(n,e,{get:t(i),set:r(a)})},Bf=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),jf=n=>({...n,channelCount:n.numberOfOutputs}),Wf=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Gc=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;Gc(n,e,t+1e-7)}},Gf=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},zf=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Hf=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Li=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},zc=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Vi=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Xf=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},Yf=n=>{n.start=(e=>(t=0,r=0,s)=>{const i=n.buffer,a=i===null?r:Math.min(i.duration,r);i!==null&&a>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,a,s)})(n.start)},Hc=(n,e)=>{const t=e.createGain();n.connect(t);const r=(s=>()=>{s.call(n,t),n.removeEventListener("ended",r)})(n.disconnect);n.addEventListener("ended",r),bn(n,t),n.stop=(s=>{let i=!1;return(a=0)=>{if(i)try{s.call(n,a)}catch{t.gain.setValueAtTime(0,a)}else s.call(n,a),i=!0}})(n.stop)},xn=(n,e)=>t=>{const r={value:n};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},Kf=ml(Gt),Qf=xl(Gt),Zf=Pd(Rs),Xc=new WeakMap,Jf=Qd(Xc),Ye=ud(new Map,new WeakMap),tt=$f(),Yc=Op(Ye,st),qi=Kd(De),Oe=xf(De,qi,Lt),em=Al(Yc,he,Oe),ce=ep(Ns),gt=ef(tt),ie=vp(gt),Kc=new WeakMap,Qc=jd(xn),ur=Ep(tt),Bi=pp(ur),ji=fp(tt),Zc=mp(tt),Vn=Pp(tt),ye=Ql(gl(Cc),bl(Kf,Qf,as,Zf,os,De,Jf,nr,he,Gt,ft,Lt,Dr),Ye,cp(fi,os,De,he,Un,ft),st,Fs,Ee,Id(as,fi,De,he,Un,ce,ft,ie),Fd(Kc,De,He),Qc,ce,Bi,ji,Zc,ie,Vn),tm=Cl(ye,em,st,Yc,ce,ie),Wi=new WeakSet,so=kp(tt),Jc=wd(new Uint32Array(1)),Gi=Uf(Jc,st),zi=Lf(Jc),nm=kl(Wi,Ye,Ee,so,gt,Df(so),Gi,zi),$s=wl(Fe),eu=wf(qi,sr,Lt),it=gd(eu),wn=Dp($s,Ye,Gf,zf,Hf,Li,zc,Vi,Yf,Vf(cr),Hc),at=bf(Zd(sr),eu),rm=El(it,wn,he,at,Oe),Ke=Zl(vl(Ac),Kc,Pi,Jl,ul,hl,ll,dl,pl,li,Tc,ur,Gc),sm=Dl(ye,rm,Ke,Ce,wn,ce,ie,xn),im=Vl(ye,ql,st,Ce,Mp(Fe,cr),ce,ie,Oe),am=cd(it,Vc,he,at,Oe),zt=Cf(Xc),om=od(ye,Ke,am,Fs,Vc,ce,ie,zt),Et=Cp(Gt,ji),cm=qf(Ce,Et),Mt=Vp(ur,cm),um=dd(Mt,he,Oe),hm=ld(ye,um,Mt,ce,ie),lm=md(ar,he,Oe),dm=fd(ye,lm,ar,ce,ie,jf),pm=jp($s,wn,Fe,Et),Tn=Bp($s,Ye,pm,Li,Vi),fm=xd(it,Tn,he,at,Oe),mm=bd(ye,Ke,fm,Tn,ce,ie,xn),tu=Wp(Ee,cr),gm=Cd(tu,he,Oe),vm=Sd(ye,gm,tu,ce,ie,zt),_m=Md(it,qc,he,at,Oe),ym=Ed(ye,Ke,_m,qc,ce,ie,zt),nu=Gp(Ee),bm=Vd(it,nu,he,at,Oe),xm=Ld(ye,Ke,bm,nu,Ee,ce,ie,zt),wm=Xd(it,Fe,he,at,Oe),Tm=Hd(ye,Ke,wm,Fe,ce,ie),Sm=Yp(Fs,Ce,or,Ee),Us=Tf(Ye,Fe,or,Mf(Fe,gt)),Cm=op(wn,he,gt,Oe,Us),Am=zp(Sm),Om=ip(ye,Am,Cm,ce,ie,zt),km=Bl(Ke,Mt,Tn,or,Ee,jc,ie,cr),ru=new WeakMap,Im=Sp(im,km,Qc,ie,ru,xn),su=tf($s,Ye,Li,zc,Vi,Hc),Dm=ff(it,su,he,at,Oe),Em=pf(ye,Ke,su,Dm,ce,ie,xn),iu=_d(wn),Mm=uf(iu,Ce,Fe,Wc,Et),Ls=cf(iu,Ce,Mm,Wc,Et,ur,cr),Pm=rf(as,Ce,Mt,Fe,or,Ls,Ee,os,jc,Et),au=nf(Pm),Nm=vf(it,Mt,Tn,Fe,au,he,gt,at,Oe,Us),Rm=gf(ye,Ke,au,Nm,ce,ie,zt),Fm=sf(st),$m=yf(Fm,ce,new WeakSet,Wf),Um=of(Mt,ar,Fe,Ls,Ee,Et),ou=af(Um,Ee),Lm=If(it,ou,he,at,Oe),Vm=kf(ye,Ke,ou,Lm,ce,ie),qm=Ff(Ls,he,Oe),Bm=Rf(ye,Ce,Ls,qm,ce,ie,zt),cu=_p(tt),Hi=Wd(tt),uu=new WeakMap,jm=tp(uu,gt),Wm=cu?yl(Ye,Ee,Bd(tt),Hi,Gd(fl),ce,jm,ie,Vn,new WeakMap,new WeakMap,Ef(Vn,gt),tt):void 0,Gm=gp(Bi,ie),zm=kd(Wi,Ye,Od,qd,new WeakSet,ce,Gm,ss,Ln,Gi,zi),hu=id(Wm,tm,nm,sm,om,hm,dm,mm,vm,zm,ym,xm,Tm,Om,Im,Em,Rm,$m,Vm,Bm),Hm=yp(ye,Kp,ce,ie),Xm=xp(ye,Qp,ce,ie),Ym=wp(ye,Zp,ce,ie),Km=Jp(Ce,ie),Qm=Tp(ye,Km,ce),Zm=Ll(hu,Ce,Ee,Pf,Hm,Xm,Ym,Qm,ur),Xi=np(ru),Jm=Tl(Xi),lu=vd(st),eg=Nd(Xi),du=$d(st),pu=new WeakMap,tg=Yd(pu,He),ng=Lp(lu,st,Ce,Mt,ar,Tn,Fe,or,Ee,du,Hi,tg,Et),rg=Rp(Ce,ng,Fe,Ee,Et),sg=sd(it,lu,wn,Mt,ar,Tn,Fe,eg,du,Hi,he,Vn,gt,at,Oe,Us),ig=Jd(uu),ag=Sf(pu),io=cu?td(Jm,ye,Ke,sg,rg,De,ig,ce,ie,Vn,Bf,ag,Xf,xn):void 0,og=Ad(Ee,gt),cg=Af(Wi,Ye,qi,Xi,Us,ss,Gi,zi),ug=lf(hu,Ye,Ce,og,cg),hg=up(Ns,Bi),lg=hp(Mi,ji),dg=lp(Pi,Zc),pg=dp(Ns,ie);function H(n,e){if(!n)throw new Error(e)}function St(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function fu(n){!n.isOffline&&n.state!=="running"&&gu('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let mu=console;function fg(...n){mu.log(...n)}function gu(...n){mu.warn(...n)}function Be(n){return typeof n>"u"}function Z(n){return!Be(n)}function mg(n){return typeof n=="function"}function Ct(n){return typeof n=="number"}function $t(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function gg(n){return typeof n=="boolean"}function ze(n){return Array.isArray(n)}function nt(n){return typeof n=="string"}function xr(n){return nt(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function vg(n){return new Zm(n)}function _g(n,e,t){return new ug(n,e,t)}const Ut=typeof self=="object"?self:null,yg=Ut&&(Ut.hasOwnProperty("AudioContext")||Ut.hasOwnProperty("webkitAudioContext"));function bg(n,e,t){return H(Z(io),"This node only works in a secure context (https or localhost)"),new io(n,e,t)}function Qe(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(i=(s<3?a(i):s>3?a(e,t,i):a(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function be(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(l){a(l)}}function c(h){try{u(r.throw(h))}catch(l){a(l)}}function u(h){h.done?i(h.value):s(h.value).then(o,c)}u((r=r.apply(n,e||[])).next())})}class xg{constructor(e,t,r){this._callback=e,this._type=t,this._updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Vt(n){return dg(n)}function Tt(n){return lg(n)}function Er(n){return pg(n)}function Jt(n){return hg(n)}function vu(n){return n instanceof AudioBuffer}function wg(n,e){return n==="value"||Vt(e)||Tt(e)||vu(e)}function nn(n,...e){if(!e.length)return n;const t=e.shift();if($t(n)&&$t(t))for(const r in t)wg(r,t[r])?n[r]=t[r]:$t(t[r])?(n[r]||Object.assign(n,{[r]:{}}),nn(n[r],t[r])):Object.assign(n,{[r]:t[r]});return nn(n,...e)}function Tg(n,e){return n.length===e.length&&n.every((t,r)=>e[r]===t)}function M(n,e,t=[],r){const s={},i=Array.from(e);if($t(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(o=>Reflect.has(n,o))||(nn(s,{[r]:i[0]}),t.splice(t.indexOf(r),1),i.shift())),i.length===1&&$t(i[0]))nn(s,i[0]);else for(let a=0;a<t.length;a++)Z(i[a])&&(s[t[a]]=i[a]);return nn(n,s)}function Sg(n){return n.constructor.getDefaults()}function rn(n,e){return Be(n)?e:n}function ao(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class vt{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Ut&&this.toString()===Ut.TONE_DEBUG_CLASS)&&fg(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}vt.version=wc;const Yi=1e-6;function ls(n,e){return n>e+Yi}function yi(n,e){return ls(n,e)||We(n,e)}function _u(n,e){return n+Yi<e}function We(n,e){return Math.abs(n-e)<Yi}function Cg(n,e,t){return Math.max(Math.min(n,t),e)}class ot extends vt{constructor(){super(),this.name="Timeline",this._timeline=[];const e=M(ot.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(H(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];H(yi(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(We(this._timeline[t].time,e)){for(let r=t;r>=0&&We(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&yi(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][t]<=e)return s-1;for(;r<i;){let a=Math.floor(r+(i-r)/2);const o=this._timeline[a],c=this._timeline[a+1];if(We(o[t],e)){for(let u=a;u<this._timeline.length;u++){const h=this._timeline[u];if(We(h[t],e))a=u;else break}return a}else{if(_u(o[t],e)&&ls(c[t],e))return a;ls(o[t],e)?i=a:r=a+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){const r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let s=this._search(e),i=this._search(t);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===t&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){const r=this._search(e);if(r!==-1&&We(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&We(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{t(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const yu=[];function Vs(n){yu.push(n)}function Ag(n){yu.forEach(e=>e(n))}const bu=[];function qs(n){bu.push(n)}function Og(n){bu.forEach(e=>e(n))}class hr extends vt{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(s=>{Be(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(t)}),this}once(e,t){const r=(...s)=>{t(...s),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(s=>{if(Be(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Be(t))this._events[e]=[];else{const i=this._events[e];for(let a=i.length-1;a>=0;a--)i[a]===t&&i.splice(a,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const r=Object.getOwnPropertyDescriptor(hr.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class xu extends hr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class lr extends xu{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new ot,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=M(lr.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=vg({latencyHint:e.latencyHint}),this._ticker=new xg(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Ag(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return H(Jt(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return H(Jt(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return H(Jt(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){H(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){H(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){H(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){H(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return bg(this.rawContext,e,t)}addAudioWorkletModule(e,t){return be(this,void 0,void 0,function*(){H(Z(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return be(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,nt(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Jt(this._context)?this._context.resume():Promise.resolve()}close(){return be(this,void 0,void 0,function*(){Jt(this._context)&&(yield this._context.close()),this._initialized&&Og(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=t,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+t})};return s(),r}}class kg extends xu{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return be(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function J(n,e){ze(e)?e.forEach(t=>J(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function Ki(n,e){ze(e)?e.forEach(t=>Ki(n,t)):Object.defineProperty(n,e,{writable:!0})}const se=()=>{};class oe extends vt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=se;const e=M(oe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&vu(e.url)||e.url instanceof oe?this.set(e.url):nt(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:se,onload:se,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Ve().sampleRate}set(e){return e instanceof oe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return be(this,void 0,void 0,function*(){const t=oe.load(e).then(r=>{this.set(r),this.onload(this)});oe.downloads.push(t);try{yield t}finally{const r=oe.downloads.indexOf(t);oe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=ze(e)&&e[0].length>0,r=t?e.length:1,s=t?e[0].length:e.length,i=Ve(),a=i.createBuffer(r,s,i.sampleRate),o=!t&&r===1?[e]:e;for(let c=0;c<r;c++)a.copyToChannel(o[c],c);return this._buffer=a,this}toMono(e){if(Ct(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let a=0;a<i.length;a++)t[a]+=i[a]}t=t.map(s=>s/r),this.fromArray(t)}return this}toArray(e){if(Ct(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let r=0;r<this.numberOfChannels;r++)t[r]=this.getChannelData(r);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){const r=Math.floor(e*this.sampleRate),s=Math.floor(t*this.sampleRate);H(r<s,"The start time must be less than the end time");const i=s-r,a=Ve().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)a.copyToChannel(this.getChannelData(o).subarray(r,s),o);return new oe(a)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new oe().fromArray(e)}static fromUrl(e){return be(this,void 0,void 0,function*(){return yield new oe().load(e)})}static load(e){return be(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const o=t[1].split("|");let c=o[0];for(const u of o)if(oe.supportsType(u)){c=u;break}e=e.replace(t[0],c)}const r=oe.baseUrl===""||oe.baseUrl.endsWith("/")?oe.baseUrl:oe.baseUrl+"/",s=yield fetch(r+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const i=yield s.arrayBuffer();return yield Ve().decodeAudioData(i)})}static supportsType(e){const t=e.split("."),r=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return be(this,void 0,void 0,function*(){for(yield Promise.resolve();oe.downloads.length;)yield oe.downloads[0]})}}oe.baseUrl="";oe.downloads=[];class Qi extends lr{constructor(){super({clockSource:"offline",context:Er(arguments[0])?arguments[0]:_g(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Er(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Er(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return be(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(e=!0){return be(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new oe(t)})}close(){return Promise.resolve()}}const wu=new kg;let sn=wu;function Ve(){return sn===wu&&yg&&Ig(new lr),sn}function Ig(n){Jt(n)?sn=new lr(n):Er(n)?sn=new Qi(n):sn=n}function oo(){return sn.resume()}if(Ut&&!Ut.TONE_SILENCE_LOGGING){const e=` * Tone.js v${wc} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Dg(n){return Math.pow(10,n/20)}function Eg(n){return 20*(Math.log(n)/Math.LN10)}function Tu(n){return Math.pow(2,n/12)}let Bs=440;function Mg(){return Bs}function Pg(n){Bs=n}function bi(n){return Math.round(Su(n))}function Su(n){return 69+12*Math.log2(n/Bs)}function Ng(n){return Bs*Math.pow(2,(n-69)/12)}class Zi extends vt{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const r=parseInt(e,10),s=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(s+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Zi&&this.fromType(this._val),Be(this._val))return this._noArg();if(nt(this._val)&&Be(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if($t(this._val)){let e=0;for(const t in this._val)if(Z(this._val[t])){const r=this._val[t],s=new this.constructor(this.context,t).valueOf()*r;e+=s}return e}if(Z(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return nt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Ge extends Zi{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Ge(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),o=Math.round(s/r)*r-s;return s+o*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const a=Math.pow(2,i);t.push(a+"n."),t.push(a+"n"),t.push(a+"t")}t.push("0");let r=t[0],s=new Ge(this.context,t[0]).toSeconds();return t.forEach(i=>{const a=new Ge(this.context,i).toSeconds();Math.abs(a-e)<Math.abs(s-e)&&(r=i,s=a)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const r=Math.floor(t/this._getTimeSignature());let s=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,t,s].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return bi(this.toFrequency())}_now(){return this.context.now()}}class qe extends Ge{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Mg()}static set A4(e){Pg(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:qe.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const s=Rg[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?s:qe.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(s*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new qe(this.context,this.valueOf()*Tu(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return bi(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/qe.A4);let r=Math.round(12*t)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),Fg[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Ng(e)}static ftom(e){return bi(e)}}const Rg={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Fg=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Nn extends Ge{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Re extends vt{constructor(){super();const e=M(Re.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Ve()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Ge(this.context,e).toSeconds()}toFrequency(e){return new qe(this.context,e).toFrequency()}toTicks(e){return new Nn(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(r=>{Be(e[r])&&delete t[r]}),t}get(){const e=Sg(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const r=this[t];Z(r)&&Z(r.value)&&Z(r.setValueAtTime)?e[t]=r.value:r instanceof Re?e[t]=r._getPartialProperties(e[t]):ze(r)||Ct(r)||nt(r)||gg(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Z(this[t])&&(this[t]&&Z(this[t].value)&&Z(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Re?this[t].set(e[t]):this[t]=e[t])}),this}}class Ji extends ot{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return St(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){const r=this._search(t);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,t){const r=this._search(t);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class Q extends Re{constructor(){super(M(Q.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=M(Q.getDefaults(),arguments,["param","units","convert"]);for(H(Z(e.param)&&(Vt(e.param)||e.param instanceof Q),"param must be an AudioParam");!Vt(e.param);)e.param=e.param._param;this._swappable=Z(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new ot(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Z(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Re.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Z(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Z(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Z(this.maxValue)&&Z(this.minValue)&&St(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Dg(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Eg(e):e}setValueAtTime(e,t){const r=this.toSeconds(t),s=this._fromType(e);return H(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),s=this._events.get(t);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const a=this._events.getBefore(s.time);let o;a===null?o=this._initialValue:o=a.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,o,s.value,s.constant,t))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let a=s.value;if(s.type==="setTargetAtTime"){const o=this._events.getBefore(s.time);o===null?a=this._initialValue:a=o.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,a,r.time,r.value,t):i=this._exponentialInterpolate(s.time,a,r.time,r.value,t)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const r=this._fromType(e),s=this.toSeconds(t);return H(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=We(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(t);return H(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,s),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){const s=this._fromType(e);H(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(s),H(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,t,r,s=1){r=this.toSeconds(r),t=this.toSeconds(t);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),t);const a=r/(e.length-1);for(let o=1;o<e.length;o++){const c=this._fromType(e[o])*s;this.linearRampToValueAtTime(this._toType(c),t+o*a)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return H(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));H(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);const s=this._events.get(t),i=this._events.getAfter(t);return s&&We(s.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:t+2,a=(i-t)/10;for(let o=t;o<i;o+=a)e.linearRampToValueAtTime(this.getValueAtTime(o),o)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){H(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,s,i){return r+(t-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,t,r,s,i){return t+(s-t)*((i-e)/(r-e))}_exponentialInterpolate(e,t,r,s,i){return t*Math.pow(s/t,(i-e)/(r-e))}}class B extends Re{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Z(this.input)?Vt(this.input)||this.input instanceof Q?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Z(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Z(e)&&(e instanceof B||Tt(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();H(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return Xe(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return gu("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return Cu(this,e,t,r),this}chain(...e){return At(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Z(this.input)&&(this.input instanceof B?this.input.dispose():Tt(this.input)&&this.input.disconnect()),Z(this.output)&&(this.output instanceof B?this.output.dispose():Tt(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function At(...n){const e=n.shift();n.reduce((t,r)=>(t instanceof B?t.connect(r):Tt(t)&&Xe(t,r),r),e)}function Xe(n,e,t=0,r=0){for(H(Z(n),"Cannot connect from undefined node"),H(Z(e),"Cannot connect to undefined node"),(e instanceof B||Tt(e))&&H(e.numberOfInputs>0,"Cannot connect to node with no inputs"),H(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof B||e instanceof Q;)Z(e.input)&&(e=e.input);for(;n instanceof B;)Z(n.output)&&(n=n.output);Vt(e)?n.connect(e,t):n.connect(e,t,r)}function Cu(n,e,t=0,r=0){if(Z(e))for(;e instanceof B;)e=e.input;for(;!Tt(n);)Z(n.output)&&(n=n.output);Vt(e)?n.disconnect(e,t):Tt(e)?n.disconnect(e,t,r):n.disconnect()}class ne extends B{constructor(){super(M(ne.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=M(ne.getDefaults(),arguments,["gain","units"]);this.gain=new Q({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),J(this,"gain")}static getDefaults(){return Object.assign(B.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ln extends B{constructor(e){super(e),this.onended=se,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ne({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(B.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:se})}_startGain(e,t=1){H(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){H(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==se&&(this.onended(this),this.onended=se,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),H(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ds extends ln{constructor(){super(M(ds.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=M(ds.getDefaults(),arguments,["offset"]);Xe(this._source,this._gainNode),this.offset=new Q({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(ln.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class te extends B{constructor(){super(M(te.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=M(te.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ds({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(B.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return js(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,s){return this._param.setValueCurveAtTime(e,t,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function js(n,e,t,r){(e instanceof Q||Vt(e)||e instanceof te&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof te&&(e.overridden=!0)),Xe(n,e,t,r)}class ps extends Q{constructor(){super(M(ps.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new ot(1/0),this._multiplier=1;const e=M(ps.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Q.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);const s=this._fromType(e),i=this._events.get(t),a=Math.round(Math.max(1/r,1));for(let o=0;o<=a;o++){const c=r*o+t,u=this._exponentialApproach(i.time,i.value,s,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(e,t){const r=this.toSeconds(t);super.setValueAtTime(e,t);const s=this._events.get(r),i=this._events.previousEvent(s),a=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(a,0),this}linearRampToValueAtTime(e,t){const r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const s=this._events.get(r),i=this._events.previousEvent(s),a=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(a,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const r=this._fromType(e),s=this._events.get(t),i=Math.round(Math.max((t-s.time)*10,1)),a=(t-s.time)/i;for(let o=0;o<=i;o++){const c=a*o+s.time,u=this._exponentialInterpolate(s.time,s.value,t,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Be(e.ticks)){const a=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(a,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){const r=this.toSeconds(t),s=this.getTicksAtTime(t);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){const s=this._fromType(this.getValueAtTime(t.time)),a=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-t.time),o=Math.sqrt(Math.pow(s,2)-2*a*(t.ticks-e)),c=(-s+o)/a,u=(-s-o)/a;return(c>0?c:u)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const r=this.toSeconds(t),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class fs extends te{constructor(){super(M(fs.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=M(fs.getDefaults(),arguments,["value"]);this.input=this._param=new ps({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(te.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class ms extends Re{constructor(){super(M(ms.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Ji,this._tickOffset=new ot;const e=M(ms.getDefaults(),arguments,["frequency"]);this.frequency=new fs({context:this.context,units:e.units,value:e.frequency}),J(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Re.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Z(t)&&this.setTicksAtTime(t,r)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),r=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);let i=r,a=0;return this._state.forEachBetween(r.time,t+this.sampleTime,o=>{let c=i.time;const u=this._tickOffset.get(o.time);u&&u.time>=i.time&&(a=u.ticks,c=u.time),i.state==="started"&&o.state!=="started"&&(a+=this.frequency.getTicksAtTime(o.time)-this.frequency.getTicksAtTime(c)),i=o}),this._state.remove(s),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let s=t,i=0;return this._state.forEachBetween(t.time,e+this.sampleTime,a=>{let o=s.time;const c=this._tickOffset.get(a.time);c&&c.time>=s.time&&(i=c.seconds,o=c.time),s.state==="started"&&a.state!=="started"&&(i+=a.time-o),s=a}),this._state.remove(r),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const r=this._tickOffset.get(t),s=this._state.get(t),i=Math.max(r.time,s.time),a=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(e,t,r){let s=this._state.get(e);this._state.forEachBetween(e,t,a=>{s&&s.state==="started"&&a.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),a.time-this.sampleTime,r),s=a});let i=null;if(s&&s.state==="started"){const a=Math.max(s.time,e),o=this.frequency.getTicksAtTime(a),c=this.frequency.getTicksAtTime(s.time),u=o-c;let h=Math.ceil(u)-u;h=We(h,1)?0:h;let l=this.frequency.getTimeOfTick(o+h);for(;l<t;){try{r(l,Math.round(this.getTicksAtTime(l)))}catch(d){i=d;break}l+=this.frequency.getDurationOfTicks(1,l)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class qn extends Re{constructor(){super(M(qn.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=se,this._lastUpdate=0,this._state=new Ji("stopped"),this._boundLoop=this._loop.bind(this);const e=M(qn.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new ms({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,J(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Re.getDefaults(),{callback:se,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){fu(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const r=this.toSeconds(t),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}hr.mixin(qn);class an extends B{constructor(){super(M(an.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const e=M(an.getDefaults(),arguments,["delayTime","maxDelay"]),t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new Q({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),J(this,"delayTime")}static getDefaults(){return Object.assign(B.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Ws extends vt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=M(Ws.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:se,onload:se,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return H(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=se,s=se){return nt(t)?this._buffers.set(e.toString(),new oe(this.baseUrl+t,r,s)):this._buffers.set(e.toString(),new oe(t,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class pt extends Nn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}let $g=class extends Re{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new ot,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};Vs(n=>{n.draw=new $g({context:n})});qs(n=>{n.draw.dispose()});class Ug extends vt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){H(Z(e.time),"Events must have a time property"),H(Z(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Lg(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let r,s=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const t=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),t!==null?r?t.left=s:t.right=s:this._setRoot(s)}_rotateRight(e){const t=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),t!==null?r?t.left=s:t.right=s:this._setRoot(s)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let s=1;s<t.length;s++)t[s].low>r.low&&(r=t[s]);return r.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&t(s.event)})}return this}forEachFrom(e,t){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&t(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Lg{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ot extends B{constructor(){super(M(Ot.getDefaults(),arguments,["volume"])),this.name="Volume";const e=M(Ot.getDefaults(),arguments,["volume"]);this.input=this.output=new ne({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,J(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let xi=class extends B{constructor(){super(M(xi.getDefaults(),arguments)),this.name="Destination",this.input=new Ot({context:this.context}),this.output=new ne({context:this.context}),this.volume=this.input.volume;const e=M(xi.getDefaults(),arguments);At(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),At(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};Vs(n=>{n.destination=new xi({context:n})});qs(n=>{n.destination.dispose()});class Vg extends vt{constructor(e){super(),this.name="TimelineValue",this._timeline=new ot({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class kt{constructor(e,t){this.id=kt._eventId++;const r=Object.assign(kt.getDefaults(),t);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=r.time}static getDefaults(){return{callback:se,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}kt._eventId=0;class ea extends kt{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(ea.getDefaults(),t);this.duration=new pt(e.context,r.duration).valueOf(),this._interval=new pt(e.context,r.interval).valueOf(),this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},kt.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new pt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new pt(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new pt(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}let gs=class extends Re{constructor(){super(M(gs.getDefaults(),arguments)),this.name="Transport",this._loop=new Vg(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new ot,this._repeatedEvents=new Ug,this._syncedSignals=[],this._swingAmount=0;const e=M(gs.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new qn({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),J(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Re.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const r=t%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new pt(this.context,this._swingTicks*2/3).toSeconds()*s}this._timeline.forEachAtTime(t,r=>r.invoke(e))}schedule(e,t){const r=new kt(this,{callback:e,time:new Nn(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,s=1/0){const i=new ea(this,{callback:e,duration:new Ge(this.context,s).toTicks(),interval:new Ge(this.context,t).toTicks(),time:new Nn(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const r=new kt(this,{callback:e,once:!0,time:new Nn(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new pt(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let r;return Z(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){ze(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Ge(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Ge(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new pt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new pt(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(t),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),i=t+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),r=this.getTicksAtTime(t),s=e-r%e;return this._clock.nextTickTime(s,t)}}syncSignal(e,t){if(!t){const s=this.now();if(e.getValueAtTime(s)!==0){const a=1/(60/this.bpm.getValueAtTime(s)/this.PPQ);t=e.getValueAtTime(s)/a}else t=0}const r=new ne(t);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const r=this._syncedSignals[t];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ki(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};hr.mixin(gs);Vs(n=>{n.transport=new gs({context:n})});qs(n=>{n.transport.dispose()});class Ue extends B{constructor(e){super(e),this.input=void 0,this._state=new Ji("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=se,this._syncedStop=se,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ot({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,J(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,onstop:se,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let s=Be(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")H(ls(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,t,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(rn(t,0)),i.duration=r?this.toSeconds(r):void 0);const a=this.context.transport.schedule(o=>{this._start(o,t,r)},s);this._scheduled.push(a),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else fu(this.context),this._start(s,t,r);return this}stop(e){let t=Be(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Z(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){const s=t-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=se,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Bn extends ln{constructor(){super(M(Bn.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=M(Bn.getDefaults(),arguments,["url","onload"]);Xe(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Q({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new oe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ln.getDefaults(),{url:new oe,loop:!1,loopEnd:0,loopStart:0,onload:se,onerror:se,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,s=1){H(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?t=rn(t,this.loopStart):t=rn(t,0);let a=Math.max(this.toSeconds(t),0);if(this.loop){const o=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=o-c;yi(a,o)&&(a=(a-c)%u+c),We(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,_u(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,a)),Z(r)){let o=this.toSeconds(r);o=Math.max(o,0),this.stop(i+o)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Ht(n,e){return be(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,r=new Qi(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class vs extends ln{constructor(){super(M(vs.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=M(vs.getDefaults(),arguments,["frequency","type"]);Xe(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Q({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Q({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),J(this,["frequency","detune"])}static getDefaults(){return Object.assign(ln.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class fe extends Ue{constructor(){super(M(fe.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=M(fe.getDefaults(),arguments,["frequency","type"]);this.frequency=new te({context:this.context,units:"frequency",value:e.frequency}),J(this,"frequency"),this.detune=new te({context:this.context,units:"cents",value:e.detune}),J(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ue.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),r=new vs({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return fe._periodicWaveCache.find(t=>t.phase===this._phase&&Tg(t.partials,this._partials));{const e=fe._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Z(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),a=this.context.createPeriodicWave(s,i);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),fe._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),fe._periodicWaveCache.length>100&&fe._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){St(e,0);let t=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(t=r[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,a)=>s[a]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,t){let s=2048;const i=new Float32Array(s),a=new Float32Array(s);let o=1;if(e==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,s=o,this._partials.length===0)return[i,a]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(o=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],o=Math.max(o,2),s=o):this._partialCount=0,this._partials=[]}for(let c=1;c<s;++c){const u=2/(c*Math.PI);let h;switch(e){case"sine":h=c<=o?1:0,this._partials[c-1]=h;break;case"square":h=c&1?2*u:0,this._partials[c-1]=h;break;case"sawtooth":h=u*(c&1?1:-1),this._partials[c-1]=h;break;case"triangle":c&1?h=2*(u*u)*(c-1>>1&1?-1:1):h=0,this._partials[c-1]=h;break;case"custom":h=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}h!==0?(i[c]=-h*Math.sin(t*c),a[c]=h*Math.cos(t*c)):(i[c]=0,a[c]=0)}return[i,a]}_inverseFFT(e,t,r){let s=0;const i=e.length;for(let a=0;a<i;a++)s+=e[a]*Math.cos(a*r)+t[a]*Math.sin(a*r);return s}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let a=0;a<i;a++)r=Math.max(this._inverseFFT(e,t,a/i*s),r);return Cg(-this._inverseFFT(e,t,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return be(this,void 0,void 0,function*(){return Ht(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}fe._periodicWaveCache=[];class It extends B{constructor(){super(Object.assign(M(It.getDefaults(),arguments,["context"])))}connect(e,t=0,r=0){return js(this,e,t,r),this}}class dn extends It{constructor(){super(Object.assign(M(dn.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=M(dn.getDefaults(),arguments,["mapping","length"]);ze(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):mg(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(te.getDefaults(),{length:1024})}setMap(e,t=1024){const r=new Float32Array(t);for(let s=0,i=t;s<i;s++){const a=s/(i-1)*2-1;r[s]=e(a,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(r=>r.includes(e));H(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Au extends It{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new dn({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Dt extends te{constructor(){super(Object.assign(M(Dt.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=M(Dt.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ne({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(te.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class jn extends Ue{constructor(){super(M(jn.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Au({context:this.context}),this._modulationNode=new ne({context:this.context});const e=M(jn.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new fe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new fe({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Dt({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),J(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fe.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return be(this,void 0,void 0,function*(){return Ht(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Wn extends Ue{constructor(){super(M(Wn.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ne({context:this.context,gain:0});const e=M(Wn.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new fe({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new te({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new fe({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Dt({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Dt({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),J(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fe.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return be(this,void 0,void 0,function*(){return Ht(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class pn extends Ue{constructor(){super(M(pn.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ne({context:this.context,gain:0}),this._thresh=new dn({context:this.context,mapping:t=>t<=0?-1:1});const e=M(pn.getDefaults(),arguments,["frequency","width"]);this.width=new te({context:this.context,units:"audioRange",value:e.width}),this._triangle=new fe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),J(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return be(this,void 0,void 0,function*(){return Ht(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Gn extends Ue{constructor(){super(M(Gn.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=M(Gn.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new te({context:this.context,units:"frequency",value:e.frequency}),this.detune=new te({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,J(this,["frequency","detune"])}static getDefaults(){return Object.assign(fe.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=t+r*i)}}get count(){return this._oscillators.length}set count(e){if(St(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const r=new fe({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):se});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return be(this,void 0,void 0,function*(){return Ht(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class zn extends Ue{constructor(){super(M(zn.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Dt({context:this.context,value:2});const e=M(zn.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new pn({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new fe({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),J(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return be(this,void 0,void 0,function*(){return Ht(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const co={am:jn,fat:Gn,fm:Wn,oscillator:fe,pulse:pn,pwm:zn};class Hn extends Ue{constructor(){super(M(Hn.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=M(Hn.getDefaults(),arguments,["frequency","type"]);this.frequency=new te({context:this.context,units:"frequency",value:e.frequency}),this.detune=new te({context:this.context,units:"cents",value:e.detune}),J(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(fe.getDefaults(),Wn.getDefaults(),jn.getDefaults(),Gn.getDefaults(),pn.getDefaults(),zn.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=co[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof co[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ct(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ct(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&nt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return be(this,void 0,void 0,function*(){return Ht(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class ta extends te{constructor(){super(Object.assign(M(ta.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new ne({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,At(this._constantSource,this._sum)}static getDefaults(){return Object.assign(te.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Xn extends It{constructor(){super(Object.assign(M(Xn.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=M(Xn.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Dt({context:this.context,value:e.max-e.min}),this._add=this.output=new ta({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(It.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class na extends It{constructor(){super(Object.assign(M(na.getDefaults(),arguments))),this.name="Zero",this._gain=new ne({context:this.context}),this.output=this._gain,this.input=void 0,Xe(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Cu(this.context.getConstant(0),this._gain),this}}class _s extends B{constructor(){super(M(_s.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Q.prototype._fromType,this._toType=Q.prototype._toType,this._is=Q.prototype._is,this._clampValue=Q.prototype._clampValue;const e=M(_s.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new fe(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new ne({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new te({context:this.context,units:"audioRange",value:0}),this._zeros=new na({context:this.context}),this._a2g=new Au({context:this.context}),this._scaler=this.output=new Xn({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),J(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(fe.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,r=this.max;this._units=e,this.min=t,this.max=r}get state(){return this._oscillator.state}connect(e,t,r){return(e instanceof Q||e instanceof te)&&(this.convert=e.convert,this.units=e.units),js(this,e,t,r),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Ou(n,e=1/0){const t=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){St(i,n,e),t.set(this,i)}})}}function _t(n,e=1/0){const t=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){St(this.toSeconds(i),n,e),t.set(this,i)}})}}class fn extends Ue{constructor(){super(M(fn.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=M(fn.getDefaults(),arguments,["url","onload"]);this._buffer=new oe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ue.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:se,onerror:se,playbackRate:1,reverse:!1})}load(e){return be(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=se){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=rn(t,this._loopStart):t=rn(t,0);const s=this.toSeconds(t),i=r;r=rn(r,Math.max(this._buffer.duration-s,0));let a=this.toSeconds(r);a=a/this._playbackRate,e=this.toSeconds(e);const o=new Bn({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+a),this._state.setStateAtTime("stopped",e+a,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Be(i)?o.start(e,s):o.start(e,s,a-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){this._stop(e),this._start(e,t,r)}seek(e,t){const r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&St(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&St(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Qe([_t(0)],fn.prototype,"fadeIn",void 0);Qe([_t(0)],fn.prototype,"fadeOut",void 0);class qg extends It{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new dn({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class mt extends B{constructor(){super(M(mt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new te({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=M(mt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(B.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(nt(e))return e;{let r;for(r in wr)if(wr[r][t]===e)return r;return e}}_setCurve(e,t,r){if(nt(r)&&Reflect.has(wr,r)){const s=wr[r];$t(s)?e!=="_decayCurve"&&(this[e]=s[t]):this[e]=s}else if(ze(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){H(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),a=this.getValueAtTime(e);if(a>0){const o=1/s;s=(1-a)/o}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,s,e);else{this._sig.cancelAndHoldAtTime(e);let o=this._attackCurve;for(let c=1;c<o.length;c++)if(o[c-1]<=a&&a<=o[c]){o=this._attackCurve.slice(c),o[0]=a;break}this._sig.setValueCurveAtTime(o,e,s,t)}if(i&&this.sustain<1){const o=t*this.sustain,c=e+s;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,i+c):this._sig.exponentialApproachValueAtTime(o,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(H(ze(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return js(this,e,t,r),this}asArray(e=1024){return be(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,r=new Qi(1,t,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),a=i*.1,o=i+a,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/o,decay:t*this.toSeconds(this.decay)/o,release:t*this.toSeconds(this.release)/o,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(t*(s+a)/o,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Qe([_t(0)],mt.prototype,"attack",void 0);Qe([_t(0)],mt.prototype,"decay",void 0);Qe([Ou(0,1)],mt.prototype,"sustain",void 0);Qe([_t(0)],mt.prototype,"release",void 0);const wr=(()=>{let e,t;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));const s=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const d=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;s[e]=d/10+t*.83}s[128-1]=1;const a=[],o=5;for(e=0;e<128;e++)a[e]=Math.ceil(e/(128-1)*o)/o;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const u=[];for(e=0;e<128;e++){t=e/(128-1);const d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);u[e]=Math.abs(f*(1-t))}function h(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function l(d){return d.slice(0).reverse()}return{bounce:{In:h(u),Out:u},cosine:{In:r,Out:l(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:h(s)},sine:{In:c,Out:h(c)},step:{In:a,Out:h(a)}}})();class qt extends B{constructor(){super(M(qt.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=M(qt.getDefaults(),arguments);this._volume=this.output=new Ot({context:this.context,volume:e.volume}),this.volume=this._volume.volume,J(this,"volume")}static getDefaults(){return Object.assign(B.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[t],a=this.context.transport.schedule(o=>{s[t]=o,r.apply(this,s)},i);this._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,r,s){const i=this.toSeconds(r),a=this.toSeconds(t);return this.triggerAttack(e,i,s),this.triggerRelease(i+a),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Bt extends qt{constructor(){super(M(Bt.getDefaults(),arguments));const e=M(Bt.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(qt.getDefaults(),{detune:0,onsilence:se,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);const s=this.toSeconds(t);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const r=this.toSeconds(t),s=e instanceof qe?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}Qe([_t(0)],Bt.prototype,"portamento",void 0);class ra extends mt{constructor(){super(M(ra.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ne({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class mn extends Bt{constructor(){super(M(mn.getDefaults(),arguments)),this.name="Synth";const e=M(mn.getDefaults(),arguments);this.oscillator=new Hn(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ra(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),J(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{envelope:Object.assign(ao(mt.getDefaults(),Object.keys(B.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ao(Hn.getDefaults(),[...Object.keys(Ue.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Yn extends B{constructor(){super(M(Yn.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=M(Yn.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Q({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Q({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Q({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Q({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(B.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){H(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let a=0;a<e;a++){const c=Math.pow(a/e,2)*(2e4-20)+20;t[a]=c}const r=new Float32Array(e),s=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,r,s),r}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class ys extends B{constructor(){super(M(ys.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new ne({context:this.context}),this.output=new ne({context:this.context}),this._filters=[];const e=M(ys.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new te({context:this.context,units:"positive",value:e.Q}),this.frequency=new te({context:this.context,units:"frequency",value:e.frequency}),this.detune=new te({context:this.context,units:"cents",value:e.detune}),this.gain=new te({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,J(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(B.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){H(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Ct(e)?e:parseInt(e,10),r=[-12,-24,-48,-96];let s=r.indexOf(t);H(s!==-1,`rolloff can only be ${r.join(", ")}`),s+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(s);for(let i=0;i<s;i++){const a=new Yn({context:this.context});a.type=this._type,this.frequency.connect(a.frequency),this.detune.connect(a.detune),this.Q.connect(a.Q),this.gain.connect(a.gain),this._filters[i]=a}this._internalChannels=this._filters,At(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new Yn({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),r=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,a)=>r[a]*=i)}),t.dispose(),r}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Ki(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Kn extends mn{constructor(){super(M(Kn.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=M(Kn.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,J(this,["oscillator","envelope"])}static getDefaults(){return nn(Bt.getDefaults(),mn.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const r=this.toSeconds(t),s=this.toFrequency(e instanceof qe?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Qe([Ou(0)],Kn.prototype,"octaves",void 0);Qe([_t(0)],Kn.prototype,"pitchDecay",void 0);const sa=new Set;function ia(n){sa.add(n)}function ku(n,e){const t=`registerProcessor("${n}", ${e})`;sa.add(t)}function Bg(){return Array.from(sa).join(`
`)}class jg extends B{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=se;const t=URL.createObjectURL(new Blob([Bg()],{type:"text/javascript"})),r=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(t,r).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(r,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const Wg=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ia(Wg);const Gg=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ia(Gg);const zg=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ia(zg);const Iu="feedback-comb-filter",Hg=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ku(Iu,Hg);class bs extends jg{constructor(){super(M(bs.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const e=M(bs.getDefaults(),arguments,["delayTime","resonance"]);this.input=new ne({context:this.context}),this.output=new ne({context:this.context}),this.delayTime=new Q({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Q({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),J(this,["resonance","delayTime"])}_audioWorkletName(){return Iu}static getDefaults(){return Object.assign(B.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){At(this.input,e,this.output);const t=e.parameters.get("delayTime");this.delayTime.setParam(t);const r=e.parameters.get("feedback");this.resonance.setParam(r)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Qn extends qt{constructor(){super(M(Qn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=M(Qn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(H(xr(r)||Ct(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),xr(r)){const i=new qe(this.context,r).toMidi();t[i]=e.urls[r]}else Ct(s)&&isFinite(s)&&(t[s]=e.urls[s])}),this._buffers=new Ws({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(qt.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:se,onerror:se,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=Su(new qe(this.context,s).toFrequency()),a=Math.round(i),o=i-a,c=this._findClosest(a),u=a-c,h=this._buffers.get(u),l=Tu(c+o),d=new Bn({url:h,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:l}).connect(this.output);d.start(t,0,h.duration/l,r),ze(this._activeSources.get(a))||this._activeSources.set(a,[]),this._activeSources.get(a).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(a)){const f=this._activeSources.get(a),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new qe(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);t=this.toSeconds(t),i.forEach(a=>{a.stop(t)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),ze(t)?(H(ze(e),"notes must be an array when duration is array"),e.forEach((a,o)=>{const c=t[Math.min(o,t.length-1)];this.triggerRelease(a,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,r){if(H(xr(e)||isFinite(e),`note must be a pitch or midi: ${e}`),xr(e)){const s=new qe(this.context,e).toMidi();this._buffers.add(s,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Qe([_t(0)],Qn.prototype,"attack",void 0);Qe([_t(0)],Qn.prototype,"release",void 0);class Zn extends B{constructor(){super(Object.assign(M(Zn.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new qg({context:this.context}),this.a=new ne({context:this.context,gain:0}),this.b=new ne({context:this.context,gain:0}),this.output=new ne({context:this.context}),this._internalChannels=[this.a,this.b];const e=M(Zn.getDefaults(),arguments,["fade"]);this.fade=new te({context:this.context,units:"normalRange",value:e.fade}),J(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Xe(this._split,this.a.gain,0),Xe(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(B.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class uo extends B{constructor(e){super(e),this.name="Effect",this._dryWet=new Zn({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ne({context:this.context}),this.effectReturn=new ne({context:this.context}),this.input=new ne({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],J(this,"wet")}static getDefaults(){return Object.assign(B.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class ho extends uo{constructor(e){super(e),this.name="LFOEffect",this._lfo=new _s({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,J(this,["frequency","depth"])}static getDefaults(){return Object.assign(uo.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class xs extends ho{constructor(){super(M(xs.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const e=M(xs.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new ys(Object.assign(e.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency}static getDefaults(){return Object.assign(ho.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}dispose(){return super.dispose(),this.filter.dispose(),this}}class ws extends B{constructor(){super(Object.assign(M(ws.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=M(ws.getDefaults(),arguments,["pan"]);this.pan=new Q({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",J(this,"pan")}static getDefaults(){return Object.assign(B.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Xg="bit-crusher",Yg=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ku(Xg,Yg);class Jn extends B{constructor(){super(M(Jn.getDefaults(),arguments,["channels"])),this.name="Split";const e=M(Jn.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(B.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class er extends B{constructor(){super(M(er.getDefaults(),arguments,["channels"])),this.name="Merge";const e=M(er.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(B.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Ts extends B{constructor(e){super(e),this.name="StereoEffect",this.input=new ne({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Zn({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Jn({context:this.context,channels:2}),this._merge=new er({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),J(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),At(...e),Xe(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),At(...e),Xe(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(B.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Kg extends Ts{constructor(e){super(e),this.feedback=new te({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new ne({context:this.context}),this._feedbackR=new ne({context:this.context}),this._feedbackSplit=new Jn({context:this.context,channels:2}),this._feedbackMerge=new er({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),J(this,["feedback"])}static getDefaults(){return Object.assign(Ts.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}const lo=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],Qg=[.773,.802,.753,.733],Zg=[347,113,37];class Ss extends Ts{constructor(){super(M(Ss.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const e=M(Ss.getDefaults(),arguments,["roomSize"]);this.roomSize=new te({context:this.context,value:e.roomSize,units:"normalRange"}),this._scaleRoomSize=new Xn({context:this.context,min:-.733,max:.197}),this._allpassFilters=Zg.map(t=>{const r=this.context.createBiquadFilter();return r.type="allpass",r.frequency.value=t,r}),this._feedbackCombFilters=lo.map((t,r)=>{const s=new bs({context:this.context,delayTime:t});return this._scaleRoomSize.connect(s.resonance),s.resonance.value=Qg[r],r<lo.length/2?this.connectEffectLeft(...this._allpassFilters,s):this.connectEffectRight(...this._allpassFilters,s),s}),this.roomSize.connect(this._scaleRoomSize),J(this,["roomSize"])}static getDefaults(){return Object.assign(Ts.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(e=>e.disconnect()),this._feedbackCombFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class po extends Kg{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),J(this,["feedback"])}}class Cs extends po{constructor(){super(M(Cs.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const e=M(Cs.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new an({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new an({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new an({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new te({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),J(this,["delayTime"])}static getDefaults(){return Object.assign(po.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class ve extends B{constructor(){super(M(ve.getDefaults(),arguments,["solo"])),this.name="Solo";const e=M(ve.getDefaults(),arguments,["solo"]);this.input=this.output=new ne({context:this.context}),ve._allSolos.has(this.context)||ve._allSolos.set(this.context,new Set),ve._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(B.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),ve._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ve._soloed.has(this.context)||ve._soloed.set(this.context,new Set),ve._soloed.get(this.context).add(this)}_removeSolo(){ve._soloed.has(this.context)&&ve._soloed.get(this.context).delete(this)}_isSoloed(){return ve._soloed.has(this.context)&&ve._soloed.get(this.context).has(this)}_noSolos(){return!ve._soloed.has(this.context)||ve._soloed.has(this.context)&&ve._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ve._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ve._allSolos=new Map;ve._soloed=new Map;class As extends B{constructor(){super(M(As.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=M(As.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new ws({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ot({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,J(this,["pan","volume"])}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Rt extends B{constructor(){super(M(Rt.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=M(Rt.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new ve({solo:e.solo,context:this.context}),this._panVol=this.output=new As({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),J(this,["pan","volume"])}static getDefaults(){return Object.assign(B.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Rt.buses.has(e)||Rt.buses.set(e,new ne({context:this.context})),Rt.buses.get(e)}send(e,t=0){const r=this._getBus(e),s=new ne({context:this.context,units:"decibels",gain:t});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Rt.buses=new Map;class Jg extends B{constructor(){super(...arguments),this.name="Listener",this.positionX=new Q({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Q({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Q({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Q({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Q({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Q({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Q({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Q({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Q({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(B.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Vs(n=>{n.listener=new Jg({context:n})});qs(n=>{n.listener.dispose()});function ev(){return Ve().now()}const Tr=Ve().transport,fo=Ve().destination;Ve().destination;Ve().listener;const tv=Ve().draw;Ve();const nv=Ws;var Sr={},Sn={},dr={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getColorIndex=n.getColorDiffStatus=n.hexDiff=n.rgbDiff=n.deltaE94=n.rgbToCIELab=n.xyzToCIELab=n.rgbToXyz=n.hslToRgb=n.rgbToHsl=n.rgbToHex=n.hexToRgb=n.defer=n.RSHIFT=n.SIGBITS=n.DELTAE94_DIFF_STATUS=void 0,n.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},n.SIGBITS=5,n.RSHIFT=8-n.SIGBITS;function e(){var p,m,g=new Promise(function(v,y){p=v,m=y});return{resolve:p,reject:m,promise:g}}n.defer=e;function t(p){var m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(p);return m===null?null:[m[1],m[2],m[3]].map(function(g){return parseInt(g,16)})}n.hexToRgb=t;function r(p,m,g){return"#"+((1<<24)+(p<<16)+(m<<8)+g).toString(16).slice(1,7)}n.rgbToHex=r;function s(p,m,g){p/=255,m/=255,g/=255;var v=Math.max(p,m,g),y=Math.min(p,m,g),S,C,b=(v+y)/2;if(v===y)S=C=0;else{var T=v-y;switch(C=b>.5?T/(2-v-y):T/(v+y),v){case p:S=(m-g)/T+(m<g?6:0);break;case m:S=(g-p)/T+2;break;case g:S=(p-m)/T+4;break}S/=6}return[S,C,b]}n.rgbToHsl=s;function i(p,m,g){var v,y,S;function C(x,w,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?x+(w-x)*6*A:A<1/2?w:A<2/3?x+(w-x)*(2/3-A)*6:x}if(m===0)v=y=S=g;else{var b=g<.5?g*(1+m):g+m-g*m,T=2*g-b;v=C(T,b,p+1/3),y=C(T,b,p),S=C(T,b,p-1/3)}return[v*255,y*255,S*255]}n.hslToRgb=i;function a(p,m,g){p/=255,m/=255,g/=255,p=p>.04045?Math.pow((p+.005)/1.055,2.4):p/12.92,m=m>.04045?Math.pow((m+.005)/1.055,2.4):m/12.92,g=g>.04045?Math.pow((g+.005)/1.055,2.4):g/12.92,p*=100,m*=100,g*=100;var v=p*.4124+m*.3576+g*.1805,y=p*.2126+m*.7152+g*.0722,S=p*.0193+m*.1192+g*.9505;return[v,y,S]}n.rgbToXyz=a;function o(p,m,g){var v=95.047,y=100,S=108.883;p/=v,m/=y,g/=S,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116;var C=116*m-16,b=500*(p-m),T=200*(m-g);return[C,b,T]}n.xyzToCIELab=o;function c(p,m,g){var v=a(p,m,g),y=v[0],S=v[1],C=v[2];return o(y,S,C)}n.rgbToCIELab=c;function u(p,m){var g=1,v=1,y=1,S=p[0],C=p[1],b=p[2],T=m[0],x=m[1],w=m[2],A=S-T,O=C-x,I=b-w,k=Math.sqrt(C*C+b*b),D=Math.sqrt(x*x+w*w),P=T-S,U=D-k,R=Math.sqrt(A*A+O*O+I*I),$=Math.sqrt(R)>Math.sqrt(Math.abs(P))+Math.sqrt(Math.abs(U))?Math.sqrt(R*R-P*P-U*U):0,G=1+.045*k,V=1+.015*k;return P/=g,U/=v*G,$/=y*V,Math.sqrt(P*P+U*U+$*$)}n.deltaE94=u;function h(p,m){var g=c.apply(void 0,p),v=c.apply(void 0,m);return u(g,v)}n.rgbDiff=h;function l(p,m){var g=t(p),v=t(m);return h(g,v)}n.hexDiff=l;function d(p){return p<n.DELTAE94_DIFF_STATUS.NA?"N/A":p<=n.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":p<=n.DELTAE94_DIFF_STATUS.CLOSE?"Close":p<=n.DELTAE94_DIFF_STATUS.GOOD?"Good":p<n.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"}n.getColorDiffStatus=d;function f(p,m,g){return(p<<2*n.SIGBITS)+(m<<n.SIGBITS)+g}n.getColorIndex=f})(dr);function rv(n,e){for(var t=-1,r=n==null?0:n.length,s=0,i=[];++t<r;){var a=n[t];e(a,t,n)&&(i[s++]=a)}return i}var Du=rv;function sv(n){return function(e,t,r){for(var s=-1,i=Object(e),a=r(e),o=a.length;o--;){var c=a[n?o:++s];if(t(i[c],c,i)===!1)break}return e}}var iv=sv,av=iv,ov=av(),cv=ov;function uv(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var hv=uv,lv=typeof z=="object"&&z&&z.Object===Object&&z,Eu=lv,dv=Eu,pv=typeof self=="object"&&self&&self.Object===Object&&self,fv=dv||pv||Function("return this")(),ct=fv,mv=ct,gv=mv.Symbol,pr=gv,mo=pr,Mu=Object.prototype,vv=Mu.hasOwnProperty,_v=Mu.toString,Mn=mo?mo.toStringTag:void 0;function yv(n){var e=vv.call(n,Mn),t=n[Mn];try{n[Mn]=void 0;var r=!0}catch{}var s=_v.call(n);return r&&(e?n[Mn]=t:delete n[Mn]),s}var bv=yv,xv=Object.prototype,wv=xv.toString;function Tv(n){return wv.call(n)}var Sv=Tv,go=pr,Cv=bv,Av=Sv,Ov="[object Null]",kv="[object Undefined]",vo=go?go.toStringTag:void 0;function Iv(n){return n==null?n===void 0?kv:Ov:vo&&vo in Object(n)?Cv(n):Av(n)}var fr=Iv;function Dv(n){return n!=null&&typeof n=="object"}var Xt=Dv,Ev=fr,Mv=Xt,Pv="[object Arguments]";function Nv(n){return Mv(n)&&Ev(n)==Pv}var Rv=Nv,_o=Rv,Fv=Xt,Pu=Object.prototype,$v=Pu.hasOwnProperty,Uv=Pu.propertyIsEnumerable,Lv=_o(function(){return arguments}())?_o:function(n){return Fv(n)&&$v.call(n,"callee")&&!Uv.call(n,"callee")},Nu=Lv,Vv=Array.isArray,ut=Vv,gn={},qv={get exports(){return gn},set exports(n){gn=n}};function Bv(){return!1}var jv=Bv;(function(n,e){var t=ct,r=jv,s=e&&!e.nodeType&&e,i=s&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===s,o=a?t.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;n.exports=u})(qv,gn);var Wv=9007199254740991,Gv=/^(?:0|[1-9]\d*)$/;function zv(n,e){var t=typeof n;return e=e??Wv,!!e&&(t=="number"||t!="symbol"&&Gv.test(n))&&n>-1&&n%1==0&&n<e}var aa=zv,Hv=9007199254740991;function Xv(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Hv}var oa=Xv,Yv=fr,Kv=oa,Qv=Xt,Zv="[object Arguments]",Jv="[object Array]",e_="[object Boolean]",t_="[object Date]",n_="[object Error]",r_="[object Function]",s_="[object Map]",i_="[object Number]",a_="[object Object]",o_="[object RegExp]",c_="[object Set]",u_="[object String]",h_="[object WeakMap]",l_="[object ArrayBuffer]",d_="[object DataView]",p_="[object Float32Array]",f_="[object Float64Array]",m_="[object Int8Array]",g_="[object Int16Array]",v_="[object Int32Array]",__="[object Uint8Array]",y_="[object Uint8ClampedArray]",b_="[object Uint16Array]",x_="[object Uint32Array]",ue={};ue[p_]=ue[f_]=ue[m_]=ue[g_]=ue[v_]=ue[__]=ue[y_]=ue[b_]=ue[x_]=!0;ue[Zv]=ue[Jv]=ue[l_]=ue[e_]=ue[d_]=ue[t_]=ue[n_]=ue[r_]=ue[s_]=ue[i_]=ue[a_]=ue[o_]=ue[c_]=ue[u_]=ue[h_]=!1;function w_(n){return Qv(n)&&Kv(n.length)&&!!ue[Yv(n)]}var T_=w_;function S_(n){return function(e){return n(e)}}var ca=S_,vn={},C_={get exports(){return vn},set exports(n){vn=n}};(function(n,e){var t=Eu,r=e&&!e.nodeType&&e,s=r&&!0&&n&&!n.nodeType&&n,i=s&&s.exports===r,a=i&&t.process,o=function(){try{var c=s&&s.require&&s.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();n.exports=o})(C_,vn);var A_=T_,O_=ca,yo=vn,bo=yo&&yo.isTypedArray,k_=bo?O_(bo):A_,Ru=k_,I_=hv,D_=Nu,E_=ut,M_=gn,P_=aa,N_=Ru,R_=Object.prototype,F_=R_.hasOwnProperty;function $_(n,e){var t=E_(n),r=!t&&D_(n),s=!t&&!r&&M_(n),i=!t&&!r&&!s&&N_(n),a=t||r||s||i,o=a?I_(n.length,String):[],c=o.length;for(var u in n)(e||F_.call(n,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||P_(u,c)))&&o.push(u);return o}var Fu=$_,U_=Object.prototype;function L_(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||U_;return n===t}var ua=L_;function V_(n,e){return function(t){return n(e(t))}}var $u=V_,q_=$u,B_=q_(Object.keys,Object),j_=B_,W_=ua,G_=j_,z_=Object.prototype,H_=z_.hasOwnProperty;function X_(n){if(!W_(n))return G_(n);var e=[];for(var t in Object(n))H_.call(n,t)&&t!="constructor"&&e.push(t);return e}var Y_=X_;function K_(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Yt=K_,Q_=fr,Z_=Yt,J_="[object AsyncFunction]",ey="[object Function]",ty="[object GeneratorFunction]",ny="[object Proxy]";function ry(n){if(!Z_(n))return!1;var e=Q_(n);return e==ey||e==ty||e==J_||e==ny}var Uu=ry,sy=Uu,iy=oa;function ay(n){return n!=null&&iy(n.length)&&!sy(n)}var Gs=ay,oy=Fu,cy=Y_,uy=Gs;function hy(n){return uy(n)?oy(n):cy(n)}var mr=hy,ly=cv,dy=mr;function py(n,e){return n&&ly(n,e,dy)}var fy=py,my=Gs;function gy(n,e){return function(t,r){if(t==null)return t;if(!my(t))return n(t,r);for(var s=t.length,i=e?s:-1,a=Object(t);(e?i--:++i<s)&&r(a[i],i,a)!==!1;);return t}}var vy=gy,_y=fy,yy=vy,by=yy(_y),xy=by,wy=xy;function Ty(n,e){var t=[];return wy(n,function(r,s,i){e(r,s,i)&&t.push(r)}),t}var Sy=Ty;function Cy(){this.__data__=[],this.size=0}var Ay=Cy;function Oy(n,e){return n===e||n!==n&&e!==e}var gr=Oy,ky=gr;function Iy(n,e){for(var t=n.length;t--;)if(ky(n[t][0],e))return t;return-1}var zs=Iy,Dy=zs,Ey=Array.prototype,My=Ey.splice;function Py(n){var e=this.__data__,t=Dy(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():My.call(e,t,1),--this.size,!0}var Ny=Py,Ry=zs;function Fy(n){var e=this.__data__,t=Ry(e,n);return t<0?void 0:e[t][1]}var $y=Fy,Uy=zs;function Ly(n){return Uy(this.__data__,n)>-1}var Vy=Ly,qy=zs;function By(n,e){var t=this.__data__,r=qy(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var jy=By,Wy=Ay,Gy=Ny,zy=$y,Hy=Vy,Xy=jy;function Cn(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Cn.prototype.clear=Wy;Cn.prototype.delete=Gy;Cn.prototype.get=zy;Cn.prototype.has=Hy;Cn.prototype.set=Xy;var Hs=Cn,Yy=Hs;function Ky(){this.__data__=new Yy,this.size=0}var Qy=Ky;function Zy(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var Jy=Zy;function e0(n){return this.__data__.get(n)}var t0=e0;function n0(n){return this.__data__.has(n)}var r0=n0,s0=ct,i0=s0["__core-js_shared__"],a0=i0,si=a0,xo=function(){var n=/[^.]+$/.exec(si&&si.keys&&si.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function o0(n){return!!xo&&xo in n}var c0=o0,u0=Function.prototype,h0=u0.toString;function l0(n){if(n!=null){try{return h0.call(n)}catch{}try{return n+""}catch{}}return""}var Lu=l0,d0=Uu,p0=c0,f0=Yt,m0=Lu,g0=/[\\^$.*+?()[\]{}|]/g,v0=/^\[object .+?Constructor\]$/,_0=Function.prototype,y0=Object.prototype,b0=_0.toString,x0=y0.hasOwnProperty,w0=RegExp("^"+b0.call(x0).replace(g0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T0(n){if(!f0(n)||p0(n))return!1;var e=d0(n)?w0:v0;return e.test(m0(n))}var S0=T0;function C0(n,e){return n==null?void 0:n[e]}var A0=C0,O0=S0,k0=A0;function I0(n,e){var t=k0(n,e);return O0(t)?t:void 0}var Kt=I0,D0=Kt,E0=ct,M0=D0(E0,"Map"),ha=M0,P0=Kt,N0=P0(Object,"create"),Xs=N0,wo=Xs;function R0(){this.__data__=wo?wo(null):{},this.size=0}var F0=R0;function $0(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var U0=$0,L0=Xs,V0="__lodash_hash_undefined__",q0=Object.prototype,B0=q0.hasOwnProperty;function j0(n){var e=this.__data__;if(L0){var t=e[n];return t===V0?void 0:t}return B0.call(e,n)?e[n]:void 0}var W0=j0,G0=Xs,z0=Object.prototype,H0=z0.hasOwnProperty;function X0(n){var e=this.__data__;return G0?e[n]!==void 0:H0.call(e,n)}var Y0=X0,K0=Xs,Q0="__lodash_hash_undefined__";function Z0(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=K0&&e===void 0?Q0:e,this}var J0=Z0,e1=F0,t1=U0,n1=W0,r1=Y0,s1=J0;function An(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}An.prototype.clear=e1;An.prototype.delete=t1;An.prototype.get=n1;An.prototype.has=r1;An.prototype.set=s1;var i1=An,To=i1,a1=Hs,o1=ha;function c1(){this.size=0,this.__data__={hash:new To,map:new(o1||a1),string:new To}}var u1=c1;function h1(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var l1=h1,d1=l1;function p1(n,e){var t=n.__data__;return d1(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Ys=p1,f1=Ys;function m1(n){var e=f1(this,n).delete(n);return this.size-=e?1:0,e}var g1=m1,v1=Ys;function _1(n){return v1(this,n).get(n)}var y1=_1,b1=Ys;function x1(n){return b1(this,n).has(n)}var w1=x1,T1=Ys;function S1(n,e){var t=T1(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var C1=S1,A1=u1,O1=g1,k1=y1,I1=w1,D1=C1;function On(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}On.prototype.clear=A1;On.prototype.delete=O1;On.prototype.get=k1;On.prototype.has=I1;On.prototype.set=D1;var la=On,E1=Hs,M1=ha,P1=la,N1=200;function R1(n,e){var t=this.__data__;if(t instanceof E1){var r=t.__data__;if(!M1||r.length<N1-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new P1(r)}return t.set(n,e),this.size=t.size,this}var F1=R1,$1=Hs,U1=Qy,L1=Jy,V1=t0,q1=r0,B1=F1;function kn(n){var e=this.__data__=new $1(n);this.size=e.size}kn.prototype.clear=U1;kn.prototype.delete=L1;kn.prototype.get=V1;kn.prototype.has=q1;kn.prototype.set=B1;var da=kn,j1="__lodash_hash_undefined__";function W1(n){return this.__data__.set(n,j1),this}var G1=W1;function z1(n){return this.__data__.has(n)}var H1=z1,X1=la,Y1=G1,K1=H1;function Os(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new X1;++e<t;)this.add(n[e])}Os.prototype.add=Os.prototype.push=Y1;Os.prototype.has=K1;var Q1=Os;function Z1(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var J1=Z1;function eb(n,e){return n.has(e)}var tb=eb,nb=Q1,rb=J1,sb=tb,ib=1,ab=2;function ob(n,e,t,r,s,i){var a=t&ib,o=n.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=i.get(n),h=i.get(e);if(u&&h)return u==e&&h==n;var l=-1,d=!0,f=t&ab?new nb:void 0;for(i.set(n,e),i.set(e,n);++l<o;){var p=n[l],m=e[l];if(r)var g=a?r(m,p,l,e,n,i):r(p,m,l,n,e,i);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!rb(e,function(v,y){if(!sb(f,y)&&(p===v||s(p,v,t,r,i)))return f.push(y)})){d=!1;break}}else if(!(p===m||s(p,m,t,r,i))){d=!1;break}}return i.delete(n),i.delete(e),d}var Vu=ob,cb=ct,ub=cb.Uint8Array,qu=ub;function hb(n){var e=-1,t=Array(n.size);return n.forEach(function(r,s){t[++e]=[s,r]}),t}var lb=hb;function db(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var pb=db,So=pr,Co=qu,fb=gr,mb=Vu,gb=lb,vb=pb,_b=1,yb=2,bb="[object Boolean]",xb="[object Date]",wb="[object Error]",Tb="[object Map]",Sb="[object Number]",Cb="[object RegExp]",Ab="[object Set]",Ob="[object String]",kb="[object Symbol]",Ib="[object ArrayBuffer]",Db="[object DataView]",Ao=So?So.prototype:void 0,ii=Ao?Ao.valueOf:void 0;function Eb(n,e,t,r,s,i,a){switch(t){case Db:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Ib:return!(n.byteLength!=e.byteLength||!i(new Co(n),new Co(e)));case bb:case xb:case Sb:return fb(+n,+e);case wb:return n.name==e.name&&n.message==e.message;case Cb:case Ob:return n==e+"";case Tb:var o=gb;case Ab:var c=r&_b;if(o||(o=vb),n.size!=e.size&&!c)return!1;var u=a.get(n);if(u)return u==e;r|=yb,a.set(n,e);var h=mb(o(n),o(e),r,s,i,a);return a.delete(n),h;case kb:if(ii)return ii.call(n)==ii.call(e)}return!1}var Mb=Eb;function Pb(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n}var Bu=Pb,Nb=Bu,Rb=ut;function Fb(n,e,t){var r=e(n);return Rb(n)?r:Nb(r,t(n))}var ju=Fb;function $b(){return[]}var Wu=$b,Ub=Du,Lb=Wu,Vb=Object.prototype,qb=Vb.propertyIsEnumerable,Oo=Object.getOwnPropertySymbols,Bb=Oo?function(n){return n==null?[]:(n=Object(n),Ub(Oo(n),function(e){return qb.call(n,e)}))}:Lb,pa=Bb,jb=ju,Wb=pa,Gb=mr;function zb(n){return jb(n,Gb,Wb)}var Gu=zb,ko=Gu,Hb=1,Xb=Object.prototype,Yb=Xb.hasOwnProperty;function Kb(n,e,t,r,s,i){var a=t&Hb,o=ko(n),c=o.length,u=ko(e),h=u.length;if(c!=h&&!a)return!1;for(var l=c;l--;){var d=o[l];if(!(a?d in e:Yb.call(e,d)))return!1}var f=i.get(n),p=i.get(e);if(f&&p)return f==e&&p==n;var m=!0;i.set(n,e),i.set(e,n);for(var g=a;++l<c;){d=o[l];var v=n[d],y=e[d];if(r)var S=a?r(y,v,d,e,n,i):r(v,y,d,n,e,i);if(!(S===void 0?v===y||s(v,y,t,r,i):S)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var C=n.constructor,b=e.constructor;C!=b&&"constructor"in n&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof b=="function"&&b instanceof b)&&(m=!1)}return i.delete(n),i.delete(e),m}var Qb=Kb,Zb=Kt,Jb=ct,ex=Zb(Jb,"DataView"),tx=ex,nx=Kt,rx=ct,sx=nx(rx,"Promise"),ix=sx,ax=Kt,ox=ct,cx=ax(ox,"Set"),ux=cx,hx=Kt,lx=ct,dx=hx(lx,"WeakMap"),px=dx,wi=tx,Ti=ha,Si=ix,Ci=ux,Ai=px,zu=fr,In=Lu,Io="[object Map]",fx="[object Object]",Do="[object Promise]",Eo="[object Set]",Mo="[object WeakMap]",Po="[object DataView]",mx=In(wi),gx=In(Ti),vx=In(Si),_x=In(Ci),yx=In(Ai),Nt=zu;(wi&&Nt(new wi(new ArrayBuffer(1)))!=Po||Ti&&Nt(new Ti)!=Io||Si&&Nt(Si.resolve())!=Do||Ci&&Nt(new Ci)!=Eo||Ai&&Nt(new Ai)!=Mo)&&(Nt=function(n){var e=zu(n),t=e==fx?n.constructor:void 0,r=t?In(t):"";if(r)switch(r){case mx:return Po;case gx:return Io;case vx:return Do;case _x:return Eo;case yx:return Mo}return e});var Ks=Nt,ai=da,bx=Vu,xx=Mb,wx=Qb,No=Ks,Ro=ut,Fo=gn,Tx=Ru,Sx=1,$o="[object Arguments]",Uo="[object Array]",Cr="[object Object]",Cx=Object.prototype,Lo=Cx.hasOwnProperty;function Ax(n,e,t,r,s,i){var a=Ro(n),o=Ro(e),c=a?Uo:No(n),u=o?Uo:No(e);c=c==$o?Cr:c,u=u==$o?Cr:u;var h=c==Cr,l=u==Cr,d=c==u;if(d&&Fo(n)){if(!Fo(e))return!1;a=!0,h=!1}if(d&&!h)return i||(i=new ai),a||Tx(n)?bx(n,e,t,r,s,i):xx(n,e,c,t,r,s,i);if(!(t&Sx)){var f=h&&Lo.call(n,"__wrapped__"),p=l&&Lo.call(e,"__wrapped__");if(f||p){var m=f?n.value():n,g=p?e.value():e;return i||(i=new ai),s(m,g,t,r,i)}}return d?(i||(i=new ai),wx(n,e,t,r,s,i)):!1}var Ox=Ax,kx=Ox,Vo=Xt;function Hu(n,e,t,r,s){return n===e?!0:n==null||e==null||!Vo(n)&&!Vo(e)?n!==n&&e!==e:kx(n,e,t,r,Hu,s)}var Xu=Hu,Ix=da,Dx=Xu,Ex=1,Mx=2;function Px(n,e,t,r){var s=t.length,i=s,a=!r;if(n==null)return!i;for(n=Object(n);s--;){var o=t[s];if(a&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++s<i;){o=t[s];var c=o[0],u=n[c],h=o[1];if(a&&o[2]){if(u===void 0&&!(c in n))return!1}else{var l=new Ix;if(r)var d=r(u,h,c,n,e,l);if(!(d===void 0?Dx(h,u,Ex|Mx,r,l):d))return!1}}return!0}var Nx=Px,Rx=Yt;function Fx(n){return n===n&&!Rx(n)}var Yu=Fx,$x=Yu,Ux=mr;function Lx(n){for(var e=Ux(n),t=e.length;t--;){var r=e[t],s=n[r];e[t]=[r,s,$x(s)]}return e}var Vx=Lx;function qx(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var Ku=qx,Bx=Nx,jx=Vx,Wx=Ku;function Gx(n){var e=jx(n);return e.length==1&&e[0][2]?Wx(e[0][0],e[0][1]):function(t){return t===n||Bx(t,n,e)}}var zx=Gx,Hx=fr,Xx=Xt,Yx="[object Symbol]";function Kx(n){return typeof n=="symbol"||Xx(n)&&Hx(n)==Yx}var fa=Kx,Qx=ut,Zx=fa,Jx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ew=/^\w*$/;function tw(n,e){if(Qx(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Zx(n)?!0:ew.test(n)||!Jx.test(n)||e!=null&&n in Object(e)}var ma=tw,Qu=la,nw="Expected a function";function ga(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(nw);var t=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=t.cache;if(i.has(s))return i.get(s);var a=n.apply(this,r);return t.cache=i.set(s,a)||i,a};return t.cache=new(ga.Cache||Qu),t}ga.Cache=Qu;var rw=ga,sw=rw,iw=500;function aw(n){var e=sw(n,function(r){return t.size===iw&&t.clear(),r}),t=e.cache;return e}var ow=aw,cw=ow,uw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hw=/\\(\\)?/g,lw=cw(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(uw,function(t,r,s,i){e.push(s?i.replace(hw,"$1"):r||t)}),e}),dw=lw;function pw(n,e){for(var t=-1,r=n==null?0:n.length,s=Array(r);++t<r;)s[t]=e(n[t],t,n);return s}var fw=pw,qo=pr,mw=fw,gw=ut,vw=fa,_w=1/0,Bo=qo?qo.prototype:void 0,jo=Bo?Bo.toString:void 0;function Zu(n){if(typeof n=="string")return n;if(gw(n))return mw(n,Zu)+"";if(vw(n))return jo?jo.call(n):"";var e=n+"";return e=="0"&&1/n==-_w?"-0":e}var yw=Zu,bw=yw;function xw(n){return n==null?"":bw(n)}var ww=xw,Tw=ut,Sw=ma,Cw=dw,Aw=ww;function Ow(n,e){return Tw(n)?n:Sw(n,e)?[n]:Cw(Aw(n))}var Ju=Ow,kw=fa,Iw=1/0;function Dw(n){if(typeof n=="string"||kw(n))return n;var e=n+"";return e=="0"&&1/n==-Iw?"-0":e}var Qs=Dw,Ew=Ju,Mw=Qs;function Pw(n,e){e=Ew(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Mw(e[t++])];return t&&t==r?n:void 0}var eh=Pw,Nw=eh;function Rw(n,e,t){var r=n==null?void 0:Nw(n,e);return r===void 0?t:r}var Fw=Rw;function $w(n,e){return n!=null&&e in Object(n)}var Uw=$w,Lw=Ju,Vw=Nu,qw=ut,Bw=aa,jw=oa,Ww=Qs;function Gw(n,e,t){e=Lw(e,n);for(var r=-1,s=e.length,i=!1;++r<s;){var a=Ww(e[r]);if(!(i=n!=null&&t(n,a)))break;n=n[a]}return i||++r!=s?i:(s=n==null?0:n.length,!!s&&jw(s)&&Bw(a,s)&&(qw(n)||Vw(n)))}var zw=Gw,Hw=Uw,Xw=zw;function Yw(n,e){return n!=null&&Xw(n,e,Hw)}var Kw=Yw,Qw=Xu,Zw=Fw,Jw=Kw,eT=ma,tT=Yu,nT=Ku,rT=Qs,sT=1,iT=2;function aT(n,e){return eT(n)&&tT(e)?nT(rT(n),e):function(t){var r=Zw(t,n);return r===void 0&&r===e?Jw(t,n):Qw(e,r,sT|iT)}}var oT=aT;function cT(n){return n}var va=cT;function uT(n){return function(e){return e==null?void 0:e[n]}}var hT=uT,lT=eh;function dT(n){return function(e){return lT(e,n)}}var pT=dT,fT=hT,mT=pT,gT=ma,vT=Qs;function _T(n){return gT(n)?fT(vT(n)):mT(n)}var yT=_T,bT=zx,xT=oT,wT=va,TT=ut,ST=yT;function CT(n){return typeof n=="function"?n:n==null?wT:typeof n=="object"?TT(n)?xT(n[0],n[1]):bT(n):ST(n)}var AT=CT,OT=Du,kT=Sy,IT=AT,DT=ut;function ET(n,e){var t=DT(n)?OT:kT;return t(n,IT(e))}var MT=ET;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.Swatch=void 0;var Wo=dr,PT=MT,NT=function(){function n(e,t){this._rgb=e,this._population=t}return n.applyFilter=function(e,t){return typeof t=="function"?PT(e,function(r){var s=r.r,i=r.g,a=r.b;return t(s,i,a,255)}):e},Object.defineProperty(n.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rgb",{get:function(){return this._rgb},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hsl",{get:function(){if(!this._hsl){var e=this._rgb,t=e[0],r=e[1],s=e[2];this._hsl=Wo.rgbToHsl(t,r,s)}return this._hsl},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hex",{get:function(){if(!this._hex){var e=this._rgb,t=e[0],r=e[1],s=e[2];this._hex=Wo.rgbToHex(t,r,s)}return this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"population",{get:function(){return this._population},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{rgb:this.rgb,population:this.population}},n.prototype.getRgb=function(){return this._rgb},n.prototype.getHsl=function(){return this.hsl},n.prototype.getPopulation=function(){return this._population},n.prototype.getHex=function(){return this.hex},n.prototype.getYiq=function(){if(!this._yiq){var e=this._rgb;this._yiq=(e[0]*299+e[1]*587+e[2]*114)/1e3}return this._yiq},Object.defineProperty(n.prototype,"titleTextColor",{get:function(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bodyTextColor",{get:function(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor},enumerable:!1,configurable:!0}),n.prototype.getTitleTextColor=function(){return this.titleTextColor},n.prototype.getBodyTextColor=function(){return this.bodyTextColor},n}();Sn.Swatch=NT;var Ar={};function RT(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var FT=RT,$T=Kt,UT=function(){try{var n=$T(Object,"defineProperty");return n({},"",{}),n}catch{}}(),th=UT,Go=th;function LT(n,e,t){e=="__proto__"&&Go?Go(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var nh=LT,VT=nh,qT=gr,BT=Object.prototype,jT=BT.hasOwnProperty;function WT(n,e,t){var r=n[e];(!(jT.call(n,e)&&qT(r,t))||t===void 0&&!(e in n))&&VT(n,e,t)}var rh=WT,GT=rh,zT=nh;function HT(n,e,t,r){var s=!t;t||(t={});for(var i=-1,a=e.length;++i<a;){var o=e[i],c=r?r(t[o],n[o],o,t,n):void 0;c===void 0&&(c=n[o]),s?zT(t,o,c):GT(t,o,c)}return t}var Zs=HT,XT=Zs,YT=mr;function KT(n,e){return n&&XT(e,YT(e),n)}var QT=KT;function ZT(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var JT=ZT,eS=Yt,tS=ua,nS=JT,rS=Object.prototype,sS=rS.hasOwnProperty;function iS(n){if(!eS(n))return nS(n);var e=tS(n),t=[];for(var r in n)r=="constructor"&&(e||!sS.call(n,r))||t.push(r);return t}var aS=iS,oS=Fu,cS=aS,uS=Gs;function hS(n){return uS(n)?oS(n,!0):cS(n)}var Js=hS,lS=Zs,dS=Js;function pS(n,e){return n&&lS(e,dS(e),n)}var fS=pS,ks={},mS={get exports(){return ks},set exports(n){ks=n}};(function(n,e){var t=ct,r=e&&!e.nodeType&&e,s=r&&!0&&n&&!n.nodeType&&n,i=s&&s.exports===r,a=i?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(u,h){if(h)return u.slice();var l=u.length,d=o?o(l):new u.constructor(l);return u.copy(d),d}n.exports=c})(mS,ks);function gS(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var vS=gS,_S=Zs,yS=pa;function bS(n,e){return _S(n,yS(n),e)}var xS=bS,wS=$u,TS=wS(Object.getPrototypeOf,Object),sh=TS,SS=Bu,CS=sh,AS=pa,OS=Wu,kS=Object.getOwnPropertySymbols,IS=kS?function(n){for(var e=[];n;)SS(e,AS(n)),n=CS(n);return e}:OS,ih=IS,DS=Zs,ES=ih;function MS(n,e){return DS(n,ES(n),e)}var PS=MS,NS=ju,RS=ih,FS=Js;function $S(n){return NS(n,FS,RS)}var US=$S,LS=Object.prototype,VS=LS.hasOwnProperty;function qS(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&VS.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var BS=qS,zo=qu;function jS(n){var e=new n.constructor(n.byteLength);return new zo(e).set(new zo(n)),e}var _a=jS,WS=_a;function GS(n,e){var t=e?WS(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var zS=GS,HS=/\w*$/;function XS(n){var e=new n.constructor(n.source,HS.exec(n));return e.lastIndex=n.lastIndex,e}var YS=XS,Ho=pr,Xo=Ho?Ho.prototype:void 0,Yo=Xo?Xo.valueOf:void 0;function KS(n){return Yo?Object(Yo.call(n)):{}}var QS=KS,ZS=_a;function JS(n,e){var t=e?ZS(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var eC=JS,tC=_a,nC=zS,rC=YS,sC=QS,iC=eC,aC="[object Boolean]",oC="[object Date]",cC="[object Map]",uC="[object Number]",hC="[object RegExp]",lC="[object Set]",dC="[object String]",pC="[object Symbol]",fC="[object ArrayBuffer]",mC="[object DataView]",gC="[object Float32Array]",vC="[object Float64Array]",_C="[object Int8Array]",yC="[object Int16Array]",bC="[object Int32Array]",xC="[object Uint8Array]",wC="[object Uint8ClampedArray]",TC="[object Uint16Array]",SC="[object Uint32Array]";function CC(n,e,t){var r=n.constructor;switch(e){case fC:return tC(n);case aC:case oC:return new r(+n);case mC:return nC(n,t);case gC:case vC:case _C:case yC:case bC:case xC:case wC:case TC:case SC:return iC(n,t);case cC:return new r;case uC:case dC:return new r(n);case hC:return rC(n);case lC:return new r;case pC:return sC(n)}}var AC=CC,OC=Yt,Ko=Object.create,kC=function(){function n(){}return function(e){if(!OC(e))return{};if(Ko)return Ko(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),IC=kC,DC=IC,EC=sh,MC=ua;function PC(n){return typeof n.constructor=="function"&&!MC(n)?DC(EC(n)):{}}var NC=PC,RC=Ks,FC=Xt,$C="[object Map]";function UC(n){return FC(n)&&RC(n)==$C}var LC=UC,VC=LC,qC=ca,Qo=vn,Zo=Qo&&Qo.isMap,BC=Zo?qC(Zo):VC,jC=BC,WC=Ks,GC=Xt,zC="[object Set]";function HC(n){return GC(n)&&WC(n)==zC}var XC=HC,YC=XC,KC=ca,Jo=vn,ec=Jo&&Jo.isSet,QC=ec?KC(ec):YC,ZC=QC,JC=da,e2=FT,t2=rh,n2=QT,r2=fS,s2=ks,i2=vS,a2=xS,o2=PS,c2=Gu,u2=US,h2=Ks,l2=BS,d2=AC,p2=NC,f2=ut,m2=gn,g2=jC,v2=Yt,_2=ZC,y2=mr,b2=Js,x2=1,w2=2,T2=4,ah="[object Arguments]",S2="[object Array]",C2="[object Boolean]",A2="[object Date]",O2="[object Error]",oh="[object Function]",k2="[object GeneratorFunction]",I2="[object Map]",D2="[object Number]",ch="[object Object]",E2="[object RegExp]",M2="[object Set]",P2="[object String]",N2="[object Symbol]",R2="[object WeakMap]",F2="[object ArrayBuffer]",$2="[object DataView]",U2="[object Float32Array]",L2="[object Float64Array]",V2="[object Int8Array]",q2="[object Int16Array]",B2="[object Int32Array]",j2="[object Uint8Array]",W2="[object Uint8ClampedArray]",G2="[object Uint16Array]",z2="[object Uint32Array]",ae={};ae[ah]=ae[S2]=ae[F2]=ae[$2]=ae[C2]=ae[A2]=ae[U2]=ae[L2]=ae[V2]=ae[q2]=ae[B2]=ae[I2]=ae[D2]=ae[ch]=ae[E2]=ae[M2]=ae[P2]=ae[N2]=ae[j2]=ae[W2]=ae[G2]=ae[z2]=!0;ae[O2]=ae[oh]=ae[R2]=!1;function Mr(n,e,t,r,s,i){var a,o=e&x2,c=e&w2,u=e&T2;if(t&&(a=s?t(n,r,s,i):t(n)),a!==void 0)return a;if(!v2(n))return n;var h=f2(n);if(h){if(a=l2(n),!o)return i2(n,a)}else{var l=h2(n),d=l==oh||l==k2;if(m2(n))return s2(n,o);if(l==ch||l==ah||d&&!s){if(a=c||d?{}:p2(n),!o)return c?o2(n,r2(a,n)):a2(n,n2(a,n))}else{if(!ae[l])return s?n:{};a=d2(n,l,o)}}i||(i=new JC);var f=i.get(n);if(f)return f;i.set(n,a),_2(n)?n.forEach(function(g){a.add(Mr(g,e,t,g,n,i))}):g2(n)&&n.forEach(function(g,v){a.set(v,Mr(g,e,t,v,n,i))});var p=u?c?u2:c2:c?b2:y2,m=h?void 0:p(n);return e2(m||n,function(g,v){m&&(v=g,g=n[v]),t2(a,v,Mr(g,e,t,v,n,i))}),a}var H2=Mr,X2=H2,Y2=4;function K2(n){return X2(n,Y2)}var Q2=K2,tc;function Z2(){if(tc)return Ar;tc=1;var n=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ar,"__esModule",{value:!0});var e=n(mh()),t=Q2,r=function(){function s(i,a){a===void 0&&(a={}),this._src=i,this._opts=a,this._opts.filters=t(e.default.DefaultOpts.filters)}return s.prototype.maxColorCount=function(i){return this._opts.colorCount=i,this},s.prototype.maxDimension=function(i){return this._opts.maxDimension=i,this},s.prototype.addFilter=function(i){return this._opts.filters.push(i),this},s.prototype.removeFilter=function(i){var a=this._opts.filters.indexOf(i);return a>0&&this._opts.filters.splice(a),this},s.prototype.clearFilters=function(){return this._opts.filters=[],this},s.prototype.quality=function(i){return this._opts.quality=i,this},s.prototype.useImageClass=function(i){return this._opts.ImageClass=i,this},s.prototype.useGenerator=function(i){return this._opts.generator=i,this},s.prototype.useQuantizer=function(i){return this._opts.quantizer=i,this},s.prototype.build=function(){return new e.default(this._src,this._opts)},s.prototype.getPalette=function(i){return this.build().getPalette(i)},s.prototype.getSwatches=function(i){return this.build().getPalette(i)},s}();return Ar.default=r,Ar}var uh={},ya={},ba={};Object.defineProperty(ba,"__esModule",{value:!0});var Me=dr,J2=function(){function n(e,t,r,s,i,a,o){this._volume=-1,this._count=-1,this.dimension={r1:e,r2:t,g1:r,g2:s,b1:i,b2:a},this.hist=o}return n.build=function(e,t){var r=1<<3*Me.SIGBITS,s=new Uint32Array(r),i,a,o,c,u,h,l,d,f,p;i=o=u=0,a=c=h=Number.MAX_VALUE;for(var m=e.length/4,g=0;g<m;){var v=g*4;if(g++,l=e[v+0],d=e[v+1],f=e[v+2],p=e[v+3],p!==0){l=l>>Me.RSHIFT,d=d>>Me.RSHIFT,f=f>>Me.RSHIFT;var y=Me.getColorIndex(l,d,f);s[y]+=1,l>i&&(i=l),l<a&&(a=l),d>o&&(o=d),d<c&&(c=d),f>u&&(u=f),f<h&&(h=f)}}return new n(a,i,c,o,h,u,s)},n.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},n.prototype.volume=function(){if(this._volume<0){var e=this.dimension,t=e.r1,r=e.r2,s=e.g1,i=e.g2,a=e.b1,o=e.b2;this._volume=(r-t+1)*(i-s+1)*(o-a+1)}return this._volume},n.prototype.count=function(){if(this._count<0){for(var e=this.hist,t=this.dimension,r=t.r1,s=t.r2,i=t.g1,a=t.g2,o=t.b1,c=t.b2,u=0,h=r;h<=s;h++)for(var l=i;l<=a;l++)for(var d=o;d<=c;d++){var f=Me.getColorIndex(h,l,d);u+=e[f]}this._count=u}return this._count},n.prototype.clone=function(){var e=this.hist,t=this.dimension,r=t.r1,s=t.r2,i=t.g1,a=t.g2,o=t.b1,c=t.b2;return new n(r,s,i,a,o,c,e)},n.prototype.avg=function(){if(!this._avg){var e=this.hist,t=this.dimension,r=t.r1,s=t.r2,i=t.g1,a=t.g2,o=t.b1,c=t.b2,u=0,h=1<<8-Me.SIGBITS,l=void 0,d=void 0,f=void 0;l=d=f=0;for(var p=r;p<=s;p++)for(var m=i;m<=a;m++)for(var g=o;g<=c;g++){var v=Me.getColorIndex(p,m,g),y=e[v];u+=y,l+=y*(p+.5)*h,d+=y*(m+.5)*h,f+=y*(g+.5)*h}u?this._avg=[~~(l/u),~~(d/u),~~(f/u)]:this._avg=[~~(h*(r+s+1)/2),~~(h*(i+a+1)/2),~~(h*(o+c+1)/2)]}return this._avg},n.prototype.contains=function(e){var t=e[0],r=e[1],s=e[2],i=this.dimension,a=i.r1,o=i.r2,c=i.g1,u=i.g2,h=i.b1,l=i.b2;return t>>=Me.RSHIFT,r>>=Me.RSHIFT,s>>=Me.RSHIFT,t>=a&&t<=o&&r>=c&&r<=u&&s>=h&&s<=l},n.prototype.split=function(){var e=this.hist,t=this.dimension,r=t.r1,s=t.r2,i=t.g1,a=t.g2,o=t.b1,c=t.b2,u=this.count();if(!u)return[];if(u===1)return[this.clone()];var h=s-r+1,l=a-i+1,d=c-o+1,f=Math.max(h,l,d),p=null,m,g;m=g=0;var v=null;if(f===h){v="r",p=new Uint32Array(s+1);for(var y=r;y<=s;y++){m=0;for(var S=i;S<=a;S++)for(var C=o;C<=c;C++){var b=Me.getColorIndex(y,S,C);m+=e[b]}g+=m,p[y]=g}}else if(f===l){v="g",p=new Uint32Array(a+1);for(var S=i;S<=a;S++){m=0;for(var y=r;y<=s;y++)for(var C=o;C<=c;C++){var b=Me.getColorIndex(y,S,C);m+=e[b]}g+=m,p[S]=g}}else{v="b",p=new Uint32Array(c+1);for(var C=o;C<=c;C++){m=0;for(var y=r;y<=s;y++)for(var S=i;S<=a;S++){var b=Me.getColorIndex(y,S,C);m+=e[b]}g+=m,p[C]=g}}for(var T=-1,x=new Uint32Array(p.length),w=0;w<p.length;w++){var A=p[w];T<0&&A>g/2&&(T=w),x[w]=g-A}var O=this;function I(k){var D=k+"1",P=k+"2",U=O.dimension[D],R=O.dimension[P],$=O.clone(),G=O.clone(),V=T-U,E=R-T;for(V<=E?(R=Math.min(R-1,~~(T+E/2)),R=Math.max(0,R)):(R=Math.max(U,~~(T-1-V/2)),R=Math.min(O.dimension[P],R));!p[R];)R++;for(var N=x[R];!N&&p[R-1];)N=x[--R];return $.dimension[P]=R,G.dimension[D]=R+1,[$,G]}return I(v)},n}();ba.default=J2;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});var eA=function(){function n(e){this._comparator=e,this.contents=[],this._sorted=!1}return n.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},n.prototype.push=function(e){this.contents.push(e),this._sorted=!1},n.prototype.peek=function(e){return this._sort(),e=typeof e=="number"?e:this.contents.length-1,this.contents[e]},n.prototype.pop=function(){return this._sort(),this.contents.pop()},n.prototype.size=function(){return this.contents.length},n.prototype.map=function(e){return this._sort(),this.contents.map(e)},n}();xa.default=eA;var hh=z&&z.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ya,"__esModule",{value:!0});var tA=Sn,nA=hh(ba),nc=hh(xa),rA=.75;function rc(n,e){for(var t=n.size();n.size()<e;){var r=n.pop();if(r&&r.count()>0){var s=r.split(),i=s[0],a=s[1];if(n.push(i),a&&a.count()>0&&n.push(a),n.size()===t)break;t=n.size()}else break}}var sA=function(n,e){if(n.length===0||e.colorCount<2||e.colorCount>256)throw new Error("Wrong MMCQ parameters");var t=nA.default.build(n),r=t.hist;Object.keys(r).length;var s=new nc.default(function(a,o){return a.count()-o.count()});s.push(t),rc(s,rA*e.colorCount);var i=new nc.default(function(a,o){return a.count()*a.volume()-o.count()*o.volume()});return i.contents=s.contents,rc(i,e.colorCount-i.size()),iA(i)};function iA(n){for(var e=[];n.size();){var t=n.pop(),r=t.avg();r[0],r[1],r[2],e.push(new tA.Swatch(r,t.count()))}return e}ya.default=sA;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.WebWorker=void 0;var e=ya;Object.defineProperty(n,"MMCQ",{enumerable:!0,get:function(){return e.default}}),n.WebWorker=null})(uh);var lh={},wa={};function aA(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var oA=aA,cA=oA,sc=Math.max;function uA(n,e,t){return e=sc(e===void 0?n.length-1:e,0),function(){for(var r=arguments,s=-1,i=sc(r.length-e,0),a=Array(i);++s<i;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=t(a),cA(n,this,o)}}var hA=uA;function lA(n){return function(){return n}}var dA=lA,pA=dA,ic=th,fA=va,mA=ic?function(n,e){return ic(n,"toString",{configurable:!0,enumerable:!1,value:pA(e),writable:!0})}:fA,gA=mA,vA=800,_A=16,yA=Date.now;function bA(n){var e=0,t=0;return function(){var r=yA(),s=_A-(r-t);if(t=r,s>0){if(++e>=vA)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var xA=bA,wA=gA,TA=xA,SA=TA(wA),CA=SA,AA=va,OA=hA,kA=CA;function IA(n,e){return kA(OA(n,e,AA),n+"")}var DA=IA,EA=gr,MA=Gs,PA=aa,NA=Yt;function RA(n,e,t){if(!NA(t))return!1;var r=typeof e;return(r=="number"?MA(t)&&PA(e,t.length):r=="string"&&e in t)?EA(t[e],n):!1}var FA=RA,$A=DA,UA=gr,LA=FA,VA=Js,dh=Object.prototype,qA=dh.hasOwnProperty,BA=$A(function(n,e){n=Object(n);var t=-1,r=e.length,s=r>2?e[2]:void 0;for(s&&LA(e[0],e[1],s)&&(r=1);++t<r;)for(var i=e[t],a=VA(i),o=-1,c=a.length;++o<c;){var u=a[o],h=n[u];(h===void 0||UA(h,dh[u])&&!qA.call(n,u))&&(n[u]=i[u])}return n}),ph=BA;Object.defineProperty(wa,"__esModule",{value:!0});var ht=Sn,lt=dr,jA=ph,WA={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function GA(n){var e=0;return n.forEach(function(t){e=Math.max(e,t.getPopulation())}),e}function zA(n,e){return n.Vibrant===e||n.DarkVibrant===e||n.LightVibrant===e||n.Muted===e||n.DarkMuted===e||n.LightMuted===e}function HA(n,e,t,r,s,i,a){function o(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];for(var l=0,d=0,f=0;f<u.length;f+=2){var p=u[f],m=u[f+1];l+=p*m,d+=m}return l/d}function c(u,h){return 1-Math.abs(u-h)}return o(c(n,e),a.weightSaturation,c(t,r),a.weightLuma,s/i,a.weightPopulation)}function Zt(n,e,t,r,s,i,a,o,c,u){var h=null,l=0;return e.forEach(function(d){var f=d.getHsl(),p=f[1],m=f[2];if(p>=o&&p<=c&&m>=s&&m<=i&&!zA(n,d)){var g=HA(p,a,m,r,d.getPopulation(),t,u);(h===null||g>l)&&(h=d,l=g)}}),h}function XA(n,e,t){var r={};return r.Vibrant=Zt(r,n,e,t.targetNormalLuma,t.minNormalLuma,t.maxNormalLuma,t.targetVibrantSaturation,t.minVibrantSaturation,1,t),r.LightVibrant=Zt(r,n,e,t.targetLightLuma,t.minLightLuma,1,t.targetVibrantSaturation,t.minVibrantSaturation,1,t),r.DarkVibrant=Zt(r,n,e,t.targetDarkLuma,0,t.maxDarkLuma,t.targetVibrantSaturation,t.minVibrantSaturation,1,t),r.Muted=Zt(r,n,e,t.targetNormalLuma,t.minNormalLuma,t.maxNormalLuma,t.targetMutesSaturation,0,t.maxMutesSaturation,t),r.LightMuted=Zt(r,n,e,t.targetLightLuma,t.minLightLuma,1,t.targetMutesSaturation,0,t.maxMutesSaturation,t),r.DarkMuted=Zt(r,n,e,t.targetDarkLuma,0,t.maxDarkLuma,t.targetMutesSaturation,0,t.maxMutesSaturation,t),r}function YA(n,e,t){if(n.Vibrant===null&&n.DarkVibrant===null&&n.LightVibrant===null){if(n.DarkVibrant===null&&n.DarkMuted!==null){var r=n.DarkMuted.getHsl(),s=r[0],i=r[1],a=r[2];a=t.targetDarkLuma,n.DarkVibrant=new ht.Swatch(lt.hslToRgb(s,i,a),0)}if(n.LightVibrant===null&&n.LightMuted!==null){var o=n.LightMuted.getHsl(),s=o[0],i=o[1],a=o[2];a=t.targetDarkLuma,n.DarkVibrant=new ht.Swatch(lt.hslToRgb(s,i,a),0)}}if(n.Vibrant===null&&n.DarkVibrant!==null){var c=n.DarkVibrant.getHsl(),s=c[0],i=c[1],a=c[2];a=t.targetNormalLuma,n.Vibrant=new ht.Swatch(lt.hslToRgb(s,i,a),0)}else if(n.Vibrant===null&&n.LightVibrant!==null){var u=n.LightVibrant.getHsl(),s=u[0],i=u[1],a=u[2];a=t.targetNormalLuma,n.Vibrant=new ht.Swatch(lt.hslToRgb(s,i,a),0)}if(n.DarkVibrant===null&&n.Vibrant!==null){var h=n.Vibrant.getHsl(),s=h[0],i=h[1],a=h[2];a=t.targetDarkLuma,n.DarkVibrant=new ht.Swatch(lt.hslToRgb(s,i,a),0)}if(n.LightVibrant===null&&n.Vibrant!==null){var l=n.Vibrant.getHsl(),s=l[0],i=l[1],a=l[2];a=t.targetLightLuma,n.LightVibrant=new ht.Swatch(lt.hslToRgb(s,i,a),0)}if(n.Muted===null&&n.Vibrant!==null){var d=n.Vibrant.getHsl(),s=d[0],i=d[1],a=d[2];a=t.targetMutesSaturation,n.Muted=new ht.Swatch(lt.hslToRgb(s,i,a),0)}if(n.DarkMuted===null&&n.DarkVibrant!==null){var f=n.DarkVibrant.getHsl(),s=f[0],i=f[1],a=f[2];a=t.targetMutesSaturation,n.DarkMuted=new ht.Swatch(lt.hslToRgb(s,i,a),0)}if(n.LightMuted===null&&n.LightVibrant!==null){var p=n.LightVibrant.getHsl(),s=p[0],i=p[1],a=p[2];a=t.targetMutesSaturation,n.LightMuted=new ht.Swatch(lt.hslToRgb(s,i,a),0)}}var KA=function(n,e){e=jA({},e,WA);var t=GA(n),r=XA(n,t,e);return YA(r,t,e),r};wa.default=KA;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=wa;Object.defineProperty(n,"Default",{enumerable:!0,get:function(){return e.default}})})(lh);var fh={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});function QA(n,e,t,r){return r>=125&&!(n>250&&e>250&&t>250)}Ta.default=QA;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.combineFilters=void 0;var e=Ta;Object.defineProperty(n,"Default",{enumerable:!0,get:function(){return e.default}});function t(r){return!Array.isArray(r)||r.length===0?null:function(s,i,a,o){if(o===0)return!1;for(var c=0;c<r.length;c++)if(!r[c](s,i,a,o))return!1;return!0}}n.combineFilters=t})(fh);var ac;function mh(){if(ac)return Sr;ac=1;var n=z&&z.__createBinding||(Object.create?function(d,f,p,m){m===void 0&&(m=p),Object.defineProperty(d,m,{enumerable:!0,get:function(){return f[p]}})}:function(d,f,p,m){m===void 0&&(m=p),d[m]=f[p]}),e=z&&z.__setModuleDefault||(Object.create?function(d,f){Object.defineProperty(d,"default",{enumerable:!0,value:f})}:function(d,f){d.default=f}),t=z&&z.__importStar||function(d){if(d&&d.__esModule)return d;var f={};if(d!=null)for(var p in d)p!=="default"&&Object.hasOwnProperty.call(d,p)&&n(f,d,p);return e(f,d),f},r=z&&z.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Sr,"__esModule",{value:!0});var s=Sn,i=r(Z2()),a=t(dr),o=t(uh),c=t(lh),u=t(fh),h=ph,l=function(){function d(f,p){this._src=f,this.opts=h({},p,d.DefaultOpts),this.opts.combinedFilter=u.combineFilters(this.opts.filters)}return d.from=function(f){return new i.default(f)},d.prototype._process=function(f,p){var m=p.quantizer,g=p.generator;return f.scaleDown(p),f.applyFilter(p.combinedFilter).then(function(v){return m(v.data,p)}).then(function(v){return s.Swatch.applyFilter(v,p.combinedFilter)}).then(function(v){return Promise.resolve(g(v))})},d.prototype.palette=function(){return this.swatches()},d.prototype.swatches=function(){return this._palette},d.prototype.getPalette=function(f){var p=this,m=new this.opts.ImageClass,g=m.load(this._src).then(function(v){return p._process(v,p.opts)}).then(function(v){return p._palette=v,m.remove(),v},function(v){throw m.remove(),v});return f&&g.then(function(v){return f(null,v)},function(v){return f(v)}),g},d.Builder=i.default,d.Quantizer=o,d.Generator=c,d.Filter=u,d.Util=a,d.Swatch=s.Swatch,d.DefaultOpts={colorCount:64,quality:5,generator:c.Default,ImageClass:null,quantizer:o.MMCQ,filters:[u.Default]},d}();return Sr.default=l,Sr}var Sa={},ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.ImageBase=void 0;var ZA=function(){function n(){}return n.prototype.scaleDown=function(e){var t=this.getWidth(),r=this.getHeight(),s=1;if(e.maxDimension>0){var i=Math.max(t,r);i>e.maxDimension&&(s=e.maxDimension/i)}else s=1/e.quality;s<1&&this.resize(t*s,r*s,s)},n.prototype.applyFilter=function(e){var t=this.getImageData();if(typeof e=="function")for(var r=t.data,s=r.length/4,i=void 0,a=void 0,o=void 0,c=void 0,u=void 0,h=0;h<s;h++)i=h*4,a=r[i+0],o=r[i+1],c=r[i+2],u=r[i+3],e(a,o,c,u)||(r[i+3]=0);return Promise.resolve(t)},n}();ei.ImageBase=ZA;var Dn={},Is={},JA={get exports(){return Is},set exports(n){Is=n}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(n,e){(function(t){var r=e&&!e.nodeType&&e,s=n&&!n.nodeType&&n,i=typeof z=="object"&&z;(i.global===i||i.window===i||i.self===i)&&(t=i);var a,o=2147483647,c=36,u=1,h=26,l=38,d=700,f=72,p=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=c-u,b=Math.floor,T=String.fromCharCode,x;function w(E){throw RangeError(S[E])}function A(E,N){for(var q=E.length,Y=[];q--;)Y[q]=N(E[q]);return Y}function O(E,N){var q=E.split("@"),Y="";q.length>1&&(Y=q[0]+"@",E=q[1]),E=E.replace(y,".");var K=E.split("."),j=A(K,N).join(".");return Y+j}function I(E){for(var N=[],q=0,Y=E.length,K,j;q<Y;)K=E.charCodeAt(q++),K>=55296&&K<=56319&&q<Y?(j=E.charCodeAt(q++),(j&64512)==56320?N.push(((K&1023)<<10)+(j&1023)+65536):(N.push(K),q--)):N.push(K);return N}function k(E){return A(E,function(N){var q="";return N>65535&&(N-=65536,q+=T(N>>>10&1023|55296),N=56320|N&1023),q+=T(N),q}).join("")}function D(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:c}function P(E,N){return E+22+75*(E<26)-((N!=0)<<5)}function U(E,N,q){var Y=0;for(E=q?b(E/d):E>>1,E+=b(E/N);E>C*h>>1;Y+=c)E=b(E/C);return b(Y+(C+1)*E/(E+l))}function R(E){var N=[],q=E.length,Y,K=0,j=p,X=f,re,L,Se,Ae,de,xe,$e,Ze,F;for(re=E.lastIndexOf(m),re<0&&(re=0),L=0;L<re;++L)E.charCodeAt(L)>=128&&w("not-basic"),N.push(E.charCodeAt(L));for(Se=re>0?re+1:0;Se<q;){for(Ae=K,de=1,xe=c;Se>=q&&w("invalid-input"),$e=D(E.charCodeAt(Se++)),($e>=c||$e>b((o-K)/de))&&w("overflow"),K+=$e*de,Ze=xe<=X?u:xe>=X+h?h:xe-X,!($e<Ze);xe+=c)F=c-Ze,de>b(o/F)&&w("overflow"),de*=F;Y=N.length+1,X=U(K-Ae,Y,Ae==0),b(K/Y)>o-j&&w("overflow"),j+=b(K/Y),K%=Y,N.splice(K++,0,j)}return k(N)}function $(E){var N,q,Y,K,j,X,re,L,Se,Ae,de,xe=[],$e,Ze,F,W;for(E=I(E),$e=E.length,N=p,q=0,j=f,X=0;X<$e;++X)de=E[X],de<128&&xe.push(T(de));for(Y=K=xe.length,K&&xe.push(m);Y<$e;){for(re=o,X=0;X<$e;++X)de=E[X],de>=N&&de<re&&(re=de);for(Ze=Y+1,re-N>b((o-q)/Ze)&&w("overflow"),q+=(re-N)*Ze,N=re,X=0;X<$e;++X)if(de=E[X],de<N&&++q>o&&w("overflow"),de==N){for(L=q,Se=c;Ae=Se<=j?u:Se>=j+h?h:Se-j,!(L<Ae);Se+=c)W=L-Ae,F=c-Ae,xe.push(T(P(Ae+W%F,0))),L=b(W/F);xe.push(T(P(L,0))),j=U(q,Ze,Y==K),q=0,++Y}++q,++N}return xe.join("")}function G(E){return O(E,function(N){return g.test(N)?R(N.slice(4).toLowerCase()):N})}function V(E){return O(E,function(N){return v.test(N)?"xn--"+$(N):N})}if(a={version:"1.3.2",ucs2:{decode:I,encode:k},decode:R,encode:$,toASCII:V,toUnicode:G},r&&s)if(n.exports==r)s.exports=a;else for(x in a)a.hasOwnProperty(x)&&(r[x]=a[x]);else t.punycode=a})(z)})(JA,Is);var eO={isString:function(n){return typeof n=="string"},isObject:function(n){return typeof n=="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}},tr={};function tO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var nO=function(n,e,t,r){e=e||"&",t=t||"=";var s={};if(typeof n!="string"||n.length===0)return s;var i=/\+/g;n=n.split(e);var a=1e3;r&&typeof r.maxKeys=="number"&&(a=r.maxKeys);var o=n.length;a>0&&o>a&&(o=a);for(var c=0;c<o;++c){var u=n[c].replace(i,"%20"),h=u.indexOf(t),l,d,f,p;h>=0?(l=u.substr(0,h),d=u.substr(h+1)):(l=u,d=""),f=decodeURIComponent(l),p=decodeURIComponent(d),tO(s,f)?Array.isArray(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s},Pn=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},rO=function(n,e,t,r){return e=e||"&",t=t||"=",n===null&&(n=void 0),typeof n=="object"?Object.keys(n).map(function(s){var i=encodeURIComponent(Pn(s))+t;return Array.isArray(n[s])?n[s].map(function(a){return i+encodeURIComponent(Pn(a))}).join(e):i+encodeURIComponent(Pn(n[s]))}).join(e):r?encodeURIComponent(Pn(r))+t+encodeURIComponent(Pn(n)):""};tr.decode=tr.parse=nO;tr.encode=tr.stringify=rO;var sO=Is,Je=eO;Dn.parse=vr;Dn.resolve=fO;Dn.resolveObject=mO;Dn.format=pO;Dn.Url=je;function je(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var iO=/^([a-z0-9.+-]+:)/i,aO=/:[0-9]*$/,oO=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,cO=["<",">",'"',"`"," ","\r",`
`,"	"],uO=["{","}","|","\\","^","`"].concat(cO),Oi=["'"].concat(uO),oc=["%","/","?",";","#"].concat(Oi),cc=["/","?","#"],hO=255,uc=/^[+a-z0-9A-Z_-]{0,63}$/,lO=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,dO={javascript:!0,"javascript:":!0},ki={javascript:!0,"javascript:":!0},on={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ii=tr;function vr(n,e,t){if(n&&Je.isObject(n)&&n instanceof je)return n;var r=new je;return r.parse(n,e,t),r}je.prototype.parse=function(n,e,t){if(!Je.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),s=r!==-1&&r<n.indexOf("#")?"?":"#",i=n.split(s),a=/\\/g;i[0]=i[0].replace(a,"/"),n=i.join(s);var o=n;if(o=o.trim(),!t&&n.split("#").length===1){var c=oO.exec(o);if(c)return this.path=o,this.href=o,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=Ii.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=iO.exec(o);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,o=o.substr(u.length)}if(t||u||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=o.substr(0,2)==="//";l&&!(u&&ki[u])&&(o=o.substr(2),this.slashes=!0)}if(!ki[u]&&(l||u&&!on[u])){for(var d=-1,f=0;f<cc.length;f++){var p=o.indexOf(cc[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,g;d===-1?g=o.lastIndexOf("@"):g=o.lastIndexOf("@",d),g!==-1&&(m=o.slice(0,g),o=o.slice(g+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<oc.length;f++){var p=o.indexOf(oc[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var y=this.hostname.split(/\./),f=0,S=y.length;f<S;f++){var C=y[f];if(C&&!C.match(uc)){for(var b="",T=0,x=C.length;T<x;T++)C.charCodeAt(T)>127?b+="x":b+=C[T];if(!b.match(uc)){var w=y.slice(0,f),A=y.slice(f+1),O=C.match(lO);O&&(w.push(O[1]),A.unshift(O[2])),A.length&&(o="/"+A.join(".")+o),this.hostname=w.join(".");break}}}this.hostname.length>hO?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=sO.toASCII(this.hostname));var I=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+I,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!dO[h])for(var f=0,S=Oi.length;f<S;f++){var D=Oi[f];if(o.indexOf(D)!==-1){var P=encodeURIComponent(D);P===D&&(P=escape(D)),o=o.split(D).join(P)}}var U=o.indexOf("#");U!==-1&&(this.hash=o.substr(U),o=o.slice(0,U));var R=o.indexOf("?");if(R!==-1?(this.search=o.substr(R),this.query=o.substr(R+1),e&&(this.query=Ii.parse(this.query)),o=o.slice(0,R)):e&&(this.search="",this.query={}),o&&(this.pathname=o),on[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",$=this.search||"";this.path=I+$}return this.href=this.format(),this};function pO(n){return Je.isString(n)&&(n=vr(n)),n instanceof je?n.format():je.prototype.format.call(n)}je.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",r=this.hash||"",s=!1,i="";this.host?s=n+this.host:this.hostname&&(s=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&Je.isObject(this.query)&&Object.keys(this.query).length&&(i=Ii.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||on[e])&&s!==!1?(s="//"+(s||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):s||(s=""),r&&r.charAt(0)!=="#"&&(r="#"+r),a&&a.charAt(0)!=="?"&&(a="?"+a),t=t.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),e+s+t+a+r};function fO(n,e){return vr(n,!1,!0).resolve(e)}je.prototype.resolve=function(n){return this.resolveObject(vr(n,!1,!0)).format()};function mO(n,e){return n?vr(n,!1,!0).resolveObject(e):e}je.prototype.resolveObject=function(n){if(Je.isString(n)){var e=new je;e.parse(n,!1,!0),n=e}for(var t=new je,r=Object.keys(this),s=0;s<r.length;s++){var i=r[s];t[i]=this[i]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var a=Object.keys(n),o=0;o<a.length;o++){var c=a[o];c!=="protocol"&&(t[c]=n[c])}return on[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!on[n.protocol]){for(var u=Object.keys(n),h=0;h<u.length;h++){var l=u[h];t[l]=n[l]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!ki[n.protocol]){for(var S=(n.pathname||"").split("/");S.length&&!(n.host=S.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),S[0]!==""&&S.unshift(""),S.length<2&&S.unshift(""),t.pathname=S.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=n.host||n.pathname&&n.pathname.charAt(0)==="/",g=m||p||t.host&&n.pathname,v=g,y=t.pathname&&t.pathname.split("/")||[],S=n.pathname&&n.pathname.split("/")||[],C=t.protocol&&!on[t.protocol];if(C&&(t.hostname="",t.port=null,t.host&&(y[0]===""?y[0]=t.host:y.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(S[0]===""?S[0]=n.host:S.unshift(n.host)),n.host=null),g=g&&(S[0]===""||y[0]==="")),m)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,y=S;else if(S.length)y||(y=[]),y.pop(),y=y.concat(S),t.search=n.search,t.query=n.query;else if(!Je.isNullOrUndefined(n.search)){if(C){t.hostname=t.host=y.shift();var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return t.search=n.search,t.query=n.query,(!Je.isNull(t.pathname)||!Je.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!y.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var T=y.slice(-1)[0],x=(t.host||n.host||y.length>1)&&(T==="."||T==="..")||T==="",w=0,A=y.length;A>=0;A--)T=y[A],T==="."?y.splice(A,1):T===".."?(y.splice(A,1),w++):w&&(y.splice(A,1),w--);if(!g&&!v)for(;w--;w)y.unshift("..");g&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),x&&y.join("/").substr(-1)!=="/"&&y.push("");var O=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(C){t.hostname=t.host=O?"":y.length?y.shift():"";var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return g=g||t.host&&y.length,g&&!O&&y.unshift(""),y.length?t.pathname=y.join("/"):(t.pathname=null,t.path=null),(!Je.isNull(t.pathname)||!Je.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};je.prototype.parseHost=function(){var n=this.host,e=aO.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};var gO=z&&z.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)s.hasOwnProperty(i)&&(r[i]=s[i])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vO=z&&z.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),_O=z&&z.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),yO=z&&z.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&vO(e,n,t);return _O(e,n),e};Object.defineProperty(Sa,"__esModule",{value:!0});var bO=ei,Di=yO(Dn);function xO(n){var e=Di.parse(n);return e.protocol===null&&e.host===null&&e.port===null}function wO(n,e){var t=Di.parse(n),r=Di.parse(e);return t.protocol===r.protocol&&t.hostname===r.hostname&&t.port===r.port}var TO=function(n){gO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._initCanvas=function(){var t=this.image,r=this._canvas=document.createElement("canvas"),s=this._context=r.getContext("2d");r.className="vibrant-canvas",r.style.display="none",this._width=r.width=t.width,this._height=r.height=t.height,s.drawImage(t,0,0),document.body.appendChild(r)},e.prototype.load=function(t){var r=this,s=null,i=null;if(typeof t=="string")s=document.createElement("img"),!xO(t)&&!wO(window.location.href,t)&&(s.crossOrigin="anonymous"),i=s.src=t;else if(t instanceof HTMLImageElement)s=t,i=t.src;else return Promise.reject(new Error("Cannot load buffer as an image in browser"));return this.image=s,new Promise(function(a,o){var c=function(){r._initCanvas(),a(r)};s.complete?c():(s.onload=c,s.onerror=function(u){return o(new Error("Fail to load image: "+i))})})},e.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},e.prototype.update=function(t){this._context.putImageData(t,0,0)},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.resize=function(t,r,s){var i=this,a=i._canvas,o=i._context,c=i.image;this._width=a.width=t,this._height=a.height=r,o.scale(s,s),o.drawImage(c,0,0)},e.prototype.getPixelCount=function(){return this._width*this._height},e.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},e.prototype.remove=function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)},e}(bO.ImageBase);Sa.default=TO;var gh=z&&z.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},vh=gh(mh()),SO=gh(Sa);vh.default.DefaultOpts.ImageClass=SO.default;var CO=vh.default;function tn(n){return n[Math.floor(Math.random()*n.length)]}function et(n=.5){return Math.random()>1-n}function Rn(n,e){return Math.floor(Math.random()*(e-n)+n)}const AO="0.12.5";let _e={};const OO=()=>{if(location.hash){const n=location.hash.slice(1),e=atob(n),t=unescape(e);_e=JSON.parse(t)}},kO=()=>{const n=JSON.stringify(_e),e=escape(n),t=btoa(e);location.hash=t},Ds=n=>{_e={..._e,...n}};let Fn=[];const oi=document.querySelector("#terminal"),Pe=n=>{n&&(Fn=Fn.concat(n.split(`
`)),Fn.push(`
`))},IO=()=>{if(Fn.length){const n=Fn.shift(),e=document.createElement("div");e.textContent=n,oi.appendChild(e),oi.scrollTop=oi.scrollHeight}},DO=6,_h=[],EO=n=>{const e={};for(let t=0;t<10;t++)e[t]=`./s/${n}/${t}.wav`;return e},MO=[["A#","B#","D","D#","E#","G","G#"],["A","F#","C","D#"],["B","D","E","F#","A"],["E","F","G","A","B","C","D"],["A","F","F#","G"],["F","F","C","C","D","D","C","Bb","Bb","A","A","G","G","F"],["C","G","C","B","F","B"],["G","A","F","F","C"]],yh=["8n","8t","16n","16t","32n","32n","32t","64n","64n","64t","64t"],hc=["sine","square","triangle","sawtooth"];let bh,Es,Or,Pr,Nr,Rr,Fr,$n,cn,$r,kr;const xh=(n=!1)=>{kr=_e.kitNumber||`${Rn(1,DO)}`.padStart(3,"0"),bh=new nv(EO(kr),()=>{n||(Pe("Loaded kit successfully!"),Pe("Please press play..."));const e=document.getElementById("play");e.disabled=!1,e.textContent="Play"}),Es=new mn({volume:-6}),Or=_e.synthType||et()?"pulse":tn(hc),Es.oscillator.type=Or,Pr=_e.filterType||tn(hc),Nr=_e.filterRate||Rn(2,5),Rr=_e.reverbSize||Math.random(),Fr=_e.delayDuration||tn(yh),$n=_e.synthMode||et()?"continuous":"random",cn=_e.noteCollection||tn(MO),$r=_e.bpm||Rn(18,52),Ds({bpm:$r,filterType:Pr,kitNumber:kr,noteCollection:cn,synthMode:$n,synthType:Or,filterRate:Nr,reverbSize:Rr,delayDuration:Fr}),!n&&_e.phrases&&Pe(`Loading "${_e.phrases[1]}" by ${_e.phrases[0]}...`),n||Pe(`
Song info
=========
BPM: ${$r}
Kit: ${kr}
Filter type: ${Pr}
Filter rate: ${Nr}
Reverb size: ${Rr}
Delay duration: ${Fr}
Synth type: ${Or}
Synth mode: ${$n}
Note collection: ${cn}
      `)},wh=n=>{if(n===9&&($n==="continuous"||et(.8))){let e;$n==="continuous"?(e=cn.shift(),cn.push(e)):e=tn(cn);const t=Rn(2,7),r=tn(yh),s=ev();Es.triggerAttackRelease(e+t,r,s)}else _h[n].start()},lc=(n=!1)=>{let e=0;const t=new xs(Nr).start();t.type=Pr;const r=new Ss(Rr),s=new Ot(-12),i=new Cs(Fr,.2);for(let o=0;o<10;o++){const c=new fn(bh.get(o));c.chain(r,t,i,s,fo),Es.chain(r,t,i,fo),_h.push(c)}return n?void 0:[o=>{let c=e%16;const u=document.getElementById("autoevolve").checked;for(let h=0;h<10;h++){const l=document.querySelector(`.row${h} input:nth-child(${c+1})`);l&&l.checked&&wh(h),tv.schedule(()=>{const d=c===0?document.querySelector(`.row${h} input:nth-child(16)`):document.querySelector(`.row${h} input:nth-child(${c})`);d&&d.classList.remove("playing"),l&&(l.classList.add("playing"),u&&(l.checked&&et(.35)?l.checked=!1:!l.checked&&et(.15)&&(l.checked=!0)))},o)}e++},$r]},_r=n=>{for(let e=0;e<10;e++)for(let t=0;t<16;t++)n(e,t)},PO=n=>{n(),_r((t,r)=>{const s=document.querySelector(`.row${t} input:nth-child(${r+1})`);s.addEventListener("click",()=>{s.checked&&wh(t)})})},NO=()=>{const n=[[],[],[],[],[],[],[],[],[],[]];return _r((t,r)=>{const s=document.querySelector(`.row${t} input:nth-child(${r+1})`);n[t][r]=s.checked}),n},RO=n=>{_r((t,r)=>{const s=document.querySelector(`.row${t} input:nth-child(${r+1})`);s.checked=n[t][r]})},dc=()=>{_r((e,t)=>{let r=e>4?.08:.1;if(t===0||t===4||t===8||t===12?r=.3:t%2===0&&(r=.2),et(r)){const s=document.querySelector(`.row${e} input:nth-child(${t+1})`);s.checked=!0}})},pc=()=>{_r((e,t)=>{const r=document.querySelector(`.row${e} input:nth-child(${t+1})`);r&&(r.checked=!1)})},fc={a:["  xx"," x x","x  x","xxxx","x  x"],b:["xxx ","x  x","xxx ","x  x","xxxx"],c:[" xxx","x  x","x   ","x  x","xxxx"],d:["xxx ","x  x","x  x","x  x","xxx "],e:["xxx ","x   ","xx  ","x  x","xxxx"],f:["xxxx","x  x","xx  ","x   ","x   "],g:[" xxx","x   ","x xx","x  x","xxxx"],h:["   x","x  x","xxxx","x  x","x  x"],i:["xxx"," x "," x "," x ","xxx"],j:["xxxx","   x","   x","x  x"," xx "],k:["x  x","x  x","xxx ","x  x","x  x"],l:["x   ","x   ","x   ","x   ","xxxx"],m:["x   x","xx xx","x x x","x   x","x   x"],n:["x  x","xx x","x xx","x  x","x  x"],o:[" xxx","x  x","x  x","x  x","xxxx"],p:["xxxx","   x","xxxx","x   ","x   "],q:[" xxx","x  x","x  x","x xx","xxxx"],r:["xxxx","x  x","xxx ","x  x","x  x"],s:["xxxx","x   ","xxxx","   x","xxxx"],t:["xxx"," x "," x "," x "," x "],u:["x  x","x  x","x  x","x  x","xxxx"],v:["x  x","x  x","x  x","x  x"," xx "],w:["x   x","x   x","x x x","xx xx","x   x"],x:["x  x","x  x"," xx ","x  x","x  x"],y:["x   x","x   x"," x x ","  x  ","  x  "],z:["xxxx","   x"," xx ","x   ","xxxx"],".":["   ","   ","   ","   "," x "],"/":["    x","   x ","  x  "," x   ","x    "],"?":["xxx","  x"," x ","   "," x "],"!":[" x "," x "," x ","   "," x "],"-":["  ","  ","xx","  ","  "],"(":[" x","x ","x ","x "," x"],")":["x "," x"," x"," x","x "]," ":["  ","  ","  ","  ","  "]},FO=n=>{const e=n.toLowerCase().split(""),t=[[],[],[],[],[]];for(let r=0;r<e.length;r++)if(fc[e[r]]){const s=fc[e[r]];for(let i=0;i<s.length;i++){const a=s[i].split("");for(let o=0;o<a.length;o++)t[i].push(s[i][o]==="x")}for(let i=0;i<s.length;i++){s[i].split("");for(let a=0;a<1;a++)t[i].push(!1)}}else console.warn(`Missing character "${e[r]}"`);return t},$O=["Action","Arcade","Arnold","Attack","Blast","Blaster","Bronson","Cassette","Club","Cobra","Cruise","Cyborg","Danger","Deathray","Dothraki","Dreams","Drive","Electric","Elite","Ferrari","Fist","Flash","FM","Force","Future","Glove","Hi-Fi","Highway","Hotline","Jackson","Kennedy","Laser","Lights","Maximum","Mega","Midnite","Neon","Night","Noir","Power","Radar","Rage","Samantha","Showdown","Skyfall","Skyline","Squad","Stallone","Star","Stereo","Street","Strike","Sunset","Tango","Tesla","Turbo","United","Urban","Vector","VHS","Vice","Video","Wave","XXX","Youth","Zulu"],UO=["1984","2000","'84","'86","IV","One"],LO=["Amsterdam","Bangalore","Borneo","Broadway","Calif.","Dresden","Hong Kong","Interstate","LA","Malibu","Miami","Paris","Tokyo"],VO=["Djungle","Street","Trenches","Valley"],qO=["case","cop","copter","crawler","cruise","drive","driver","dynamix","fighter","game","hawk","hunter","land","loader","lord","mancer","maxx","net","nights","noir","rider","shaper","slasher","starr","tech","tron","tronix","worx"],BO=["Aero","Beta","Bronto","Chrono","Echo","Edge","Electro","Fusion","Futur","Glitch","Head","Inter","Lazer","Mega","Multi","Neon","Neuro","Night","Poly","Radio","Stereo","Strange","Synth","Tech","Thunder","Time"];function jO(n,e){return Ft(n,[])+Ft(e,[])}function Ft(n,e){const t=n[Math.floor(Math.random()*n.length)];return e.length&&e.includes(t)?Ft(n,e):t}function Ir(n,e){for(let t=0;t<n.length;t++)if(n[t].includes(e)&&e.includes(n[t]))return;n.push(e)}function mc(n){const e=[],t=et(.2),r=et(.1),s=et(.05),i=n||2;if(et(.2))return Ir(e,jO(BO,qO)),e.join("");for(let a=0;a<i;a++)Ir(e,Ft($O,e));return t&&e.unshift(Ft(LO,e)),!t&&s&&Ir(e,Ft(VO,e)),r&&Ir(e,Ft(UO,e)),n&&(e.length=n),e.join(" ")}const WO=()=>[mc(),mc(2)];il.init(Pt);OO();xh();const GO=78,Th=_e.imageNumber||`${Rn(1,GO)}`.padStart(3,"0"),gc=`./i/${Th}.jpg`,xt=12,ci=-24,[Sh,Ch]=_e.phrases||WO(),ui=FO(Ch),zO={color:"#c25",leftFace:"#ea0",rightFace:"#e62",topFace:"#ed0",bottomFace:"#636"};Ds({imageNumber:Th,phrases:[Sh,Ch]});setInterval(IO,100);CO.from(gc).getPalette().then(n=>{document.querySelector("#scroller").style=`background-image: url(${gc})`,document.querySelector("#version").innerText=`v${AO}`;let e=0,t=240,r=1800,s=!0;Pe("Color scheme loaded."),Pe(`Palette:
  Muted: ${n.Muted.getHex()}
  Vibrant: ${n.Vibrant.getHex()}
  LightMuted: ${n.LightMuted.getHex()}
  LightVibrant: ${n.LightVibrant.getHex()}
  DarkVibrant: ${n.DarkVibrant.getHex()}
`);const i=()=>{let x=e/t,w=Pt.easeInOut(x%1,2);e++,e<t&&e<r?(s&&(a.zoom=Math.sin(a.rotate.x/4)),a.rotate.x=w*Pt.TAU):e>t&&e<r||e>r&&(s=!1,e=0),a.rotate.z=Math.sin(new Date().getTime()/2400)*.04,a.updateRenderGraph(),requestAnimationFrame(i)},a=new Pt.Illustration({element:".illo",dragRotate:!1,centered:!0,rotate:{y:-.28}}),o=new Pt.Font({src:"./spitlo_f1-v1.1.ttf"});new Pt.TextGroup({addTo:a,font:o,value:Sh.toUpperCase(),fontSize:32,color:"#ffe",stroke:2,fill:!0,translate:{x:-512,y:ci-xt}}),_e.sequence?RO(_e.sequence):dc();const c=document.documentElement;c.style.setProperty("--seqTrack",n.Vibrant.getHex()),c.style.setProperty("--seqActive",n.LightMuted.getHex()),c.style.setProperty("--seqPlaying",n.LightVibrant.getHex()),document.getElementById("sequencer").classList.add("loaded"),document.getElementById("controls").classList.add("loaded");let l=!1,d;for(let x=0;x<ui.length;x++)for(let w=0;w<ui[x].length;w++)ui[x][w]&&(l?d.copy({translate:{x:w*xt-512,y:x*xt+ci}}):(l=!0,d=new Pt.Box({addTo:a,...zO,color:n.Muted.getHex(),leftFace:n.Vibrant.getHex(),rightFace:n.LightMuted.getHex(),topFace:n.LightVibrant.getHex(),bottomFace:n.DarkVibrant.getHex(),width:xt,height:xt,depth:xt,stroke:1,translate:{x:w*xt-512,y:x*xt+ci}})));Pe("Initiating animation..."),i();let f=!1;PO(()=>{xh(!0),lc(!0),f||(oo(),f=!0)});let p=!1,m=!1;const g=document.getElementById("play");g.addEventListener("click",async x=>{if(x.preventDefault(),g.classList.remove("unpressed"),f||(oo(),f=!0),!m){const[w,A]=lc();Tr.bpm.value=A,Tr.scheduleRepeat(w,"16n"),m=!0}p?(Tr.stop(),p=!1,g.textContent="Play",Pe("Stopping")):(await Tr.start(),p=!0,g.textContent="Stop",Pe("Playing"))}),document.getElementById("clear").addEventListener("click",()=>{pc(),Pe("Clearing sequence")}),document.getElementById("randomize").addEventListener("click",()=>{pc(),dc(),Pe("Randomizing sequence")});const S=document.getElementById("autoevolve");_e.autoevolve==="off"&&(S.checked=!1),S.addEventListener("change",()=>{const x=S.checked;Pe(`Auto-evolve is: ${x?"On":"Off"}`),Ds({autoevolve:x?"on":"off"})}),document.getElementById("next").addEventListener("click",()=>{location.href="."}),document.getElementById("save").addEventListener("click",()=>{const x=NO();Ds({sequence:x}),kO(),Pe(`
This song is now saved. To share it, copy the URL from the address bar.
      `)}),document.getElementById("help").addEventListener("click",()=>{Pe(`
Help
====
If you want to create your own sequence, simply clear the playing sequence,
disable auto-evolve and create your own sequence by clicking the corresponding dots.
You cannot change the BPM, the samples or the effects, you can only change the
sequence. Channel 10 is special, everytime a note is struck on it, it either plays
the sample for that track, or a short note. If play mode is set to "continuous",
it will always play a note, the next note from the current scale note collection.

If youre not happy with the current preset, just click "Next" until you find
something that you like.

If you want to check out the code for this, visit github.com/spitlo/space
      `)})});
